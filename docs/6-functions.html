<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Functions | Preceptor’s Primer for Bayesian Data Science</title>
  <meta name="description" content="Chapter 6 Functions | Preceptor’s Primer for Bayesian Data Science" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Functions | Preceptor’s Primer for Bayesian Data Science" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="davidkane9/PPBDS" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Functions | Preceptor’s Primer for Bayesian Data Science" />
  
  
  

<meta name="author" content="David Kane" />


<meta name="date" content="2020-01-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="5-tidy.html"/>
<link rel="next" href="7-probability.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Forward</a></li>
<li class="chapter" data-level="" data-path="license.html"><a href="license.html"><i class="fa fa-check"></i>License</a></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="" data-path="dedication.html"><a href="dedication.html"><i class="fa fa-check"></i>Dedication</a></li>
<li class="chapter" data-level="1" data-path="1-getting-started.html"><a href="1-getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting Started with Data in R</a><ul>
<li class="chapter" data-level="1.1" data-path="1-getting-started.html"><a href="1-getting-started.html#r-rstudio"><i class="fa fa-check"></i><b>1.1</b> What are R and RStudio?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="1-getting-started.html"><a href="1-getting-started.html#installing"><i class="fa fa-check"></i><b>1.1.1</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="1.1.2" data-path="1-getting-started.html"><a href="1-getting-started.html#using-r-via-rstudio"><i class="fa fa-check"></i><b>1.1.2</b> Using R via RStudio</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="1-getting-started.html"><a href="1-getting-started.html#code"><i class="fa fa-check"></i><b>1.2</b> How do I code in R?</a><ul>
<li class="chapter" data-level="1.2.1" data-path="1-getting-started.html"><a href="1-getting-started.html#programming-concepts"><i class="fa fa-check"></i><b>1.2.1</b> Basic programming concepts and terminology</a></li>
<li class="chapter" data-level="1.2.2" data-path="1-getting-started.html"><a href="1-getting-started.html#messages"><i class="fa fa-check"></i><b>1.2.2</b> Errors, warnings, and messages</a></li>
<li class="chapter" data-level="1.2.3" data-path="1-getting-started.html"><a href="1-getting-started.html#tips-code"><i class="fa fa-check"></i><b>1.2.3</b> Tips on learning to code</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="1-getting-started.html"><a href="1-getting-started.html#packages"><i class="fa fa-check"></i><b>1.3</b> What are R packages?</a><ul>
<li class="chapter" data-level="1.3.1" data-path="1-getting-started.html"><a href="1-getting-started.html#package-installation"><i class="fa fa-check"></i><b>1.3.1</b> Package installation</a></li>
<li class="chapter" data-level="1.3.2" data-path="1-getting-started.html"><a href="1-getting-started.html#package-loading"><i class="fa fa-check"></i><b>1.3.2</b> Package loading</a></li>
<li class="chapter" data-level="1.3.3" data-path="1-getting-started.html"><a href="1-getting-started.html#package-use"><i class="fa fa-check"></i><b>1.3.3</b> Package use</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="1-getting-started.html"><a href="1-getting-started.html#nycflights13"><i class="fa fa-check"></i><b>1.4</b> Explore your first datasets</a><ul>
<li class="chapter" data-level="1.4.1" data-path="1-getting-started.html"><a href="1-getting-started.html#nycflights13-package"><i class="fa fa-check"></i><b>1.4.1</b> <code>nycflights13</code> package</a></li>
<li class="chapter" data-level="1.4.2" data-path="1-getting-started.html"><a href="1-getting-started.html#flights-data-frame"><i class="fa fa-check"></i><b>1.4.2</b> <code>flights</code> data frame</a></li>
<li class="chapter" data-level="1.4.3" data-path="1-getting-started.html"><a href="1-getting-started.html#exploredataframes"><i class="fa fa-check"></i><b>1.4.3</b> Exploring data frames</a></li>
<li class="chapter" data-level="1.4.4" data-path="1-getting-started.html"><a href="1-getting-started.html#identification-vs-measurement-variables"><i class="fa fa-check"></i><b>1.4.4</b> Identification and measurement variables</a></li>
<li class="chapter" data-level="1.4.5" data-path="1-getting-started.html"><a href="1-getting-started.html#help-files"><i class="fa fa-check"></i><b>1.4.5</b> Help files</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="1-getting-started.html"><a href="1-getting-started.html#conclusion"><i class="fa fa-check"></i><b>1.5</b> Conclusion</a><ul>
<li class="chapter" data-level="1.5.1" data-path="1-getting-started.html"><a href="1-getting-started.html#additional-resources"><i class="fa fa-check"></i><b>1.5.1</b> Additional resources</a></li>
<li class="chapter" data-level="1.5.2" data-path="1-getting-started.html"><a href="1-getting-started.html#whats-to-come"><i class="fa fa-check"></i><b>1.5.2</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-viz.html"><a href="2-viz.html"><i class="fa fa-check"></i><b>2</b> Data Visualization</a><ul>
<li class="chapter" data-level="" data-path="2-viz.html"><a href="2-viz.html#needed-packages"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="2.1" data-path="2-viz.html"><a href="2-viz.html#grammarofgraphics"><i class="fa fa-check"></i><b>2.1</b> The grammar of graphics</a><ul>
<li class="chapter" data-level="2.1.1" data-path="2-viz.html"><a href="2-viz.html#components-of-the-grammar"><i class="fa fa-check"></i><b>2.1.1</b> Components of the grammar</a></li>
<li class="chapter" data-level="2.1.2" data-path="2-viz.html"><a href="2-viz.html#gapminder"><i class="fa fa-check"></i><b>2.1.2</b> Gapminder data</a></li>
<li class="chapter" data-level="2.1.3" data-path="2-viz.html"><a href="2-viz.html#other-components"><i class="fa fa-check"></i><b>2.1.3</b> Other components</a></li>
<li class="chapter" data-level="2.1.4" data-path="2-viz.html"><a href="2-viz.html#ggplot2-package"><i class="fa fa-check"></i><b>2.1.4</b> ggplot2 package</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="2-viz.html"><a href="2-viz.html#FiveNG"><i class="fa fa-check"></i><b>2.2</b> Five named graphs - the 5NG</a></li>
<li class="chapter" data-level="2.3" data-path="2-viz.html"><a href="2-viz.html#scatterplots"><i class="fa fa-check"></i><b>2.3</b> 5NG#1: Scatterplots</a><ul>
<li class="chapter" data-level="2.3.1" data-path="2-viz.html"><a href="2-viz.html#geompoint"><i class="fa fa-check"></i><b>2.3.1</b> Scatterplots via <code>geom_point</code></a></li>
<li class="chapter" data-level="2.3.2" data-path="2-viz.html"><a href="2-viz.html#overplotting"><i class="fa fa-check"></i><b>2.3.2</b> Overplotting</a></li>
<li class="chapter" data-level="2.3.3" data-path="2-viz.html"><a href="2-viz.html#summary"><i class="fa fa-check"></i><b>2.3.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="2-viz.html"><a href="2-viz.html#linegraphs"><i class="fa fa-check"></i><b>2.4</b> 5NG#2: Linegraphs</a><ul>
<li class="chapter" data-level="2.4.1" data-path="2-viz.html"><a href="2-viz.html#geomline"><i class="fa fa-check"></i><b>2.4.1</b> Linegraphs via <code>geom_line</code></a></li>
<li class="chapter" data-level="2.4.2" data-path="2-viz.html"><a href="2-viz.html#summary-1"><i class="fa fa-check"></i><b>2.4.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="2-viz.html"><a href="2-viz.html#histograms"><i class="fa fa-check"></i><b>2.5</b> 5NG#3: Histograms</a><ul>
<li class="chapter" data-level="2.5.1" data-path="2-viz.html"><a href="2-viz.html#geomhistogram"><i class="fa fa-check"></i><b>2.5.1</b> Histograms via <code>geom_histogram</code></a></li>
<li class="chapter" data-level="2.5.2" data-path="2-viz.html"><a href="2-viz.html#adjustbins"><i class="fa fa-check"></i><b>2.5.2</b> Adjusting the bins</a></li>
<li class="chapter" data-level="2.5.3" data-path="2-viz.html"><a href="2-viz.html#summary-2"><i class="fa fa-check"></i><b>2.5.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="2-viz.html"><a href="2-viz.html#facets"><i class="fa fa-check"></i><b>2.6</b> Facets</a></li>
<li class="chapter" data-level="2.7" data-path="2-viz.html"><a href="2-viz.html#boxplots"><i class="fa fa-check"></i><b>2.7</b> 5NG#4: Boxplots</a><ul>
<li class="chapter" data-level="2.7.1" data-path="2-viz.html"><a href="2-viz.html#geomboxplot"><i class="fa fa-check"></i><b>2.7.1</b> Boxplots via <code>geom_boxplot</code></a></li>
<li class="chapter" data-level="2.7.2" data-path="2-viz.html"><a href="2-viz.html#summary-3"><i class="fa fa-check"></i><b>2.7.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="2-viz.html"><a href="2-viz.html#geombar"><i class="fa fa-check"></i><b>2.8</b> 5NG#5: Barplots</a><ul>
<li class="chapter" data-level="2.8.1" data-path="2-viz.html"><a href="2-viz.html#barplots-via-geom_bar-or-geom_col"><i class="fa fa-check"></i><b>2.8.1</b> Barplots via <code>geom_bar</code> or <code>geom_col</code></a></li>
<li class="chapter" data-level="2.8.2" data-path="2-viz.html"><a href="2-viz.html#must-avoid-pie-charts"><i class="fa fa-check"></i><b>2.8.2</b> Must avoid pie charts!</a></li>
<li class="chapter" data-level="2.8.3" data-path="2-viz.html"><a href="2-viz.html#two-categ-barplot"><i class="fa fa-check"></i><b>2.8.3</b> Two categorical variables</a></li>
<li class="chapter" data-level="2.8.4" data-path="2-viz.html"><a href="2-viz.html#summary-4"><i class="fa fa-check"></i><b>2.8.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="2-viz.html"><a href="2-viz.html#conclusion-1"><i class="fa fa-check"></i><b>2.9</b> Conclusion</a><ul>
<li class="chapter" data-level="2.9.1" data-path="2-viz.html"><a href="2-viz.html#summary-table"><i class="fa fa-check"></i><b>2.9.1</b> Summary table</a></li>
<li class="chapter" data-level="2.9.2" data-path="2-viz.html"><a href="2-viz.html#function-argument-specification"><i class="fa fa-check"></i><b>2.9.2</b> Function argument specification</a></li>
<li class="chapter" data-level="2.9.3" data-path="2-viz.html"><a href="2-viz.html#additional-resources-1"><i class="fa fa-check"></i><b>2.9.3</b> Additional resources</a></li>
<li class="chapter" data-level="2.9.4" data-path="2-viz.html"><a href="2-viz.html#whats-to-come-3"><i class="fa fa-check"></i><b>2.9.4</b> What’s to come</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html"><i class="fa fa-check"></i><b>3</b> Productivity Tools</a><ul>
<li class="chapter" data-level="3.1" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#accessing-the-terminal-and-installing-git"><i class="fa fa-check"></i><b>3.1</b> Accessing the terminal and installing Git</a></li>
<li class="chapter" data-level="3.2" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#terminal-on-mac"><i class="fa fa-check"></i><b>3.2</b> Accessing the terminal on a Mac</a></li>
<li class="chapter" data-level="3.3" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#installing-git-on-the-mac"><i class="fa fa-check"></i><b>3.3</b> Installing Git on the Mac</a></li>
<li class="chapter" data-level="3.4" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#installing-git-and-git-bash-on-windows"><i class="fa fa-check"></i><b>3.4</b> Installing Git and Git Bash on Windows</a></li>
<li class="chapter" data-level="3.5" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#terminal-on-windows"><i class="fa fa-check"></i><b>3.5</b> Accessing the terminal on Windows</a></li>
<li class="chapter" data-level="3.6" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#unix"><i class="fa fa-check"></i><b>3.6</b> Organizing with Unix</a></li>
<li class="chapter" data-level="3.7" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#naming-convention"><i class="fa fa-check"></i><b>3.7</b> Naming convention</a></li>
<li class="chapter" data-level="3.8" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#the-terminal"><i class="fa fa-check"></i><b>3.8</b> The terminal</a></li>
<li class="chapter" data-level="3.9" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#filesystem"><i class="fa fa-check"></i><b>3.9</b> The filesystem</a><ul>
<li class="chapter" data-level="3.9.1" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#directories-and-subdirectories"><i class="fa fa-check"></i><b>3.9.1</b> Directories and subdirectories</a></li>
<li class="chapter" data-level="3.9.2" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#the-home-directory"><i class="fa fa-check"></i><b>3.9.2</b> The home directory</a></li>
<li class="chapter" data-level="3.9.3" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#working-directory"><i class="fa fa-check"></i><b>3.9.3</b> Working directory</a></li>
<li class="chapter" data-level="3.9.4" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#paths"><i class="fa fa-check"></i><b>3.9.4</b> Paths</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#unix-commands"><i class="fa fa-check"></i><b>3.10</b> Unix commands</a><ul>
<li class="chapter" data-level="3.10.1" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#ls-listing-directory-content"><i class="fa fa-check"></i><b>3.10.1</b> <code>ls</code>: Listing directory content</a></li>
<li class="chapter" data-level="3.10.2" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#mkdir-and-rmdir-make-and-remove-a-directory"><i class="fa fa-check"></i><b>3.10.2</b> <code>mkdir</code> and <code>rmdir</code>: make and remove a directory</a></li>
<li class="chapter" data-level="3.10.3" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#cd-navigating-the-filesystem-by-changing-directories"><i class="fa fa-check"></i><b>3.10.3</b> <code>cd</code>: navigating the filesystem by changing directories</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#some-examples"><i class="fa fa-check"></i><b>3.11</b> Some examples</a></li>
<li class="chapter" data-level="3.12" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#more-unix-commands"><i class="fa fa-check"></i><b>3.12</b> More Unix commands</a><ul>
<li class="chapter" data-level="3.12.1" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#mv-moving-files"><i class="fa fa-check"></i><b>3.12.1</b> <code>mv</code>: moving files</a></li>
<li class="chapter" data-level="3.12.2" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#cp-copying-files"><i class="fa fa-check"></i><b>3.12.2</b> <code>cp</code>: copying files</a></li>
<li class="chapter" data-level="3.12.3" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#rm-removing-files"><i class="fa fa-check"></i><b>3.12.3</b> <code>rm</code>: removing files</a></li>
<li class="chapter" data-level="3.12.4" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#less-looking-at-a-file"><i class="fa fa-check"></i><b>3.12.4</b> <code>less</code>: looking at a file</a></li>
</ul></li>
<li class="chapter" data-level="3.13" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#prep-project"><i class="fa fa-check"></i><b>3.13</b> Preparing for a data science project</a></li>
<li class="chapter" data-level="3.14" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#advanced-unix"><i class="fa fa-check"></i><b>3.14</b> Advanced Unix</a><ul>
<li class="chapter" data-level="3.14.1" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#arguments"><i class="fa fa-check"></i><b>3.14.1</b> Arguments</a></li>
<li class="chapter" data-level="3.14.2" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#getting-help"><i class="fa fa-check"></i><b>3.14.2</b> Getting help</a></li>
<li class="chapter" data-level="3.14.3" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#pipes"><i class="fa fa-check"></i><b>3.14.3</b> Pipes</a></li>
<li class="chapter" data-level="3.14.4" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#wild-cards"><i class="fa fa-check"></i><b>3.14.4</b> Wild cards</a></li>
<li class="chapter" data-level="3.14.5" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#environment-variables"><i class="fa fa-check"></i><b>3.14.5</b> Environment variables</a></li>
<li class="chapter" data-level="3.14.6" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#shells"><i class="fa fa-check"></i><b>3.14.6</b> Shells</a></li>
<li class="chapter" data-level="3.14.7" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#executables"><i class="fa fa-check"></i><b>3.14.7</b> Executables</a></li>
<li class="chapter" data-level="3.14.8" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#permissions-and-file-types"><i class="fa fa-check"></i><b>3.14.8</b> Permissions and file types</a></li>
<li class="chapter" data-level="3.14.9" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#commands-you-should-learn"><i class="fa fa-check"></i><b>3.14.9</b> Commands you should learn</a></li>
<li class="chapter" data-level="3.14.10" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#file-manipulation-in-r"><i class="fa fa-check"></i><b>3.14.10</b> File manipulation in R</a></li>
</ul></li>
<li class="chapter" data-level="3.15" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#git"><i class="fa fa-check"></i><b>3.15</b> Git and GitHub</a></li>
<li class="chapter" data-level="3.16" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#why-use-git-and-github"><i class="fa fa-check"></i><b>3.16</b> Why use Git and GitHub?</a></li>
<li class="chapter" data-level="3.17" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#github-accounts"><i class="fa fa-check"></i><b>3.17</b> GitHub accounts</a></li>
<li class="chapter" data-level="3.18" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#github-repos"><i class="fa fa-check"></i><b>3.18</b> GitHub repositories</a></li>
<li class="chapter" data-level="3.19" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#git-overview"><i class="fa fa-check"></i><b>3.19</b> Overview of Git</a><ul>
<li class="chapter" data-level="3.19.1" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#clone"><i class="fa fa-check"></i><b>3.19.1</b> Clone</a></li>
</ul></li>
<li class="chapter" data-level="3.20" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#init"><i class="fa fa-check"></i><b>3.20</b> Initializing a Git directory</a></li>
<li class="chapter" data-level="3.21" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#rstudio-git"><i class="fa fa-check"></i><b>3.21</b> Using Git and GitHub in RStudio</a></li>
<li class="chapter" data-level="3.22" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#reproducible-projects-with-rstudio-and-r-markdown"><i class="fa fa-check"></i><b>3.22</b> Reproducible projects with RStudio and R markdown</a></li>
<li class="chapter" data-level="3.23" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#rstudio-projects"><i class="fa fa-check"></i><b>3.23</b> RStudio projects</a></li>
<li class="chapter" data-level="3.24" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#r-markdown"><i class="fa fa-check"></i><b>3.24</b> R markdown</a><ul>
<li class="chapter" data-level="3.24.1" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#the-header"><i class="fa fa-check"></i><b>3.24.1</b> The header</a></li>
<li class="chapter" data-level="3.24.2" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#r-code-chunks"><i class="fa fa-check"></i><b>3.24.2</b> R code chunks</a></li>
<li class="chapter" data-level="3.24.3" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#global-options"><i class="fa fa-check"></i><b>3.24.3</b> Global options</a></li>
<li class="chapter" data-level="3.24.4" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#knitr"><i class="fa fa-check"></i><b>3.24.4</b> knitR</a></li>
<li class="chapter" data-level="3.24.5" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#more-on-r-markdown"><i class="fa fa-check"></i><b>3.24.5</b> More on R markdown</a></li>
</ul></li>
<li class="chapter" data-level="3.25" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#organizing"><i class="fa fa-check"></i><b>3.25</b> Organizing a data science project</a><ul>
<li class="chapter" data-level="3.25.1" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#create-directories-in-unix"><i class="fa fa-check"></i><b>3.25.1</b> Create directories in Unix</a></li>
<li class="chapter" data-level="3.25.2" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#create-an-rstudio-project"><i class="fa fa-check"></i><b>3.25.2</b> Create an RStudio project</a></li>
<li class="chapter" data-level="3.25.3" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#edit-some-r-scripts"><i class="fa fa-check"></i><b>3.25.3</b> Edit some R scripts</a></li>
<li class="chapter" data-level="3.25.4" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#create-some-more-directories-using-unix"><i class="fa fa-check"></i><b>3.25.4</b> Create some more directories using Unix</a></li>
<li class="chapter" data-level="3.25.5" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#add-a-readme-file"><i class="fa fa-check"></i><b>3.25.5</b> Add a README file</a></li>
<li class="chapter" data-level="3.25.6" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#initializing-a-git-directory"><i class="fa fa-check"></i><b>3.25.6</b> Initializing a Git directory</a></li>
<li class="chapter" data-level="3.25.7" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#add-commit-and-push-files-using-rstudio"><i class="fa fa-check"></i><b>3.25.7</b> Add, commit, and push files using RStudio</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-wrangling.html"><a href="4-wrangling.html"><i class="fa fa-check"></i><b>4</b> Data Wrangling</a><ul>
<li class="chapter" data-level="" data-path="4-wrangling.html"><a href="4-wrangling.html#needed-packages-1"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="4.1" data-path="4-wrangling.html"><a href="4-wrangling.html#piping"><i class="fa fa-check"></i><b>4.1</b> The pipe operator: <code>%&gt;%</code></a></li>
<li class="chapter" data-level="4.2" data-path="4-wrangling.html"><a href="4-wrangling.html#filter"><i class="fa fa-check"></i><b>4.2</b> <code>filter</code> rows</a></li>
<li class="chapter" data-level="4.3" data-path="4-wrangling.html"><a href="4-wrangling.html#summarize"><i class="fa fa-check"></i><b>4.3</b> <code>summarize</code> variables</a></li>
<li class="chapter" data-level="4.4" data-path="4-wrangling.html"><a href="4-wrangling.html#groupby"><i class="fa fa-check"></i><b>4.4</b> <code>group_by</code> rows</a><ul>
<li class="chapter" data-level="4.4.1" data-path="4-wrangling.html"><a href="4-wrangling.html#grouping-by-more-than-one-variable"><i class="fa fa-check"></i><b>4.4.1</b> Grouping by more than one variable</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="4-wrangling.html"><a href="4-wrangling.html#mutate"><i class="fa fa-check"></i><b>4.5</b> <code>mutate</code> existing variables</a></li>
<li class="chapter" data-level="4.6" data-path="4-wrangling.html"><a href="4-wrangling.html#arrange"><i class="fa fa-check"></i><b>4.6</b> <code>arrange</code> and sort rows</a></li>
<li class="chapter" data-level="4.7" data-path="4-wrangling.html"><a href="4-wrangling.html#factors-where-they-fit-in"><i class="fa fa-check"></i><b>4.7</b> Factors: where they fit in</a></li>
<li class="chapter" data-level="4.8" data-path="4-wrangling.html"><a href="4-wrangling.html#the-forcats-package"><i class="fa fa-check"></i><b>4.8</b> The forcats package</a></li>
<li class="chapter" data-level="4.9" data-path="4-wrangling.html"><a href="4-wrangling.html#load-forcats-and-gapminder"><i class="fa fa-check"></i><b>4.9</b> Load forcats and gapminder</a></li>
<li class="chapter" data-level="4.10" data-path="4-wrangling.html"><a href="4-wrangling.html#factor-inspection"><i class="fa fa-check"></i><b>4.10</b> Factor inspection</a></li>
<li class="chapter" data-level="4.11" data-path="4-wrangling.html"><a href="4-wrangling.html#dropping-unused-levels"><i class="fa fa-check"></i><b>4.11</b> Dropping unused levels</a></li>
<li class="chapter" data-level="4.12" data-path="4-wrangling.html"><a href="4-wrangling.html#reorder-factors"><i class="fa fa-check"></i><b>4.12</b> Change order of the levels, principled</a></li>
<li class="chapter" data-level="4.13" data-path="4-wrangling.html"><a href="4-wrangling.html#change-order-of-the-levels-because-i-said-so"><i class="fa fa-check"></i><b>4.13</b> Change order of the levels, “because I said so”</a></li>
<li class="chapter" data-level="4.14" data-path="4-wrangling.html"><a href="4-wrangling.html#recode-the-levels"><i class="fa fa-check"></i><b>4.14</b> Recode the levels</a></li>
<li class="chapter" data-level="4.15" data-path="4-wrangling.html"><a href="4-wrangling.html#grow-a-factor"><i class="fa fa-check"></i><b>4.15</b> Grow a factor</a></li>
<li class="chapter" data-level="4.16" data-path="4-wrangling.html"><a href="4-wrangling.html#character-vectors-where-they-fit-in"><i class="fa fa-check"></i><b>4.16</b> Character vectors: where they fit in</a></li>
<li class="chapter" data-level="4.17" data-path="4-wrangling.html"><a href="4-wrangling.html#resources"><i class="fa fa-check"></i><b>4.17</b> Resources</a><ul>
<li class="chapter" data-level="4.17.1" data-path="4-wrangling.html"><a href="4-wrangling.html#manipulating-character-vectors"><i class="fa fa-check"></i><b>4.17.1</b> Manipulating character vectors</a></li>
<li class="chapter" data-level="4.17.2" data-path="4-wrangling.html"><a href="4-wrangling.html#regular-expressions-resources"><i class="fa fa-check"></i><b>4.17.2</b> Regular expressions resources</a></li>
<li class="chapter" data-level="4.17.3" data-path="4-wrangling.html"><a href="4-wrangling.html#character-encoding-resources"><i class="fa fa-check"></i><b>4.17.3</b> Character encoding resources</a></li>
<li class="chapter" data-level="4.17.4" data-path="4-wrangling.html"><a href="4-wrangling.html#character-vectors-that-live-in-a-data-frame"><i class="fa fa-check"></i><b>4.17.4</b> Character vectors that live in a data frame</a></li>
</ul></li>
<li class="chapter" data-level="4.18" data-path="4-wrangling.html"><a href="4-wrangling.html#load-the-tidyverse-which-includes-stringr"><i class="fa fa-check"></i><b>4.18</b> Load the tidyverse, which includes stringr</a></li>
<li class="chapter" data-level="4.19" data-path="4-wrangling.html"><a href="4-wrangling.html#regex-free-string-manipulation-with-stringr-and-tidyr"><i class="fa fa-check"></i><b>4.19</b> Regex-free string manipulation with stringr and tidyr</a><ul>
<li class="chapter" data-level="4.19.1" data-path="4-wrangling.html"><a href="4-wrangling.html#detect-or-filter-on-a-target-string"><i class="fa fa-check"></i><b>4.19.1</b> Detect or filter on a target string</a></li>
<li class="chapter" data-level="4.19.2" data-path="4-wrangling.html"><a href="4-wrangling.html#string-splitting-by-delimiter"><i class="fa fa-check"></i><b>4.19.2</b> String splitting by delimiter</a></li>
<li class="chapter" data-level="4.19.3" data-path="4-wrangling.html"><a href="4-wrangling.html#substring-extraction-and-replacement-by-position"><i class="fa fa-check"></i><b>4.19.3</b> Substring extraction (and replacement) by position</a></li>
<li class="chapter" data-level="4.19.4" data-path="4-wrangling.html"><a href="4-wrangling.html#collapse-a-vector"><i class="fa fa-check"></i><b>4.19.4</b> Collapse a vector</a></li>
<li class="chapter" data-level="4.19.5" data-path="4-wrangling.html"><a href="4-wrangling.html#catenate-vectors"><i class="fa fa-check"></i><b>4.19.5</b> Create a character vector by catenating multiple vectors</a></li>
<li class="chapter" data-level="4.19.6" data-path="4-wrangling.html"><a href="4-wrangling.html#substring-replacement"><i class="fa fa-check"></i><b>4.19.6</b> Substring replacement</a></li>
</ul></li>
<li class="chapter" data-level="4.20" data-path="4-wrangling.html"><a href="4-wrangling.html#regular-expressions-with-stringr"><i class="fa fa-check"></i><b>4.20</b> Regular expressions with stringr</a><ul>
<li class="chapter" data-level="4.20.1" data-path="4-wrangling.html"><a href="4-wrangling.html#load-gapminder"><i class="fa fa-check"></i><b>4.20.1</b> Load gapminder</a></li>
<li class="chapter" data-level="4.20.2" data-path="4-wrangling.html"><a href="4-wrangling.html#characters-with-special-meaning"><i class="fa fa-check"></i><b>4.20.2</b> Characters with special meaning</a></li>
<li class="chapter" data-level="4.20.3" data-path="4-wrangling.html"><a href="4-wrangling.html#character-classes"><i class="fa fa-check"></i><b>4.20.3</b> Character classes</a></li>
<li class="chapter" data-level="4.20.4" data-path="4-wrangling.html"><a href="4-wrangling.html#quantifiers"><i class="fa fa-check"></i><b>4.20.4</b> Quantifiers</a></li>
<li class="chapter" data-level="4.20.5" data-path="4-wrangling.html"><a href="4-wrangling.html#escaping"><i class="fa fa-check"></i><b>4.20.5</b> Escaping</a></li>
<li class="chapter" data-level="4.20.6" data-path="4-wrangling.html"><a href="4-wrangling.html#groups-and-backreferences"><i class="fa fa-check"></i><b>4.20.6</b> Groups and backreferences</a></li>
</ul></li>
<li class="chapter" data-level="4.21" data-path="4-wrangling.html"><a href="4-wrangling.html#joins"><i class="fa fa-check"></i><b>4.21</b> <code>join</code> data frames</a><ul>
<li class="chapter" data-level="4.21.1" data-path="4-wrangling.html"><a href="4-wrangling.html#matching-key-variable-names"><i class="fa fa-check"></i><b>4.21.1</b> Matching “key” variable names</a></li>
<li class="chapter" data-level="4.21.2" data-path="4-wrangling.html"><a href="4-wrangling.html#diff-key"><i class="fa fa-check"></i><b>4.21.2</b> Different “key” variable names</a></li>
<li class="chapter" data-level="4.21.3" data-path="4-wrangling.html"><a href="4-wrangling.html#multiple-key-variables"><i class="fa fa-check"></i><b>4.21.3</b> Multiple “key” variables</a></li>
<li class="chapter" data-level="4.21.4" data-path="4-wrangling.html"><a href="4-wrangling.html#normal-forms"><i class="fa fa-check"></i><b>4.21.4</b> Normal forms</a></li>
</ul></li>
<li class="chapter" data-level="4.22" data-path="4-wrangling.html"><a href="4-wrangling.html#other-verbs"><i class="fa fa-check"></i><b>4.22</b> Other verbs</a><ul>
<li class="chapter" data-level="4.22.1" data-path="4-wrangling.html"><a href="4-wrangling.html#select"><i class="fa fa-check"></i><b>4.22.1</b> <code>select</code> variables</a></li>
<li class="chapter" data-level="4.22.2" data-path="4-wrangling.html"><a href="4-wrangling.html#rename"><i class="fa fa-check"></i><b>4.22.2</b> <code>rename</code> variables</a></li>
<li class="chapter" data-level="4.22.3" data-path="4-wrangling.html"><a href="4-wrangling.html#top_n-values-of-a-variable"><i class="fa fa-check"></i><b>4.22.3</b> <code>top_n</code> values of a variable</a></li>
</ul></li>
<li class="chapter" data-level="4.23" data-path="4-wrangling.html"><a href="4-wrangling.html#conclusion-2"><i class="fa fa-check"></i><b>4.23</b> Conclusion</a><ul>
<li class="chapter" data-level="4.23.1" data-path="4-wrangling.html"><a href="4-wrangling.html#summary-table-1"><i class="fa fa-check"></i><b>4.23.1</b> Summary table</a></li>
<li class="chapter" data-level="4.23.2" data-path="4-wrangling.html"><a href="4-wrangling.html#additional-resources-2"><i class="fa fa-check"></i><b>4.23.2</b> Additional resources</a></li>
<li class="chapter" data-level="4.23.3" data-path="4-wrangling.html"><a href="4-wrangling.html#whats-to-come-1"><i class="fa fa-check"></i><b>4.23.3</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-tidy.html"><a href="5-tidy.html"><i class="fa fa-check"></i><b>5</b> Data Importing and “Tidy” Data</a><ul>
<li class="chapter" data-level="" data-path="5-tidy.html"><a href="5-tidy.html#needed-packages-2"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="5.1" data-path="5-tidy.html"><a href="5-tidy.html#csv"><i class="fa fa-check"></i><b>5.1</b> Importing data</a><ul>
<li class="chapter" data-level="5.1.1" data-path="5-tidy.html"><a href="5-tidy.html#using-the-console"><i class="fa fa-check"></i><b>5.1.1</b> Using the console</a></li>
<li class="chapter" data-level="5.1.2" data-path="5-tidy.html"><a href="5-tidy.html#using-rstudios-interface"><i class="fa fa-check"></i><b>5.1.2</b> Using RStudio’s interface</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="5-tidy.html"><a href="5-tidy.html#tidy-data-ex"><i class="fa fa-check"></i><b>5.2</b> “Tidy” data</a><ul>
<li class="chapter" data-level="5.2.1" data-path="5-tidy.html"><a href="5-tidy.html#tidy-definition"><i class="fa fa-check"></i><b>5.2.1</b> Definition of “tidy” data</a></li>
<li class="chapter" data-level="5.2.2" data-path="5-tidy.html"><a href="5-tidy.html#converting-to-tidy-data"><i class="fa fa-check"></i><b>5.2.2</b> Converting to “tidy” data</a></li>
<li class="chapter" data-level="5.2.3" data-path="5-tidy.html"><a href="5-tidy.html#nycflights13-package-1"><i class="fa fa-check"></i><b>5.2.3</b> <code>nycflights13</code> package</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="5-tidy.html"><a href="5-tidy.html#case-study-tidy"><i class="fa fa-check"></i><b>5.3</b> Case study: Democracy in Guatemala</a></li>
<li class="chapter" data-level="5.4" data-path="5-tidy.html"><a href="5-tidy.html#tidyverse-package"><i class="fa fa-check"></i><b>5.4</b> <code>tidyverse</code> package</a></li>
<li class="chapter" data-level="5.5" data-path="5-tidy.html"><a href="5-tidy.html#conclusion-3"><i class="fa fa-check"></i><b>5.5</b> Conclusion</a><ul>
<li class="chapter" data-level="5.5.1" data-path="5-tidy.html"><a href="5-tidy.html#additional-resources-3"><i class="fa fa-check"></i><b>5.5.1</b> Additional resources</a></li>
<li class="chapter" data-level="5.5.2" data-path="5-tidy.html"><a href="5-tidy.html#whats-to-come-2"><i class="fa fa-check"></i><b>5.5.2</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-functions.html"><a href="6-functions.html"><i class="fa fa-check"></i><b>6</b> Functions</a><ul>
<li class="chapter" data-level="6.1" data-path="6-functions.html"><a href="6-functions.html#load-the-gapminder-data"><i class="fa fa-check"></i><b>6.1</b> Load the Gapminder data</a></li>
<li class="chapter" data-level="6.2" data-path="6-functions.html"><a href="6-functions.html#max---min"><i class="fa fa-check"></i><b>6.2</b> Max - min</a></li>
<li class="chapter" data-level="6.3" data-path="6-functions.html"><a href="6-functions.html#get-something-that-works"><i class="fa fa-check"></i><b>6.3</b> Get something that works</a><ul>
<li class="chapter" data-level="6.3.1" data-path="6-functions.html"><a href="6-functions.html#skateboard-perfectly-formed-rear-view-mirror"><i class="fa fa-check"></i><b>6.3.1</b> Skateboard &gt;&gt; perfectly formed rear-view mirror</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="6-functions.html"><a href="6-functions.html#turn-the-working-interactive-code-into-a-function"><i class="fa fa-check"></i><b>6.4</b> Turn the working interactive code into a function</a></li>
<li class="chapter" data-level="6.5" data-path="6-functions.html"><a href="6-functions.html#test-your-function"><i class="fa fa-check"></i><b>6.5</b> Test your function</a><ul>
<li class="chapter" data-level="6.5.1" data-path="6-functions.html"><a href="6-functions.html#test-on-new-inputs"><i class="fa fa-check"></i><b>6.5.1</b> Test on new inputs</a></li>
<li class="chapter" data-level="6.5.2" data-path="6-functions.html"><a href="6-functions.html#test-on-real-data-but-different-real-data"><i class="fa fa-check"></i><b>6.5.2</b> Test on real data but <em>different</em> real data</a></li>
<li class="chapter" data-level="6.5.3" data-path="6-functions.html"><a href="6-functions.html#test-on-weird-stuff"><i class="fa fa-check"></i><b>6.5.3</b> Test on weird stuff</a></li>
<li class="chapter" data-level="6.5.4" data-path="6-functions.html"><a href="6-functions.html#i-will-scare-you-now"><i class="fa fa-check"></i><b>6.5.4</b> I will scare you now</a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="6-functions.html"><a href="6-functions.html#check-the-validity-of-arguments"><i class="fa fa-check"></i><b>6.6</b> Check the validity of arguments</a><ul>
<li class="chapter" data-level="6.6.1" data-path="6-functions.html"><a href="6-functions.html#stop-if-not"><i class="fa fa-check"></i><b>6.6.1</b> stop if not</a></li>
<li class="chapter" data-level="6.6.2" data-path="6-functions.html"><a href="6-functions.html#if-then-stop"><i class="fa fa-check"></i><b>6.6.2</b> if then stop</a></li>
<li class="chapter" data-level="6.6.3" data-path="6-functions.html"><a href="6-functions.html#sidebar-non-programming-uses-for-assertions"><i class="fa fa-check"></i><b>6.6.3</b> Sidebar: non-programming uses for assertions</a></li>
</ul></li>
<li class="chapter" data-level="6.7" data-path="6-functions.html"><a href="6-functions.html#wrap-up-and-whats-next"><i class="fa fa-check"></i><b>6.7</b> Wrap-up and what’s next?</a></li>
<li class="chapter" data-level="6.8" data-path="6-functions.html"><a href="6-functions.html#resources-1"><i class="fa fa-check"></i><b>6.8</b> Resources</a></li>
<li class="chapter" data-level="6.9" data-path="6-functions.html"><a href="6-functions.html#where-were-we-where-are-we-going"><i class="fa fa-check"></i><b>6.9</b> Where were we? Where are we going?</a></li>
<li class="chapter" data-level="6.10" data-path="6-functions.html"><a href="6-functions.html#load-the-gapminder-data-1"><i class="fa fa-check"></i><b>6.10</b> Load the Gapminder data</a></li>
<li class="chapter" data-level="6.11" data-path="6-functions.html"><a href="6-functions.html#restore-our-max-minus-min-function"><i class="fa fa-check"></i><b>6.11</b> Restore our max minus min function</a></li>
<li class="chapter" data-level="6.12" data-path="6-functions.html"><a href="6-functions.html#generalize-our-function-to-other-quantiles"><i class="fa fa-check"></i><b>6.12</b> Generalize our function to other quantiles</a></li>
<li class="chapter" data-level="6.13" data-path="6-functions.html"><a href="6-functions.html#get-something-that-works-again"><i class="fa fa-check"></i><b>6.13</b> Get something that works, again</a></li>
<li class="chapter" data-level="6.14" data-path="6-functions.html"><a href="6-functions.html#turn-the-working-interactive-code-into-a-function-again"><i class="fa fa-check"></i><b>6.14</b> Turn the working interactive code into a function, again</a></li>
<li class="chapter" data-level="6.15" data-path="6-functions.html"><a href="6-functions.html#argument-names-freedom-and-conventions"><i class="fa fa-check"></i><b>6.15</b> Argument names: freedom and conventions</a></li>
<li class="chapter" data-level="6.16" data-path="6-functions.html"><a href="6-functions.html#what-a-function-returns"><i class="fa fa-check"></i><b>6.16</b> What a function returns</a></li>
<li class="chapter" data-level="6.17" data-path="6-functions.html"><a href="6-functions.html#default-values-freedom-to-not-specify-the-arguments"><i class="fa fa-check"></i><b>6.17</b> Default values: freedom to NOT specify the arguments</a></li>
<li class="chapter" data-level="6.18" data-path="6-functions.html"><a href="6-functions.html#check-the-validity-of-arguments-again"><i class="fa fa-check"></i><b>6.18</b> Check the validity of arguments, again</a></li>
<li class="chapter" data-level="6.19" data-path="6-functions.html"><a href="6-functions.html#wrap-up-and-whats-next-1"><i class="fa fa-check"></i><b>6.19</b> Wrap-up and what’s next?</a></li>
<li class="chapter" data-level="6.20" data-path="6-functions.html"><a href="6-functions.html#resources-2"><i class="fa fa-check"></i><b>6.20</b> Resources</a></li>
<li class="chapter" data-level="6.21" data-path="6-functions.html"><a href="6-functions.html#where-were-we-where-are-we-going-1"><i class="fa fa-check"></i><b>6.21</b> Where were we? Where are we going?</a></li>
<li class="chapter" data-level="6.22" data-path="6-functions.html"><a href="6-functions.html#load-the-gapminder-data-2"><i class="fa fa-check"></i><b>6.22</b> Load the Gapminder data</a></li>
<li class="chapter" data-level="6.23" data-path="6-functions.html"><a href="6-functions.html#restore-our-max-minus-min-function-1"><i class="fa fa-check"></i><b>6.23</b> Restore our max minus min function</a></li>
<li class="chapter" data-level="6.24" data-path="6-functions.html"><a href="6-functions.html#be-proactive-about-nas"><i class="fa fa-check"></i><b>6.24</b> Be proactive about <code>NA</code>s</a></li>
<li class="chapter" data-level="6.25" data-path="6-functions.html"><a href="6-functions.html#the-useful-but-mysterious-...-argument"><i class="fa fa-check"></i><b>6.25</b> The useful but mysterious <code>...</code> argument</a></li>
<li class="chapter" data-level="6.26" data-path="6-functions.html"><a href="6-functions.html#use-testthat-for-formal-unit-tests"><i class="fa fa-check"></i><b>6.26</b> Use testthat for formal unit tests</a></li>
<li class="chapter" data-level="6.27" data-path="6-functions.html"><a href="6-functions.html#resources-3"><i class="fa fa-check"></i><b>6.27</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-probability.html"><a href="7-probability.html"><i class="fa fa-check"></i><b>7</b> Probability</a><ul>
<li class="chapter" data-level="7.1" data-path="7-probability.html"><a href="7-probability.html#basicsOfProbability"><i class="fa fa-check"></i><b>7.1</b> Defining probability</a><ul>
<li class="chapter" data-level="7.1.1" data-path="7-probability.html"><a href="7-probability.html#intro-questions"><i class="fa fa-check"></i><b>7.1.1</b> Intro Questions</a></li>
<li class="chapter" data-level="7.1.2" data-path="7-probability.html"><a href="7-probability.html#probability-1"><i class="fa fa-check"></i><b>7.1.2</b> Probability</a></li>
<li class="chapter" data-level="7.1.3" data-path="7-probability.html"><a href="7-probability.html#disjoint-or-mutually-exclusive-outcomes"><i class="fa fa-check"></i><b>7.1.3</b> Disjoint or mutually exclusive outcomes</a></li>
<li class="chapter" data-level="7.1.4" data-path="7-probability.html"><a href="7-probability.html#probabilities-when-events-are-not-disjoint"><i class="fa fa-check"></i><b>7.1.4</b> Probabilities when events are not disjoint</a></li>
<li class="chapter" data-level="7.1.5" data-path="7-probability.html"><a href="7-probability.html#probability-distributions"><i class="fa fa-check"></i><b>7.1.5</b> Probability distributions</a></li>
<li class="chapter" data-level="7.1.6" data-path="7-probability.html"><a href="7-probability.html#complement-of-an-event"><i class="fa fa-check"></i><b>7.1.6</b> Complement of an event</a></li>
<li class="chapter" data-level="7.1.7" data-path="7-probability.html"><a href="7-probability.html#probabilityIndependence"><i class="fa fa-check"></i><b>7.1.7</b> Independence</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="7-probability.html"><a href="7-probability.html#conditionalProbabilitySection"><i class="fa fa-check"></i><b>7.2</b> Conditional probability</a><ul>
<li class="chapter" data-level="7.2.1" data-path="7-probability.html"><a href="7-probability.html#marginalAndJointProbabilities"><i class="fa fa-check"></i><b>7.2.1</b> Marginal and joint probabilities</a></li>
<li class="chapter" data-level="7.2.2" data-path="7-probability.html"><a href="7-probability.html#defining-conditional-probability"><i class="fa fa-check"></i><b>7.2.2</b> Defining conditional probability</a></li>
<li class="chapter" data-level="7.2.3" data-path="7-probability.html"><a href="7-probability.html#smallpox-in-boston-1721"><i class="fa fa-check"></i><b>7.2.3</b> Smallpox in Boston, 1721</a></li>
<li class="chapter" data-level="7.2.4" data-path="7-probability.html"><a href="7-probability.html#general-multiplication-rule"><i class="fa fa-check"></i><b>7.2.4</b> General multiplication rule</a></li>
<li class="chapter" data-level="7.2.5" data-path="7-probability.html"><a href="7-probability.html#independence-considerations-in-conditional-probability"><i class="fa fa-check"></i><b>7.2.5</b> Independence considerations in conditional probability</a></li>
<li class="chapter" data-level="7.2.6" data-path="7-probability.html"><a href="7-probability.html#tree-diagrams"><i class="fa fa-check"></i><b>7.2.6</b> Tree diagrams</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="7-probability.html"><a href="7-probability.html#randomVariablesSection"><i class="fa fa-check"></i><b>7.3</b> Random variables</a><ul>
<li class="chapter" data-level="7.3.1" data-path="7-probability.html"><a href="7-probability.html#expectation"><i class="fa fa-check"></i><b>7.3.1</b> Expectation</a></li>
<li class="chapter" data-level="7.3.2" data-path="7-probability.html"><a href="7-probability.html#variability-in-random-variables"><i class="fa fa-check"></i><b>7.3.2</b> Variability in random variables</a></li>
<li class="chapter" data-level="7.3.3" data-path="7-probability.html"><a href="7-probability.html#linear-combinations-of-random-variables"><i class="fa fa-check"></i><b>7.3.3</b> Linear combinations of random variables</a></li>
<li class="chapter" data-level="7.3.4" data-path="7-probability.html"><a href="7-probability.html#variability-in-linear-combinations-of-random-variables"><i class="fa fa-check"></i><b>7.3.4</b> Variability in linear combinations of random variables</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="7-probability.html"><a href="7-probability.html#appendixA"><i class="fa fa-check"></i><b>7.4</b> Statistical Background</a></li>
<li class="chapter" data-level="7.5" data-path="7-probability.html"><a href="7-probability.html#appendix-stat-terms"><i class="fa fa-check"></i><b>7.5</b> Basic statistical terms</a><ul>
<li class="chapter" data-level="7.5.1" data-path="7-probability.html"><a href="7-probability.html#mean"><i class="fa fa-check"></i><b>7.5.1</b> Mean</a></li>
<li class="chapter" data-level="7.5.2" data-path="7-probability.html"><a href="7-probability.html#median"><i class="fa fa-check"></i><b>7.5.2</b> Median</a></li>
<li class="chapter" data-level="7.5.3" data-path="7-probability.html"><a href="7-probability.html#standard-deviation"><i class="fa fa-check"></i><b>7.5.3</b> Standard deviation</a></li>
<li class="chapter" data-level="7.5.4" data-path="7-probability.html"><a href="7-probability.html#five-number-summary"><i class="fa fa-check"></i><b>7.5.4</b> Five-number summary</a></li>
<li class="chapter" data-level="7.5.5" data-path="7-probability.html"><a href="7-probability.html#distribution"><i class="fa fa-check"></i><b>7.5.5</b> Distribution</a></li>
<li class="chapter" data-level="7.5.6" data-path="7-probability.html"><a href="7-probability.html#outliers"><i class="fa fa-check"></i><b>7.5.6</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="7-probability.html"><a href="7-probability.html#appendix-normal-curve"><i class="fa fa-check"></i><b>7.6</b> Normal distribution</a></li>
<li class="chapter" data-level="7.7" data-path="7-probability.html"><a href="7-probability.html#appendix-log10-transformations"><i class="fa fa-check"></i><b>7.7</b> log10 transformations</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="8-bayess-theorem.html"><a href="8-bayess-theorem.html"><i class="fa fa-check"></i><b>8</b> Bayes’s Theorem</a><ul>
<li class="chapter" data-level="8.1" data-path="8-bayess-theorem.html"><a href="8-bayess-theorem.html#conditional-probability"><i class="fa fa-check"></i><b>8.1</b> Conditional probability</a></li>
<li class="chapter" data-level="8.2" data-path="8-bayess-theorem.html"><a href="8-bayess-theorem.html#conjoint-probability"><i class="fa fa-check"></i><b>8.2</b> Conjoint probability</a></li>
<li class="chapter" data-level="8.3" data-path="8-bayess-theorem.html"><a href="8-bayess-theorem.html#the-cookie-problem"><i class="fa fa-check"></i><b>8.3</b> The cookie problem</a></li>
<li class="chapter" data-level="8.4" data-path="8-bayess-theorem.html"><a href="8-bayess-theorem.html#bayess-theorem-1"><i class="fa fa-check"></i><b>8.4</b> Bayes’s Theorem</a></li>
<li class="chapter" data-level="8.5" data-path="8-bayess-theorem.html"><a href="8-bayess-theorem.html#the-diachronic-interpretation"><i class="fa fa-check"></i><b>8.5</b> The diachronic interpretation</a></li>
<li class="chapter" data-level="8.6" data-path="8-bayess-theorem.html"><a href="8-bayess-theorem.html#the-mm-problem"><i class="fa fa-check"></i><b>8.6</b> The M&amp;M problem</a></li>
<li class="chapter" data-level="8.7" data-path="8-bayess-theorem.html"><a href="8-bayess-theorem.html#the-monty-hall-problem"><i class="fa fa-check"></i><b>8.7</b> The Monty Hall problem</a></li>
<li class="chapter" data-level="8.8" data-path="8-bayess-theorem.html"><a href="8-bayess-theorem.html#discussion"><i class="fa fa-check"></i><b>8.8</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="9-sampling.html"><a href="9-sampling.html"><i class="fa fa-check"></i><b>9</b> Sampling</a><ul>
<li class="chapter" data-level="" data-path="9-sampling.html"><a href="9-sampling.html#needed-packages-3"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="9.1" data-path="9-sampling.html"><a href="9-sampling.html#sampling-activity"><i class="fa fa-check"></i><b>9.1</b> Sampling bowl activity</a><ul>
<li class="chapter" data-level="9.1.1" data-path="9-sampling.html"><a href="9-sampling.html#what-proportion-of-this-bowls-balls-are-red"><i class="fa fa-check"></i><b>9.1.1</b> What proportion of this bowl’s balls are red?</a></li>
<li class="chapter" data-level="9.1.2" data-path="9-sampling.html"><a href="9-sampling.html#using-the-shovel-once"><i class="fa fa-check"></i><b>9.1.2</b> Using the shovel once</a></li>
<li class="chapter" data-level="9.1.3" data-path="9-sampling.html"><a href="9-sampling.html#student-shovels"><i class="fa fa-check"></i><b>9.1.3</b> Using the shovel 33 times</a></li>
<li class="chapter" data-level="9.1.4" data-path="9-sampling.html"><a href="9-sampling.html#what-did-we-just-do"><i class="fa fa-check"></i><b>9.1.4</b> What did we just do?</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="9-sampling.html"><a href="9-sampling.html#sampling-simulation"><i class="fa fa-check"></i><b>9.2</b> Virtual sampling</a><ul>
<li class="chapter" data-level="9.2.1" data-path="9-sampling.html"><a href="9-sampling.html#using-the-virtual-shovel-once"><i class="fa fa-check"></i><b>9.2.1</b> Using the virtual shovel once</a></li>
<li class="chapter" data-level="9.2.2" data-path="9-sampling.html"><a href="9-sampling.html#using-the-virtual-shovel-33-times"><i class="fa fa-check"></i><b>9.2.2</b> Using the virtual shovel 33 times</a></li>
<li class="chapter" data-level="9.2.3" data-path="9-sampling.html"><a href="9-sampling.html#shovel-1000-times"><i class="fa fa-check"></i><b>9.2.3</b> Using the virtual shovel 1000 times</a></li>
<li class="chapter" data-level="9.2.4" data-path="9-sampling.html"><a href="9-sampling.html#different-shovels"><i class="fa fa-check"></i><b>9.2.4</b> Using different shovels</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="9-sampling.html"><a href="9-sampling.html#sampling-framework"><i class="fa fa-check"></i><b>9.3</b> Sampling framework</a><ul>
<li class="chapter" data-level="9.3.1" data-path="9-sampling.html"><a href="9-sampling.html#terminology-and-notation"><i class="fa fa-check"></i><b>9.3.1</b> Terminology and notation</a></li>
<li class="chapter" data-level="9.3.2" data-path="9-sampling.html"><a href="9-sampling.html#sampling-definitions"><i class="fa fa-check"></i><b>9.3.2</b> Statistical definitions</a></li>
<li class="chapter" data-level="9.3.3" data-path="9-sampling.html"><a href="9-sampling.html#moral-of-the-story"><i class="fa fa-check"></i><b>9.3.3</b> The moral of the story</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="9-sampling.html"><a href="9-sampling.html#sampling-case-study"><i class="fa fa-check"></i><b>9.4</b> Case study: Polls</a></li>
<li class="chapter" data-level="9.5" data-path="9-sampling.html"><a href="9-sampling.html#sampling-conclusion"><i class="fa fa-check"></i><b>9.5</b> Conclusion</a><ul>
<li class="chapter" data-level="9.5.1" data-path="9-sampling.html"><a href="9-sampling.html#sampling-conclusion-table"><i class="fa fa-check"></i><b>9.5.1</b> Sampling scenarios</a></li>
<li class="chapter" data-level="9.5.2" data-path="9-sampling.html"><a href="9-sampling.html#sampling-conclusion-central-limit-theorem"><i class="fa fa-check"></i><b>9.5.2</b> Central Limit Theorem</a></li>
<li class="chapter" data-level="9.5.3" data-path="9-sampling.html"><a href="9-sampling.html#additional-resources-4"><i class="fa fa-check"></i><b>9.5.3</b> Additional resources</a></li>
<li class="chapter" data-level="9.5.4" data-path="9-sampling.html"><a href="9-sampling.html#whats-to-come-4"><i class="fa fa-check"></i><b>9.5.4</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html"><i class="fa fa-check"></i><b>10</b> Bootstrapping and Confidence Intervals</a><ul>
<li class="chapter" data-level="" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#needed-packages-4"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="10.1" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#resampling-tactile"><i class="fa fa-check"></i><b>10.1</b> Pennies activity</a><ul>
<li class="chapter" data-level="10.1.1" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#what-is-the-average-year-on-us-pennies-in-2019"><i class="fa fa-check"></i><b>10.1.1</b> What is the average year on US pennies in 2019?</a></li>
<li class="chapter" data-level="10.1.2" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#resampling-once"><i class="fa fa-check"></i><b>10.1.2</b> Resampling once</a></li>
<li class="chapter" data-level="10.1.3" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#student-resamples"><i class="fa fa-check"></i><b>10.1.3</b> Resampling 35 times</a></li>
<li class="chapter" data-level="10.1.4" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#what-did-we-just-do-1"><i class="fa fa-check"></i><b>10.1.4</b> What did we just do?</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#resampling-simulation"><i class="fa fa-check"></i><b>10.2</b> Computer simulation of resampling</a><ul>
<li class="chapter" data-level="10.2.1" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#virtually-resampling-once"><i class="fa fa-check"></i><b>10.2.1</b> Virtually resampling once</a></li>
<li class="chapter" data-level="10.2.2" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#bootstrap-35-replicates"><i class="fa fa-check"></i><b>10.2.2</b> Virtually resampling 35 times</a></li>
<li class="chapter" data-level="10.2.3" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#bootstrap-1000-replicates"><i class="fa fa-check"></i><b>10.2.3</b> Virtually resampling 1000 times</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#ci-build-up"><i class="fa fa-check"></i><b>10.3</b> Understanding confidence intervals</a><ul>
<li class="chapter" data-level="10.3.1" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#percentile-method"><i class="fa fa-check"></i><b>10.3.1</b> Percentile method</a></li>
<li class="chapter" data-level="10.3.2" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#se-method"><i class="fa fa-check"></i><b>10.3.2</b> Standard error method</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#bootstrap-process"><i class="fa fa-check"></i><b>10.4</b> Constructing confidence intervals</a><ul>
<li class="chapter" data-level="10.4.1" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#original-workflow"><i class="fa fa-check"></i><b>10.4.1</b> Original workflow</a></li>
<li class="chapter" data-level="10.4.2" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#infer-workflow"><i class="fa fa-check"></i><b>10.4.2</b> <code>infer</code> package workflow</a></li>
<li class="chapter" data-level="10.4.3" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#percentile-method-infer"><i class="fa fa-check"></i><b>10.4.3</b> Percentile method with <code>infer</code></a></li>
<li class="chapter" data-level="10.4.4" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#infer-se"><i class="fa fa-check"></i><b>10.4.4</b> Standard error method with <code>infer</code></a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#one-prop-ci"><i class="fa fa-check"></i><b>10.5</b> Interpreting confidence intervals</a><ul>
<li class="chapter" data-level="10.5.1" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#ilyas-yohan"><i class="fa fa-check"></i><b>10.5.1</b> Did the net capture the fish?</a></li>
<li class="chapter" data-level="10.5.2" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#shorthand"><i class="fa fa-check"></i><b>10.5.2</b> Precise and shorthand interpretation</a></li>
<li class="chapter" data-level="10.5.3" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#ci-width"><i class="fa fa-check"></i><b>10.5.3</b> Width of confidence intervals</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#case-study-two-prop-ci"><i class="fa fa-check"></i><b>10.6</b> Case study: Is yawning contagious?</a><ul>
<li class="chapter" data-level="10.6.1" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#mythbusters-study-data"><i class="fa fa-check"></i><b>10.6.1</b> <em>Mythbusters</em> study data</a></li>
<li class="chapter" data-level="10.6.2" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#sampling-scenario"><i class="fa fa-check"></i><b>10.6.2</b> Sampling scenario</a></li>
<li class="chapter" data-level="10.6.3" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#ci-build"><i class="fa fa-check"></i><b>10.6.3</b> Constructing the confidence interval</a></li>
<li class="chapter" data-level="10.6.4" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#interpreting-the-confidence-interval"><i class="fa fa-check"></i><b>10.6.4</b> Interpreting the confidence interval</a></li>
</ul></li>
<li class="chapter" data-level="10.7" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#ci-conclusion"><i class="fa fa-check"></i><b>10.7</b> Conclusion</a><ul>
<li class="chapter" data-level="10.7.1" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#bootstrap-vs-sampling"><i class="fa fa-check"></i><b>10.7.1</b> Comparing bootstrap and sampling distributions</a></li>
<li class="chapter" data-level="10.7.2" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#theory-ci"><i class="fa fa-check"></i><b>10.7.2</b> Theory-based confidence intervals</a></li>
<li class="chapter" data-level="10.7.3" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#additional-resources-5"><i class="fa fa-check"></i><b>10.7.3</b> Additional resources</a></li>
<li class="chapter" data-level="10.7.4" data-path="10-confidence-intervals.html"><a href="10-confidence-intervals.html#whats-to-come-5"><i class="fa fa-check"></i><b>10.7.4</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-regression.html"><a href="11-regression.html"><i class="fa fa-check"></i><b>11</b> Basic Regression</a><ul>
<li class="chapter" data-level="" data-path="11-regression.html"><a href="11-regression.html#needed-packages-5"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="11.1" data-path="11-regression.html"><a href="11-regression.html#model1"><i class="fa fa-check"></i><b>11.1</b> One numerical explanatory variable</a><ul>
<li class="chapter" data-level="11.1.1" data-path="11-regression.html"><a href="11-regression.html#model1EDA"><i class="fa fa-check"></i><b>11.1.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="11.1.2" data-path="11-regression.html"><a href="11-regression.html#model1table"><i class="fa fa-check"></i><b>11.1.2</b> Simple linear regression</a></li>
<li class="chapter" data-level="11.1.3" data-path="11-regression.html"><a href="11-regression.html#model1points"><i class="fa fa-check"></i><b>11.1.3</b> Observed/fitted values and residuals</a></li>
</ul></li>
<li class="chapter" data-level="11.2" data-path="11-regression.html"><a href="11-regression.html#model2"><i class="fa fa-check"></i><b>11.2</b> One categorical explanatory variable</a><ul>
<li class="chapter" data-level="11.2.1" data-path="11-regression.html"><a href="11-regression.html#model2EDA"><i class="fa fa-check"></i><b>11.2.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="11.2.2" data-path="11-regression.html"><a href="11-regression.html#model2table"><i class="fa fa-check"></i><b>11.2.2</b> Linear regression</a></li>
<li class="chapter" data-level="11.2.3" data-path="11-regression.html"><a href="11-regression.html#model2points"><i class="fa fa-check"></i><b>11.2.3</b> Observed/fitted values and residuals</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="11-regression.html"><a href="11-regression.html#related-topics"><i class="fa fa-check"></i><b>11.3</b> Related topics</a><ul>
<li class="chapter" data-level="11.3.1" data-path="11-regression.html"><a href="11-regression.html#correlation-is-not-causation"><i class="fa fa-check"></i><b>11.3.1</b> Correlation is not necessarily causation</a></li>
<li class="chapter" data-level="11.3.2" data-path="11-regression.html"><a href="11-regression.html#leastsquares"><i class="fa fa-check"></i><b>11.3.2</b> Best-fitting line</a></li>
<li class="chapter" data-level="11.3.3" data-path="11-regression.html"><a href="11-regression.html#underthehood"><i class="fa fa-check"></i><b>11.3.3</b> <code>get_regression_x()</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="11-regression.html"><a href="11-regression.html#conclusion-4"><i class="fa fa-check"></i><b>11.4</b> Conclusion</a><ul>
<li class="chapter" data-level="11.4.1" data-path="11-regression.html"><a href="11-regression.html#additional-resources-basic-regression"><i class="fa fa-check"></i><b>11.4.1</b> Additional resources</a></li>
<li class="chapter" data-level="11.4.2" data-path="11-regression.html"><a href="11-regression.html#whats-to-come-6"><i class="fa fa-check"></i><b>11.4.2</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html"><i class="fa fa-check"></i><b>12</b> Multiple Regression</a><ul>
<li class="chapter" data-level="" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#needed-packages-6"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="12.1" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#model4"><i class="fa fa-check"></i><b>12.1</b> One numerical and one categorical explanatory variable</a><ul>
<li class="chapter" data-level="12.1.1" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#model4EDA"><i class="fa fa-check"></i><b>12.1.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="12.1.2" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#model4interactiontable"><i class="fa fa-check"></i><b>12.1.2</b> Interaction model</a></li>
<li class="chapter" data-level="12.1.3" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#model4table"><i class="fa fa-check"></i><b>12.1.3</b> Parallel slopes model</a></li>
<li class="chapter" data-level="12.1.4" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#model4points"><i class="fa fa-check"></i><b>12.1.4</b> Observed/fitted values and residuals</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#model3"><i class="fa fa-check"></i><b>12.2</b> Two numerical explanatory variables</a><ul>
<li class="chapter" data-level="12.2.1" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#model3EDA"><i class="fa fa-check"></i><b>12.2.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="12.2.2" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#model3table"><i class="fa fa-check"></i><b>12.2.2</b> Regression plane</a></li>
<li class="chapter" data-level="12.2.3" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#model3points"><i class="fa fa-check"></i><b>12.2.3</b> Observed/fitted values and residuals</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#related-topics-1"><i class="fa fa-check"></i><b>12.3</b> Related topics</a><ul>
<li class="chapter" data-level="12.3.1" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#model-selection"><i class="fa fa-check"></i><b>12.3.1</b> Model selection</a></li>
<li class="chapter" data-level="12.3.2" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#correlationcoefficient2"><i class="fa fa-check"></i><b>12.3.2</b> Correlation coefficient</a></li>
<li class="chapter" data-level="12.3.3" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#simpsonsparadox"><i class="fa fa-check"></i><b>12.3.3</b> Simpson’s Paradox</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#seattle-house-prices"><i class="fa fa-check"></i><b>12.4</b> Case study: Seattle house prices</a><ul>
<li class="chapter" data-level="12.4.1" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#house-prices-EDA-I"><i class="fa fa-check"></i><b>12.4.1</b> Exploratory data analysis: Part I</a></li>
<li class="chapter" data-level="12.4.2" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#house-prices-EDA-II"><i class="fa fa-check"></i><b>12.4.2</b> Exploratory data analysis: Part II</a></li>
<li class="chapter" data-level="12.4.3" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#house-prices-regression"><i class="fa fa-check"></i><b>12.4.3</b> Regression modeling</a></li>
<li class="chapter" data-level="12.4.4" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#house-prices-making-predictions"><i class="fa fa-check"></i><b>12.4.4</b> Making predictions</a></li>
</ul></li>
<li class="chapter" data-level="12.5" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#data-journalism"><i class="fa fa-check"></i><b>12.5</b> Case study: Effective data storytelling</a><ul>
<li class="chapter" data-level="12.5.1" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#bechdel-test-for-hollywood-gender-representation"><i class="fa fa-check"></i><b>12.5.1</b> Bechdel test for Hollywood gender representation</a></li>
<li class="chapter" data-level="12.5.2" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#us-births-in-1999"><i class="fa fa-check"></i><b>12.5.2</b> US Births in 1999</a></li>
</ul></li>
<li class="chapter" data-level="12.6" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#conclusion-5"><i class="fa fa-check"></i><b>12.6</b> Conclusion</a><ul>
<li class="chapter" data-level="12.6.1" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#additional-resources-6"><i class="fa fa-check"></i><b>12.6.1</b> Additional resources</a></li>
<li class="chapter" data-level="12.6.2" data-path="12-multiple-regression.html"><a href="12-multiple-regression.html#whats-to-come-7"><i class="fa fa-check"></i><b>12.6.2</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="13" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html"><i class="fa fa-check"></i><b>13</b> Logistic Regression</a><ul>
<li class="chapter" data-level="13.1" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#learning-objectives"><i class="fa fa-check"></i><b>13.1</b> Learning Objectives</a></li>
<li class="chapter" data-level="13.2" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#introduction-to-logistic-regression"><i class="fa fa-check"></i><b>13.2</b> Introduction to Logistic Regression</a><ul>
<li class="chapter" data-level="13.2.1" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#logistic-regression-assumptions"><i class="fa fa-check"></i><b>13.2.1</b> Logistic Regression Assumptions</a></li>
<li class="chapter" data-level="13.2.2" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#a-graphical-look-at-logistic-regression"><i class="fa fa-check"></i><b>13.2.2</b> A Graphical Look at Logistic Regression</a></li>
</ul></li>
<li class="chapter" data-level="13.3" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#case-studies-overview"><i class="fa fa-check"></i><b>13.3</b> Case Studies Overview</a></li>
<li class="chapter" data-level="13.4" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#case-study-soccer-goalkeepers"><i class="fa fa-check"></i><b>13.4</b> Case Study: Soccer Goalkeepers</a><ul>
<li class="chapter" data-level="13.4.1" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#modeling-odds"><i class="fa fa-check"></i><b>13.4.1</b> Modeling Odds</a></li>
<li class="chapter" data-level="13.4.2" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#logistic-regression-models-for-binomial-responses"><i class="fa fa-check"></i><b>13.4.2</b> Logistic Regression Models for Binomial Responses</a></li>
<li class="chapter" data-level="13.4.3" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#theoretical-rationale-for-logistic-regression-models-optional"><i class="fa fa-check"></i><b>13.4.3</b> Theoretical rationale for logistic regression models (Optional)</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#case-study-reconstructing-alabama"><i class="fa fa-check"></i><b>13.5</b> Case Study: Reconstructing Alabama</a><ul>
<li class="chapter" data-level="13.5.1" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#data-organization"><i class="fa fa-check"></i><b>13.5.1</b> Data Organization</a></li>
<li class="chapter" data-level="13.5.2" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#exploratory-analyses"><i class="fa fa-check"></i><b>13.5.2</b> Exploratory Analyses</a></li>
<li class="chapter" data-level="13.5.3" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#initial-models"><i class="fa fa-check"></i><b>13.5.3</b> Initial Models</a></li>
<li class="chapter" data-level="13.5.4" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#sec-logisticInf"><i class="fa fa-check"></i><b>13.5.4</b> Tests for significance of model coefficients</a></li>
<li class="chapter" data-level="13.5.5" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#confidence-intervals-for-model-coefficients"><i class="fa fa-check"></i><b>13.5.5</b> Confidence intervals for model coefficients</a></li>
<li class="chapter" data-level="13.5.6" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#testing-for-goodness-of-fit"><i class="fa fa-check"></i><b>13.5.6</b> Testing for goodness of fit</a></li>
<li class="chapter" data-level="13.5.7" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#residuals-for-binomial-regression"><i class="fa fa-check"></i><b>13.5.7</b> Residuals for Binomial Regression</a></li>
<li class="chapter" data-level="13.5.8" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#sec-logOverdispersion"><i class="fa fa-check"></i><b>13.5.8</b> Overdispersion</a></li>
<li class="chapter" data-level="13.5.9" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#summary-5"><i class="fa fa-check"></i><b>13.5.9</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="13.6" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#least-squares-regression-vs.logistic-regression"><i class="fa fa-check"></i><b>13.6</b> Least Squares Regression vs. Logistic Regression</a></li>
<li class="chapter" data-level="13.7" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#case-study-trying-to-lose-weight"><i class="fa fa-check"></i><b>13.7</b> Case Study: Trying to Lose Weight</a><ul>
<li class="chapter" data-level="13.7.1" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#data-organization-1"><i class="fa fa-check"></i><b>13.7.1</b> Data Organization</a></li>
<li class="chapter" data-level="13.7.2" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#exploratory-data-analysis"><i class="fa fa-check"></i><b>13.7.2</b> Exploratory Data Analysis</a></li>
<li class="chapter" data-level="13.7.3" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#initial-models-1"><i class="fa fa-check"></i><b>13.7.3</b> Initial Models</a></li>
<li class="chapter" data-level="13.7.4" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#drop-in-deviance-tests"><i class="fa fa-check"></i><b>13.7.4</b> Drop-in-deviance Tests</a></li>
<li class="chapter" data-level="13.7.5" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#model-discussion-and-summary"><i class="fa fa-check"></i><b>13.7.5</b> Model Discussion and Summary</a></li>
</ul></li>
<li class="chapter" data-level="13.8" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#exercises"><i class="fa fa-check"></i><b>13.8</b> Exercises</a><ul>
<li class="chapter" data-level="13.8.1" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#conceptual-exercises"><i class="fa fa-check"></i><b>13.8.1</b> Conceptual Exercises:</a></li>
<li class="chapter" data-level="13.8.2" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#guided-exercises"><i class="fa fa-check"></i><b>13.8.2</b> Guided Exercises</a></li>
<li class="chapter" data-level="13.8.3" data-path="13-ch-logreg.html"><a href="13-ch-logreg.html#open-ended-exercises"><i class="fa fa-check"></i><b>13.8.3</b> Open-ended Exercises</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="14" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html"><i class="fa fa-check"></i><b>14</b> Introduction to machine learning</a><ul>
<li class="chapter" data-level="14.1" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#notation"><i class="fa fa-check"></i><b>14.1</b> Notation</a></li>
<li class="chapter" data-level="14.2" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#an-example"><i class="fa fa-check"></i><b>14.2</b> An example</a></li>
<li class="chapter" data-level="14.3" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#exercises-1"><i class="fa fa-check"></i><b>14.3</b> Exercises</a></li>
<li class="chapter" data-level="14.4" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#evaluation-metrics"><i class="fa fa-check"></i><b>14.4</b> Evaluation metrics</a><ul>
<li class="chapter" data-level="14.4.1" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#training-and-test-sets"><i class="fa fa-check"></i><b>14.4.1</b> Training and test sets</a></li>
<li class="chapter" data-level="14.4.2" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#overall-accuracy"><i class="fa fa-check"></i><b>14.4.2</b> Overall accuracy</a></li>
<li class="chapter" data-level="14.4.3" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#the-confusion-matrix"><i class="fa fa-check"></i><b>14.4.3</b> The confusion matrix</a></li>
<li class="chapter" data-level="14.4.4" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#sensitivity-and-specificity"><i class="fa fa-check"></i><b>14.4.4</b> Sensitivity and specificity</a></li>
<li class="chapter" data-level="14.4.5" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#balanced-accuracy-and-f_1-score"><i class="fa fa-check"></i><b>14.4.5</b> Balanced accuracy and <span class="math inline">\(F_1\)</span> score</a></li>
<li class="chapter" data-level="14.4.6" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#prevalence-matters-in-practice"><i class="fa fa-check"></i><b>14.4.6</b> Prevalence matters in practice</a></li>
<li class="chapter" data-level="14.4.7" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#roc-and-precision-recall-curves"><i class="fa fa-check"></i><b>14.4.7</b> ROC and precision-recall curves</a></li>
<li class="chapter" data-level="14.4.8" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#loss-function"><i class="fa fa-check"></i><b>14.4.8</b> The loss function</a></li>
</ul></li>
<li class="chapter" data-level="14.5" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#exercises-2"><i class="fa fa-check"></i><b>14.5</b> Exercises</a></li>
<li class="chapter" data-level="14.6" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#conditional-probabilities-and-expectations"><i class="fa fa-check"></i><b>14.6</b> Conditional probabilities and expectations</a><ul>
<li class="chapter" data-level="14.6.1" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#conditional-probabilities"><i class="fa fa-check"></i><b>14.6.1</b> Conditional probabilities</a></li>
<li class="chapter" data-level="14.6.2" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#conditional-expectations"><i class="fa fa-check"></i><b>14.6.2</b> Conditional expectations</a></li>
<li class="chapter" data-level="14.6.3" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#conditional-expectation-minimizes-squared-loss-function"><i class="fa fa-check"></i><b>14.6.3</b> Conditional expectation minimizes squared loss function</a></li>
</ul></li>
<li class="chapter" data-level="14.7" data-path="14-introduction-to-machine-learning.html"><a href="14-introduction-to-machine-learning.html#exercises-3"><i class="fa fa-check"></i><b>14.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="15-cross-validation.html"><a href="15-cross-validation.html"><i class="fa fa-check"></i><b>15</b> Cross validation</a><ul>
<li class="chapter" data-level="15.1" data-path="15-cross-validation.html"><a href="15-cross-validation.html#knn-cv-intro"><i class="fa fa-check"></i><b>15.1</b> Motivation with k-nearest neighbors</a><ul>
<li class="chapter" data-level="15.1.1" data-path="15-cross-validation.html"><a href="15-cross-validation.html#over-training"><i class="fa fa-check"></i><b>15.1.1</b> Over-training</a></li>
<li class="chapter" data-level="15.1.2" data-path="15-cross-validation.html"><a href="15-cross-validation.html#over-smoothing"><i class="fa fa-check"></i><b>15.1.2</b> Over-smoothing</a></li>
<li class="chapter" data-level="15.1.3" data-path="15-cross-validation.html"><a href="15-cross-validation.html#picking-the-k-in-knn"><i class="fa fa-check"></i><b>15.1.3</b> Picking the <span class="math inline">\(k\)</span> in kNN</a></li>
</ul></li>
<li class="chapter" data-level="15.2" data-path="15-cross-validation.html"><a href="15-cross-validation.html#mathematical-description-of-cross-validation"><i class="fa fa-check"></i><b>15.2</b> Mathematical description of cross validation</a></li>
<li class="chapter" data-level="15.3" data-path="15-cross-validation.html"><a href="15-cross-validation.html#k-fold-cross-validation"><i class="fa fa-check"></i><b>15.3</b> K-fold cross validation</a></li>
<li class="chapter" data-level="15.4" data-path="15-cross-validation.html"><a href="15-cross-validation.html#exercises-4"><i class="fa fa-check"></i><b>15.4</b> Exercises</a></li>
<li class="chapter" data-level="15.5" data-path="15-cross-validation.html"><a href="15-cross-validation.html#bootstrap"><i class="fa fa-check"></i><b>15.5</b> Bootstrap</a></li>
<li class="chapter" data-level="15.6" data-path="15-cross-validation.html"><a href="15-cross-validation.html#exercises-5"><i class="fa fa-check"></i><b>15.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html"><i class="fa fa-check"></i><b>16</b> Examples of algorithms</a><ul>
<li class="chapter" data-level="16.1" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html#linear-regression"><i class="fa fa-check"></i><b>16.1</b> Linear regression</a><ul>
<li class="chapter" data-level="16.1.1" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html#the-predict-function"><i class="fa fa-check"></i><b>16.1.1</b> The <code>predict</code> function</a></li>
</ul></li>
<li class="chapter" data-level="16.2" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html#exercises-6"><i class="fa fa-check"></i><b>16.2</b> Exercises</a></li>
<li class="chapter" data-level="16.3" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html#logistic-regression"><i class="fa fa-check"></i><b>16.3</b> Logistic regression</a><ul>
<li class="chapter" data-level="16.3.1" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html#generalized-linear-models"><i class="fa fa-check"></i><b>16.3.1</b> Generalized linear models</a></li>
<li class="chapter" data-level="16.3.2" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html#logistic-regression-with-more-than-one-predictor"><i class="fa fa-check"></i><b>16.3.2</b> Logistic regression with more than one predictor</a></li>
</ul></li>
<li class="chapter" data-level="16.4" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html#exercises-7"><i class="fa fa-check"></i><b>16.4</b> Exercises</a></li>
<li class="chapter" data-level="16.5" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html#k-nearest-neighbors"><i class="fa fa-check"></i><b>16.5</b> k-nearest neighbors</a></li>
<li class="chapter" data-level="16.6" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html#exercises-8"><i class="fa fa-check"></i><b>16.6</b> Exercises</a></li>
<li class="chapter" data-level="16.7" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html#classification-and-regression-trees-cart"><i class="fa fa-check"></i><b>16.7</b> Classification and regression trees (CART)</a><ul>
<li class="chapter" data-level="16.7.1" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html#the-curse-of-dimensionality"><i class="fa fa-check"></i><b>16.7.1</b> The curse of dimensionality</a></li>
<li class="chapter" data-level="16.7.2" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html#cart-motivation"><i class="fa fa-check"></i><b>16.7.2</b> CART motivation</a></li>
<li class="chapter" data-level="16.7.3" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html#regression-trees"><i class="fa fa-check"></i><b>16.7.3</b> Regression trees</a></li>
<li class="chapter" data-level="16.7.4" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html#classification-decision-trees"><i class="fa fa-check"></i><b>16.7.4</b> Classification (decision) trees</a></li>
</ul></li>
<li class="chapter" data-level="16.8" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html#random-forests"><i class="fa fa-check"></i><b>16.8</b> Random forests</a></li>
<li class="chapter" data-level="16.9" data-path="16-examples-of-algorithms.html"><a href="16-examples-of-algorithms.html#exercises-9"><i class="fa fa-check"></i><b>16.9</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="17-shiny.html"><a href="17-shiny.html"><i class="fa fa-check"></i><b>17</b> Shiny</a><ul>
<li class="chapter" data-level="17.1" data-path="17-shiny.html"><a href="17-shiny.html#helpful-resources"><i class="fa fa-check"></i><b>17.1</b> Helpful Resources</a></li>
<li class="chapter" data-level="17.2" data-path="17-shiny.html"><a href="17-shiny.html#set-up-and-getting-started"><i class="fa fa-check"></i><b>17.2</b> Set Up and Getting Started</a></li>
<li class="chapter" data-level="17.3" data-path="17-shiny.html"><a href="17-shiny.html#building-your-basic-app"><i class="fa fa-check"></i><b>17.3</b> Building Your Basic App</a><ul>
<li class="chapter" data-level="17.3.1" data-path="17-shiny.html"><a href="17-shiny.html#setting-up-the-basic-ui"><i class="fa fa-check"></i><b>17.3.1</b> Setting Up the Basic UI</a></li>
<li class="chapter" data-level="17.3.2" data-path="17-shiny.html"><a href="17-shiny.html#setting-up-the-server"><i class="fa fa-check"></i><b>17.3.2</b> Setting up the Server</a></li>
</ul></li>
<li class="chapter" data-level="17.4" data-path="17-shiny.html"><a href="17-shiny.html#organization"><i class="fa fa-check"></i><b>17.4</b> Organization</a></li>
<li class="chapter" data-level="17.5" data-path="17-shiny.html"><a href="17-shiny.html#customizations"><i class="fa fa-check"></i><b>17.5</b> Customizations</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Preceptor’s Primer for Bayesian Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="functions" class="section level1">
<h1><span class="header-section-number">Chapter 6</span> Functions</h1>
<p>My goal here is to reveal the <strong>process</strong> a long-time useR employs for writing functions. I also want to illustrate why the process is the way it is. Merely looking at the finished product, e.g. source code for R packages, can be extremely deceiving. Reality is generally much uglier … but more interesting!</p>
<p>Why are we covering this now, smack in the middle of data aggregation? Powerful machines like dplyr, purrr, and the built-in “apply” family of functions, are ready and waiting to apply your purpose-built functions to various bits of your data. If you can express your analytical wishes in a function, these tools will give you great power.</p>
<div id="load-the-gapminder-data" class="section level2">
<h2><span class="header-section-number">6.1</span> Load the Gapminder data</h2>
<p>As usual, load gapminder.</p>
<div class="sourceCode" id="cb385"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb385-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a>
<a class="sourceLine" id="cb385-2" data-line-number="2"><span class="kw">str</span>(gapminder)</a></code></pre></div>
<pre><code>Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:   1704 obs. of  6 variables:
 $ country  : Factor w/ 142 levels &quot;Afghanistan&quot;,..: 1 1 1 1 1 1 1 1 1 1 ...
 $ continent: Factor w/ 5 levels &quot;Africa&quot;,&quot;Americas&quot;,..: 3 3 3 3 3 3 3 3 3 3 ...
 $ year     : int  1952 1957 1962 1967 1972 1977 1982 1987 1992 1997 ...
 $ lifeExp  : num  28.8 30.3 32 34 36.1 ...
 $ pop      : int  8425333 9240934 10267083 11537966 13079460 14880372 12881816 13867957 16317921 22227415 ...
 $ gdpPercap: num  779 821 853 836 740 ...</code></pre>
</div>
<div id="max---min" class="section level2">
<h2><span class="header-section-number">6.2</span> Max - min</h2>
<p>Say you’ve got a numeric vector, and you want to compute the difference between its max and min. <code>lifeExp</code> or <code>pop</code> or <code>gdpPercap</code> are great examples of a typical input. You can imagine wanting to get this statistic after we slice up the Gapminder data by year, country, continent, or combinations thereof.</p>
</div>
<div id="get-something-that-works" class="section level2">
<h2><span class="header-section-number">6.3</span> Get something that works</h2>
<p>First, develop some working code for interactive use, using a representative input. I’ll use Gapminder’s life expectancy variable.</p>
<p>R functions that will be useful: <code>min()</code>, <code>max()</code>, <code>range()</code>. (<strong>Read their documentation:</strong> [here][rdocs-extremes] and [here][rdocs-range])</p>
<div class="sourceCode" id="cb387"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb387-1" data-line-number="1"><span class="co">## get to know the functions mentioned above</span></a>
<a class="sourceLine" id="cb387-2" data-line-number="2"><span class="kw">min</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<pre><code>[1] 23.6</code></pre>
<div class="sourceCode" id="cb389"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb389-1" data-line-number="1"><span class="kw">max</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<pre><code>[1] 82.6</code></pre>
<div class="sourceCode" id="cb391"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb391-1" data-line-number="1"><span class="kw">range</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<pre><code>[1] 23.6 82.6</code></pre>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb393-1" data-line-number="1"><span class="co">## some natural solutions</span></a>
<a class="sourceLine" id="cb393-2" data-line-number="2"><span class="kw">max</span>(gapminder<span class="op">$</span>lifeExp) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<pre><code>[1] 59</code></pre>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb395-1" data-line-number="1"><span class="kw">with</span>(gapminder, <span class="kw">max</span>(lifeExp) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(lifeExp))</a></code></pre></div>
<pre><code>[1] 59</code></pre>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb397-1" data-line-number="1"><span class="kw">range</span>(gapminder<span class="op">$</span>lifeExp)[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span><span class="kw">range</span>(gapminder<span class="op">$</span>lifeExp)[<span class="dv">1</span>]</a></code></pre></div>
<pre><code>[1] 59</code></pre>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb399-1" data-line-number="1"><span class="kw">with</span>(gapminder, <span class="kw">range</span>(lifeExp)[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span><span class="kw">range</span>(lifeExp)[<span class="dv">1</span>])</a></code></pre></div>
<pre><code>[1] 59</code></pre>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb401-1" data-line-number="1"><span class="kw">diff</span>(<span class="kw">range</span>(gapminder<span class="op">$</span>lifeExp))</a></code></pre></div>
<pre><code>[1] 59</code></pre>
<p>Internalize this “answer” because our informal testing relies on you noticing departures from this.</p>
<div id="skateboard-perfectly-formed-rear-view-mirror" class="section level3">
<h3><span class="header-section-number">6.3.1</span> Skateboard &gt;&gt; perfectly formed rear-view mirror</h3>
<p>This image [widely attributed to the Spotify development team][min-viable-product] conveys an important point.</p>
<div class="figure" style="text-align: center"><span id="fig:spotify-howtobuildmvp"></span>
<img src="img/spotify-howtobuildmvp.jpg" alt="From [Your ultimate guide to Minimum Viable Product (+great examples)](https://blog.fastmonkeys.com/2014/06/18/minimum-viable-product-your-ultimate-guide-to-mvp-great-examples/)" width="60%" />
<p class="caption">
FIGURE 6.1: From <a href="https://blog.fastmonkeys.com/2014/06/18/minimum-viable-product-your-ultimate-guide-to-mvp-great-examples/">Your ultimate guide to Minimum Viable Product (+great examples)</a>
</p>
</div>
<p>Build that skateboard before you build the car or some fancy car part. A limited-but-functioning thing is very useful. It also keeps the spirits high.</p>
<p>This is related to the valuable [Telescope Rule][telescope-rule]:</p>
<blockquote>
<p>It is faster to make a four-inch mirror then a six-inch mirror than to make a six-inch mirror.</p>
</blockquote>
</div>
</div>
<div id="turn-the-working-interactive-code-into-a-function" class="section level2">
<h2><span class="header-section-number">6.4</span> Turn the working interactive code into a function</h2>
<p>Add NO new functionality! Just write your very first R function.</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb403-1" data-line-number="1">max_minus_min &lt;-<span class="st"> </span><span class="cf">function</span>(x) <span class="kw">max</span>(x) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(x)</a>
<a class="sourceLine" id="cb403-2" data-line-number="2"><span class="kw">max_minus_min</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<pre><code>[1] 59</code></pre>
<p>Check that you’re getting the same answer as you did with your interactive code. Test it eyeball-o-metrically at this point.</p>
</div>
<div id="test-your-function" class="section level2">
<h2><span class="header-section-number">6.5</span> Test your function</h2>
<div id="test-on-new-inputs" class="section level3">
<h3><span class="header-section-number">6.5.1</span> Test on new inputs</h3>
<p>Pick some new artificial inputs where you know (at least approximately) what your function should return.</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb405-1" data-line-number="1"><span class="kw">max_minus_min</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>)</a></code></pre></div>
<pre><code>[1] 9</code></pre>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb407-1" data-line-number="1"><span class="kw">max_minus_min</span>(<span class="kw">runif</span>(<span class="dv">1000</span>))</a></code></pre></div>
<pre><code>[1] 0.999</code></pre>
<p>I know that 10 minus 1 is 9. I know that random uniform [0, 1] variates will be between 0 and 1. Therefore max - min should be less than 1. If I take LOTS of them, max - min should be pretty close to 1.</p>
<p>It is intentional that I tested on integer input as well as floating point. Likewise, I like to use valid-but-random data for this sort of check.</p>
</div>
<div id="test-on-real-data-but-different-real-data" class="section level3">
<h3><span class="header-section-number">6.5.2</span> Test on real data but <em>different</em> real data</h3>
<p>Back to the real world now. Two other quantitative variables are lying around: <code>gdpPercap</code> and <code>pop</code>. Let’s have a go.</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb409-1" data-line-number="1"><span class="kw">max_minus_min</span>(gapminder<span class="op">$</span>gdpPercap)</a></code></pre></div>
<pre><code>[1] 113282</code></pre>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb411-1" data-line-number="1"><span class="kw">max_minus_min</span>(gapminder<span class="op">$</span>pop)</a></code></pre></div>
<pre><code>[1] 1318623085</code></pre>
<p>Either check these results “by hand” or apply the “does that even make sense?” test.</p>
</div>
<div id="test-on-weird-stuff" class="section level3">
<h3><span class="header-section-number">6.5.3</span> Test on weird stuff</h3>
<p>Now we try to break our function. Don’t get truly diabolical (yet). Just make the kind of mistakes you can imagine making at 2am when, 3 years from now, you rediscover this useful function you wrote. Give your function inputs it’s not expecting.</p>
<div class="sourceCode" id="cb413"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb413-1" data-line-number="1"><span class="kw">max_minus_min</span>(gapminder) <span class="co">## hey sometimes things &quot;just work&quot; on data.frames!</span></a></code></pre></div>
<pre><code>Error in FUN(X[[i]], ...): only defined on a data frame with all numeric variables</code></pre>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb415-1" data-line-number="1"><span class="kw">max_minus_min</span>(gapminder<span class="op">$</span>country) <span class="co">## factors are kind of like integer vectors, no?</span></a></code></pre></div>
<pre><code>Error in Summary.factor(structure(c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, : &#39;max&#39; not meaningful for factors</code></pre>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb417-1" data-line-number="1"><span class="kw">max_minus_min</span>(<span class="st">&quot;eggplants are purple&quot;</span>) <span class="co">## i have no excuse for this one</span></a></code></pre></div>
<pre><code>Error in max(x) - min(x): non-numeric argument to binary operator</code></pre>
<p>How happy are you with those error messages? You must imagine that some entire <strong>script</strong> has failed and that you were hoping to just <code>source()</code> it without re-reading it. If a colleague or future you encountered these errors, do you run screaming from the room? How hard is it to pinpoint the usage problem?</p>
</div>
<div id="i-will-scare-you-now" class="section level3">
<h3><span class="header-section-number">6.5.4</span> I will scare you now</h3>
<p>Here are some great examples STAT545 students devised during class where the function <strong>should break but it does not.</strong></p>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb419-1" data-line-number="1"><span class="kw">max_minus_min</span>(gapminder[<span class="kw">c</span>(<span class="st">&#39;lifeExp&#39;</span>, <span class="st">&#39;gdpPercap&#39;</span>, <span class="st">&#39;pop&#39;</span>)])</a></code></pre></div>
<pre><code>[1] 1318683072</code></pre>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb421-1" data-line-number="1"><span class="kw">max_minus_min</span>(<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>))</a></code></pre></div>
<pre><code>[1] 1</code></pre>
<p>In both cases, R’s eagerness to make sense of our requests is unfortunately successful. In the first case, a data.frame containing just the quantitative variables is eventually coerced into numeric vector. We can compute max minus min, even though it makes absolutely no sense at all. In the second case, a logical vector is converted to zeroes and ones, which might merit an error or at least a warning.</p>
</div>
</div>
<div id="check-the-validity-of-arguments" class="section level2">
<h2><span class="header-section-number">6.6</span> Check the validity of arguments</h2>
<p>For functions that will be used again – which is not all of them! – it is good to check the validity of arguments. This implements a rule from [the Unix philosophy][unix-philosophy]:</p>
<blockquote>
<p>Rule of Repair: When you must fail, fail noisily and as soon as possible.</p>
</blockquote>
<div id="stop-if-not" class="section level3">
<h3><span class="header-section-number">6.6.1</span> stop if not</h3>
<p><code>stopifnot()</code> is the entry level solution. I use it here to make sure the input <code>x</code> is a numeric vector.</p>
<div class="sourceCode" id="cb423"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb423-1" data-line-number="1">mmm &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb423-2" data-line-number="2">  <span class="kw">stopifnot</span>(<span class="kw">is.numeric</span>(x))</a>
<a class="sourceLine" id="cb423-3" data-line-number="3">  <span class="kw">max</span>(x) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(x)</a>
<a class="sourceLine" id="cb423-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb423-5" data-line-number="5"><span class="kw">mmm</span>(gapminder)</a></code></pre></div>
<pre><code>Error in mmm(gapminder): is.numeric(x) is not TRUE</code></pre>
<div class="sourceCode" id="cb425"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb425-1" data-line-number="1"><span class="kw">mmm</span>(gapminder<span class="op">$</span>country)</a></code></pre></div>
<pre><code>Error in mmm(gapminder$country): is.numeric(x) is not TRUE</code></pre>
<div class="sourceCode" id="cb427"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb427-1" data-line-number="1"><span class="kw">mmm</span>(<span class="st">&quot;eggplants are purple&quot;</span>)</a></code></pre></div>
<pre><code>Error in mmm(&quot;eggplants are purple&quot;): is.numeric(x) is not TRUE</code></pre>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb429-1" data-line-number="1"><span class="kw">mmm</span>(gapminder[<span class="kw">c</span>(<span class="st">&#39;lifeExp&#39;</span>, <span class="st">&#39;gdpPercap&#39;</span>, <span class="st">&#39;pop&#39;</span>)])</a></code></pre></div>
<pre><code>Error in mmm(gapminder[c(&quot;lifeExp&quot;, &quot;gdpPercap&quot;, &quot;pop&quot;)]): is.numeric(x) is not TRUE</code></pre>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb431-1" data-line-number="1"><span class="kw">mmm</span>(<span class="kw">c</span>(<span class="ot">TRUE</span>, <span class="ot">TRUE</span>, <span class="ot">FALSE</span>, <span class="ot">TRUE</span>, <span class="ot">TRUE</span>))</a></code></pre></div>
<pre><code>Error in mmm(c(TRUE, TRUE, FALSE, TRUE, TRUE)): is.numeric(x) is not TRUE</code></pre>
<p>And we see that it catches all of the self-inflicted damage we would like to avoid.</p>
</div>
<div id="if-then-stop" class="section level3">
<h3><span class="header-section-number">6.6.2</span> if then stop</h3>
<p><code>stopifnot()</code> doesn’t provide a very good error message. The next approach is very widely used. Put your validity check inside an <code>if()</code> statement and call <code>stop()</code> yourself, with a custom error message, in the body.</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb433-1" data-line-number="1">mmm2 &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb433-2" data-line-number="2">  <span class="cf">if</span>(<span class="op">!</span><span class="kw">is.numeric</span>(x)) {</a>
<a class="sourceLine" id="cb433-3" data-line-number="3">    <span class="kw">stop</span>(<span class="st">&#39;I am so sorry, but this function only works for numeric input!</span><span class="ch">\n</span><span class="st">&#39;</span>,</a>
<a class="sourceLine" id="cb433-4" data-line-number="4">         <span class="st">&#39;You have provided an object of class: &#39;</span>, <span class="kw">class</span>(x)[<span class="dv">1</span>])</a>
<a class="sourceLine" id="cb433-5" data-line-number="5">  }</a>
<a class="sourceLine" id="cb433-6" data-line-number="6">  <span class="kw">max</span>(x) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(x)</a>
<a class="sourceLine" id="cb433-7" data-line-number="7">}</a>
<a class="sourceLine" id="cb433-8" data-line-number="8"><span class="kw">mmm2</span>(gapminder)</a></code></pre></div>
<pre><code>Error in mmm2(gapminder): I am so sorry, but this function only works for numeric input!
You have provided an object of class: tbl_df</code></pre>
<p>In addition to a gratuitous apology, the error raised also contains two more pieces of helpful info:</p>
<ul>
<li><em>Which</em> function threw the error.</li>
<li>Hints on how to fix things: expected class of input vs actual class.</li>
</ul>
<p>If it is easy to do so, I highly recommend this template: “you gave me THIS, but I need THAT”.</p>
<p>The tidyverse style guide has a very useful <a href="https://style.tidyverse.org/error-messages.html">chapter on how to construct error messages</a>.</p>
</div>
<div id="sidebar-non-programming-uses-for-assertions" class="section level3">
<h3><span class="header-section-number">6.6.3</span> Sidebar: non-programming uses for assertions</h3>
<p>Another good use of this pattern is to leave checks behind in data analytical scripts. Consider our repetitive use of Gapminder in this course. Every time we load it, we inspect it, hoping to see the usual stuff. If we were loading from file (vs. a stable data package), we might want to formalize our expectations about the number of rows and columns, the names and flavors of the variables, etc. This would alert us if the data suddenly changed, which can be a useful wake-up call in scripts that you re-run <em>ad nauseam</em> on auto-pilot or non-interactively.</p>
</div>
</div>
<div id="wrap-up-and-whats-next" class="section level2">
<h2><span class="header-section-number">6.7</span> Wrap-up and what’s next?</h2>
<p>Here’s the function we’ve written so far:</p>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb435-1" data-line-number="1">mmm2</a></code></pre></div>
<pre><code>function(x) {
  if(!is.numeric(x)) {
    stop(&#39;I am so sorry, but this function only works for numeric input!\n&#39;,
         &#39;You have provided an object of class: &#39;, class(x)[1])
  }
  max(x) - min(x)
}</code></pre>
<p>What we’ve accomplished:</p>
<ul>
<li>We’ve written our first function.</li>
<li>We are checking the validity of its input, argument <code>x</code>.</li>
<li>We’ve done a good amount of informal testing.</li>
</ul>
<p>Where to next? In <a href="#functions-part2">part 2</a> we generalize this function to take differences in other quantiles and learn how to set default values for arguments.</p>
</div>
<div id="resources-1" class="section level2">
<h2><span class="header-section-number">6.8</span> Resources</h2>
<p>Packages for runtime assertions (the last 3 seem to be under more active development than <code>assertthat</code>):</p>
<ul>
<li>assertthat on [CRAN][assertthat-cran] and [GitHub][assertthat-github] - <em>the Hadleyverse option</em></li>
<li>ensurer on [CRAN][ensurer-cran] and [GitHub][ensurer-github] - <em>general purpose, pipe-friendly</em></li>
<li>assertr on [CRAN][assertr-cran] and [GitHub][assertr-github] - <em>explicitly data pipeline oriented</em></li>
<li>assertive on [CRAN][assertive-cran] and [Bitbucket][assertive-bitbucket] - <em>rich set of built-in functions</em></li>
</ul>
<p>Hadley Wickham’s book [Advanced R][adv-r] <span class="citation">(<span class="citeproc-not-found" data-reference-id="wickham2015a"><strong>???</strong></span>)</span>:</p>
<ul>
<li>Section on [defensive programming][adv-r-defensive-programming]</li>
</ul>
</div>
<div id="where-were-we-where-are-we-going" class="section level2">
<h2><span class="header-section-number">6.9</span> Where were we? Where are we going?</h2>
<p>In <a href="#functions-part1">part 1</a> we wrote our first R function to compute the difference between the max and min of a numeric vector. We checked the validity of the function’s only argument and, informally, we verified that it worked pretty well.</p>
<p>In this part, we generalize this function, learn more technical details about R functions, and set default values for some arguments.</p>
</div>
<div id="load-the-gapminder-data-1" class="section level2">
<h2><span class="header-section-number">6.10</span> Load the Gapminder data</h2>
<p>As usual, load gapminder.</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb437-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a></code></pre></div>
</div>
<div id="restore-our-max-minus-min-function" class="section level2">
<h2><span class="header-section-number">6.11</span> Restore our max minus min function</h2>
<p>Let’s keep our previous function around as a baseline.</p>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb438-1" data-line-number="1">mmm &lt;-<span class="st"> </span><span class="cf">function</span>(x) {</a>
<a class="sourceLine" id="cb438-2" data-line-number="2">  <span class="kw">stopifnot</span>(<span class="kw">is.numeric</span>(x))</a>
<a class="sourceLine" id="cb438-3" data-line-number="3">  <span class="kw">max</span>(x) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(x)</a>
<a class="sourceLine" id="cb438-4" data-line-number="4">}</a></code></pre></div>
</div>
<div id="generalize-our-function-to-other-quantiles" class="section level2">
<h2><span class="header-section-number">6.12</span> Generalize our function to other quantiles</h2>
<p>The max and the min are special cases of a <strong>quantile</strong>. Here are other special cases you may have heard of:</p>
<ul>
<li>median = 0.5 quantile</li>
<li>1st quartile = 0.25 quantile</li>
<li>3rd quartile = 0.75 quantile</li>
</ul>
<p>If you’re familiar with [box plots][wiki-boxplot], the rectangle typically runs from the 1st quartile to the 3rd quartile, with a line at the median.</p>
<p>If <span class="math inline">\(q\)</span> is the <span class="math inline">\(p\)</span>-th quantile of a set of <span class="math inline">\(n\)</span> observations, what does that mean? Approximately <span class="math inline">\(pn\)</span> of the observations are less than <span class="math inline">\(q\)</span> and <span class="math inline">\((1 - p)n\)</span> are greater than <span class="math inline">\(q\)</span>. Yeah, you need to worry about rounding to an integer and less/greater than or equal to, but these details aren’t critical here.</p>
<p>Let’s generalize our function to take the difference between any two quantiles. We can still consider the max and min, if we like, but we’re not limited to that.</p>
</div>
<div id="get-something-that-works-again" class="section level2">
<h2><span class="header-section-number">6.13</span> Get something that works, again</h2>
<p>The eventual inputs to our new function will be the data <code>x</code> and two probabilities.</p>
<p>First, play around with the <code>quantile()</code> function. Convince yourself you know how to use it, for example, by cross-checking your results with other built-in functions.</p>
<div class="sourceCode" id="cb439"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb439-1" data-line-number="1"><span class="kw">quantile</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<pre><code>  0%  25%  50%  75% 100% 
23.6 48.2 60.7 70.8 82.6 </code></pre>
<div class="sourceCode" id="cb441"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb441-1" data-line-number="1"><span class="kw">quantile</span>(gapminder<span class="op">$</span>lifeExp, <span class="dt">probs =</span> <span class="fl">0.5</span>)</a></code></pre></div>
<pre><code> 50% 
60.7 </code></pre>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb443-1" data-line-number="1"><span class="kw">median</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<pre><code>[1] 60.7</code></pre>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb445-1" data-line-number="1"><span class="kw">quantile</span>(gapminder<span class="op">$</span>lifeExp, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="fl">0.25</span>, <span class="fl">0.75</span>))</a></code></pre></div>
<pre><code> 25%  75% 
48.2 70.8 </code></pre>
<div class="sourceCode" id="cb447"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb447-1" data-line-number="1"><span class="kw">boxplot</span>(gapminder<span class="op">$</span>lifeExp, <span class="dt">plot =</span> <span class="ot">FALSE</span>)<span class="op">$</span>stats</a></code></pre></div>
<pre><code>     [,1]
[1,] 23.6
[2,] 48.2
[3,] 60.7
[4,] 70.8
[5,] 82.6</code></pre>
<p>Now write a code snippet that takes the difference between two quantiles.</p>
<div class="sourceCode" id="cb449"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb449-1" data-line-number="1">the_probs &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="fl">0.25</span>, <span class="fl">0.75</span>)</a>
<a class="sourceLine" id="cb449-2" data-line-number="2">the_quantiles &lt;-<span class="st"> </span><span class="kw">quantile</span>(gapminder<span class="op">$</span>lifeExp, <span class="dt">probs =</span> the_probs)</a>
<a class="sourceLine" id="cb449-3" data-line-number="3"><span class="kw">max</span>(the_quantiles) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(the_quantiles)</a></code></pre></div>
<pre><code>[1] 22.6</code></pre>
</div>
<div id="turn-the-working-interactive-code-into-a-function-again" class="section level2">
<h2><span class="header-section-number">6.14</span> Turn the working interactive code into a function, again</h2>
<p>I’ll use <code>qdiff</code> as the base of our function’s name. I copy the overall structure from our previous “max minus min” work but replace the guts of the function with the more general code we just developed.</p>
<div class="sourceCode" id="cb451"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb451-1" data-line-number="1">qdiff1 &lt;-<span class="st"> </span><span class="cf">function</span>(x, probs) {</a>
<a class="sourceLine" id="cb451-2" data-line-number="2">  <span class="kw">stopifnot</span>(<span class="kw">is.numeric</span>(x))</a>
<a class="sourceLine" id="cb451-3" data-line-number="3">  the_quantiles &lt;-<span class="st"> </span><span class="kw">quantile</span>(<span class="dt">x =</span> x, <span class="dt">probs =</span> probs)</a>
<a class="sourceLine" id="cb451-4" data-line-number="4">  <span class="kw">max</span>(the_quantiles) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(the_quantiles)</a>
<a class="sourceLine" id="cb451-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb451-6" data-line-number="6"><span class="kw">qdiff1</span>(gapminder<span class="op">$</span>lifeExp, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="fl">0.25</span>, <span class="fl">0.75</span>))</a></code></pre></div>
<pre><code>[1] 22.6</code></pre>
<div class="sourceCode" id="cb453"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb453-1" data-line-number="1"><span class="kw">IQR</span>(gapminder<span class="op">$</span>lifeExp) <span class="co"># hey, we&#39;ve reinvented IQR</span></a></code></pre></div>
<pre><code>[1] 22.6</code></pre>
<div class="sourceCode" id="cb455"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb455-1" data-line-number="1"><span class="kw">qdiff1</span>(gapminder<span class="op">$</span>lifeExp, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>))</a></code></pre></div>
<pre><code>[1] 59</code></pre>
<div class="sourceCode" id="cb457"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb457-1" data-line-number="1"><span class="kw">mmm</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<pre><code>[1] 59</code></pre>
<p>Again we do some informal tests against familiar results and external implementations.</p>
</div>
<div id="argument-names-freedom-and-conventions" class="section level2">
<h2><span class="header-section-number">6.15</span> Argument names: freedom and conventions</h2>
<p>I want you to understand the importance of argument names.</p>
<p>I can name my arguments almost anything I like. Proof:</p>
<div class="sourceCode" id="cb459"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb459-1" data-line-number="1">qdiff2 &lt;-<span class="st"> </span><span class="cf">function</span>(zeus, hera) {</a>
<a class="sourceLine" id="cb459-2" data-line-number="2">  <span class="kw">stopifnot</span>(<span class="kw">is.numeric</span>(zeus))</a>
<a class="sourceLine" id="cb459-3" data-line-number="3">  the_quantiles &lt;-<span class="st"> </span><span class="kw">quantile</span>(<span class="dt">x =</span> zeus, <span class="dt">probs =</span> hera)</a>
<a class="sourceLine" id="cb459-4" data-line-number="4">  <span class="kw">max</span>(the_quantiles) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(the_quantiles)</a>
<a class="sourceLine" id="cb459-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb459-6" data-line-number="6"><span class="kw">qdiff2</span>(<span class="dt">zeus =</span> gapminder<span class="op">$</span>lifeExp, <span class="dt">hera =</span> <span class="dv">0</span><span class="op">:</span><span class="dv">1</span>)</a></code></pre></div>
<pre><code>[1] 59</code></pre>
<p>While I can name my arguments after Greek gods, it’s usually a bad idea. Take all opportunities to make things more self-explanatory via meaningful names.</p>
<p>If you are going to pass the arguments of your function as arguments of a built-in function, consider copying the argument names. Unless you have a good reason to do your own thing (some argument names are bad!), be consistent with the existing function. Again, the reason is to reduce your cognitive load. This is what I’ve been doing all along and now you know why:</p>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb461-1" data-line-number="1">qdiff1</a></code></pre></div>
<pre><code>function(x, probs) {
  stopifnot(is.numeric(x))
  the_quantiles &lt;- quantile(x = x, probs = probs)
  max(the_quantiles) - min(the_quantiles)
}
&lt;bytecode: 0x7f87e88d8428&gt;</code></pre>
<p>We took this detour so you could see there is no <em>structural</em> relationship between my arguments (<code>x</code> and <code>probs</code>) and those of <code>quantile()</code> (also <code>x</code> and <code>probs</code>). The similarity or equivalence of the names <strong>accomplishes nothing</strong> as far as R is concerned; it is solely for the benefit of humans reading, writing, and using the code. Which is very important!</p>
</div>
<div id="what-a-function-returns" class="section level2">
<h2><span class="header-section-number">6.16</span> What a function returns</h2>
<p>By this point, I expect someone will have asked about the last line in my function’s body. Look above for a reminder of the function’s definition.</p>
<p>By default, a function returns the result of the last line of the body. I am just letting that happen with the line <code>max(the_quantiles) - min(the_quantiles)</code>. However, there is an explicit function for this: <code>return()</code>. I could just as easily make this the last line of my function’s body:</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb463-1" data-line-number="1"><span class="kw">return</span>(<span class="kw">max</span>(the_quantiles) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(the_quantiles))</a></code></pre></div>
<p>You absolutely must use <code>return()</code> if you want to return early based on some condition, i.e. before execution gets to the last line of the body. Otherwise, you can decide your own conventions about when you use <code>return()</code> and when you don’t.</p>
</div>
<div id="default-values-freedom-to-not-specify-the-arguments" class="section level2">
<h2><span class="header-section-number">6.17</span> Default values: freedom to NOT specify the arguments</h2>
<p>What happens if we call our function but neglect to specify the probabilities?</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb464-1" data-line-number="1"><span class="kw">qdiff1</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<pre><code>Error in quantile(x = x, probs = probs): argument &quot;probs&quot; is missing, with no default</code></pre>
<p>Oops! At the moment, this causes a fatal error. It can be nice to provide some reasonable default values for certain arguments. In our case, it would be crazy to specify a default value for the primary input <code>x</code>, but very kind to specify a default for <code>probs</code>.</p>
<p>We started by focusing on the max and the min, so I think those make reasonable defaults. Here’s how to specify that in a function definition.</p>
<div class="sourceCode" id="cb466"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb466-1" data-line-number="1">qdiff3 &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) {</a>
<a class="sourceLine" id="cb466-2" data-line-number="2">  <span class="kw">stopifnot</span>(<span class="kw">is.numeric</span>(x))</a>
<a class="sourceLine" id="cb466-3" data-line-number="3">  the_quantiles &lt;-<span class="st"> </span><span class="kw">quantile</span>(x, probs)</a>
<a class="sourceLine" id="cb466-4" data-line-number="4">  <span class="kw">max</span>(the_quantiles) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(the_quantiles)</a>
<a class="sourceLine" id="cb466-5" data-line-number="5">}</a></code></pre></div>
<p>Again we check how the function works, in old examples and new, specifying the <code>probs</code> argument and not.</p>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb467-1" data-line-number="1"><span class="kw">qdiff3</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<pre><code>[1] 59</code></pre>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb469-1" data-line-number="1"><span class="kw">mmm</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<pre><code>[1] 59</code></pre>
<div class="sourceCode" id="cb471"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb471-1" data-line-number="1"><span class="kw">qdiff3</span>(gapminder<span class="op">$</span>lifeExp, <span class="kw">c</span>(<span class="fl">0.1</span>, <span class="fl">0.9</span>))</a></code></pre></div>
<pre><code>[1] 33.6</code></pre>
</div>
<div id="check-the-validity-of-arguments-again" class="section level2">
<h2><span class="header-section-number">6.18</span> Check the validity of arguments, again</h2>
<p><strong>Exercise:</strong> upgrade our argument validity checks in light of the new argument <code>probs</code>.</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb473-1" data-line-number="1"><span class="co">## problems identified during class</span></a>
<a class="sourceLine" id="cb473-2" data-line-number="2"><span class="co">## we&#39;re not checking that probs is numeric</span></a>
<a class="sourceLine" id="cb473-3" data-line-number="3"><span class="co">## we&#39;re not checking that probs is length 2</span></a>
<a class="sourceLine" id="cb473-4" data-line-number="4"><span class="co">## we&#39;re not checking that probs are in [0,1]</span></a></code></pre></div>
</div>
<div id="wrap-up-and-whats-next-1" class="section level2">
<h2><span class="header-section-number">6.19</span> Wrap-up and what’s next?</h2>
<p>Here’s the function we’ve written so far:</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb474-1" data-line-number="1">qdiff3</a></code></pre></div>
<pre><code>function(x, probs = c(0, 1)) {
  stopifnot(is.numeric(x))
  the_quantiles &lt;- quantile(x, probs)
  max(the_quantiles) - min(the_quantiles)
}
&lt;bytecode: 0x7f87e07ad278&gt;</code></pre>
<p>What we’ve accomplished:</p>
<ul>
<li>We’ve generalized our first function to take a difference between arbitrary quantiles.</li>
<li>We’ve specified default values for the probabilities that set the quantiles.</li>
</ul>
<p>Where to next? In <a href="#functions-part3">part 3</a> we tackle <code>NA</code>s, the special <code>...</code> argument, and formal unit testing.</p>
</div>
<div id="resources-2" class="section level2">
<h2><span class="header-section-number">6.20</span> Resources</h2>
<p>Hadley Wickham’s book [Advanced R][adv-r] <span class="citation">(<span class="citeproc-not-found" data-reference-id="wickham2015a"><strong>???</strong></span>)</span>:</p>
<ul>
<li>Section on [function arguments][adv-r-fxn-args]</li>
<li>Section on [return values][adv-r-return-values]</li>
</ul>
</div>
<div id="where-were-we-where-are-we-going-1" class="section level2">
<h2><span class="header-section-number">6.21</span> Where were we? Where are we going?</h2>
<p>In <a href="#functions-part2">part 2</a> we generalized our first R function so it could take the difference between any two quantiles of a numeric vector. We also set default values for the underlying probabilities, so that, by default, we compute the max minus the min.</p>
<p>In this part, we tackle <code>NA</code>s, the special argument <code>...</code> and formal testing.</p>
</div>
<div id="load-the-gapminder-data-2" class="section level2">
<h2><span class="header-section-number">6.22</span> Load the Gapminder data</h2>
<p>As usual, load gapminder.</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb476-1" data-line-number="1"><span class="kw">library</span>(gapminder)</a></code></pre></div>
</div>
<div id="restore-our-max-minus-min-function-1" class="section level2">
<h2><span class="header-section-number">6.23</span> Restore our max minus min function</h2>
<p>Let’s keep our previous function around as a baseline.</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb477-1" data-line-number="1">qdiff3 &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) {</a>
<a class="sourceLine" id="cb477-2" data-line-number="2">  <span class="kw">stopifnot</span>(<span class="kw">is.numeric</span>(x))</a>
<a class="sourceLine" id="cb477-3" data-line-number="3">  the_quantiles &lt;-<span class="st"> </span><span class="kw">quantile</span>(x, probs)</a>
<a class="sourceLine" id="cb477-4" data-line-number="4">  <span class="kw">max</span>(the_quantiles) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(the_quantiles)</a>
<a class="sourceLine" id="cb477-5" data-line-number="5">}</a></code></pre></div>
</div>
<div id="be-proactive-about-nas" class="section level2">
<h2><span class="header-section-number">6.24</span> Be proactive about <code>NA</code>s</h2>
<p>I am being gentle by letting you practice with the Gapminder data. In real life, missing data will make your life a living hell. If you are lucky, it will be properly indicated by the special value <code>NA</code>, but don’t hold your breath. Many built-in R functions have an <code>na.rm =</code> argument through which you can specify how you want to handle <code>NA</code>s. Typically the default value is <code>na.rm = FALSE</code> and typical default behavior is to either let <code>NA</code>s propagate or to raise an error. Let’s see how <code>quantile()</code> handles <code>NA</code>s:</p>
<div class="sourceCode" id="cb478"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb478-1" data-line-number="1">z &lt;-<span class="st"> </span>gapminder<span class="op">$</span>lifeExp</a>
<a class="sourceLine" id="cb478-2" data-line-number="2">z[<span class="dv">3</span>] &lt;-<span class="st"> </span><span class="ot">NA</span></a>
<a class="sourceLine" id="cb478-3" data-line-number="3"><span class="kw">quantile</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<pre><code>  0%  25%  50%  75% 100% 
23.6 48.2 60.7 70.8 82.6 </code></pre>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb480-1" data-line-number="1"><span class="kw">quantile</span>(z)</a></code></pre></div>
<pre><code>Error in quantile.default(z): missing values and NaN&#39;s not allowed if &#39;na.rm&#39; is FALSE</code></pre>
<div class="sourceCode" id="cb482"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb482-1" data-line-number="1"><span class="kw">quantile</span>(z, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
<pre><code>  0%  25%  50%  75% 100% 
23.6 48.2 60.8 70.8 82.6 </code></pre>
<p>So <code>quantile()</code> simply will not operate in the presence of <code>NA</code>s unless <code>na.rm = TRUE</code>. How shall we modify our function?</p>
<p>If we wanted to hardwire <code>na.rm = TRUE</code>, we could. Focus on our call to <code>quantile()</code> inside our function definition.</p>
<div class="sourceCode" id="cb484"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb484-1" data-line-number="1">qdiff4 &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) {</a>
<a class="sourceLine" id="cb484-2" data-line-number="2">  <span class="kw">stopifnot</span>(<span class="kw">is.numeric</span>(x))</a>
<a class="sourceLine" id="cb484-3" data-line-number="3">  the_quantiles &lt;-<span class="st"> </span><span class="kw">quantile</span>(x, probs, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb484-4" data-line-number="4">  <span class="kw">max</span>(the_quantiles) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(the_quantiles)</a>
<a class="sourceLine" id="cb484-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb484-6" data-line-number="6"><span class="kw">qdiff4</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<pre><code>[1] 59</code></pre>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb486-1" data-line-number="1"><span class="kw">qdiff4</span>(z)</a></code></pre></div>
<pre><code>[1] 59</code></pre>
<p>This works but it is dangerous to invert the default behavior of a well-known built-in function and to provide the user with no way to override this.</p>
<p>We could add an <code>na.rm =</code> argument to our own function. We might even enforce our preferred default – but at least we’re giving the user a way to control the behavior around <code>NA</code>s.</p>
<div class="sourceCode" id="cb488"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb488-1" data-line-number="1">qdiff5 &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>) {</a>
<a class="sourceLine" id="cb488-2" data-line-number="2">  <span class="kw">stopifnot</span>(<span class="kw">is.numeric</span>(x))</a>
<a class="sourceLine" id="cb488-3" data-line-number="3">  the_quantiles &lt;-<span class="st"> </span><span class="kw">quantile</span>(x, probs, <span class="dt">na.rm =</span> na.rm)</a>
<a class="sourceLine" id="cb488-4" data-line-number="4">  <span class="kw">max</span>(the_quantiles) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(the_quantiles)</a>
<a class="sourceLine" id="cb488-5" data-line-number="5">}</a>
<a class="sourceLine" id="cb488-6" data-line-number="6"><span class="kw">qdiff5</span>(gapminder<span class="op">$</span>lifeExp)</a></code></pre></div>
<pre><code>[1] 59</code></pre>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb490-1" data-line-number="1"><span class="kw">qdiff5</span>(z)</a></code></pre></div>
<pre><code>[1] 59</code></pre>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb492-1" data-line-number="1"><span class="kw">qdiff5</span>(z, <span class="dt">na.rm =</span> <span class="ot">FALSE</span>)</a></code></pre></div>
<pre><code>Error in quantile.default(x, probs, na.rm = na.rm): missing values and NaN&#39;s not allowed if &#39;na.rm&#39; is FALSE</code></pre>
</div>
<div id="the-useful-but-mysterious-...-argument" class="section level2">
<h2><span class="header-section-number">6.25</span> The useful but mysterious <code>...</code> argument</h2>
<p>You probably could have lived a long and happy life without knowing there are at least 9 different algorithms for computing quantiles. [Go read about the <code>type</code> argument][rdocs-quantile] of <code>quantile()</code>. TLDR: If a quantile is not unambiguously equal to an observed data point, you must somehow average two data points. You can weight this average different ways, depending on the rest of the data, and <code>type =</code> controls this.</p>
<p>Let’s say we want to give the user of our function the ability to specify how the quantiles are computed, but we want to accomplish with as little fuss as possible. In fact, we don’t even want to clutter our function’s interface with this! This calls for the very special <code>...</code> argument. In English, this set of three dots is frequently called an “ellipsis”.</p>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb494-1" data-line-number="1">qdiff6 &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>), <span class="dt">na.rm =</span> <span class="ot">TRUE</span>, ...) {</a>
<a class="sourceLine" id="cb494-2" data-line-number="2">  the_quantiles &lt;-<span class="st"> </span><span class="kw">quantile</span>(<span class="dt">x =</span> x, <span class="dt">probs =</span> probs, <span class="dt">na.rm =</span> na.rm, ...)</a>
<a class="sourceLine" id="cb494-3" data-line-number="3">  <span class="kw">max</span>(the_quantiles) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(the_quantiles)</a>
<a class="sourceLine" id="cb494-4" data-line-number="4">}</a></code></pre></div>
<p>The practical significance of the <code>type =</code> argument is virtually nonexistent, so we can’t demo with the Gapminder data. Thanks to [@wrathematics][twitter-wrathematics], here’s a small example where we can (barely) detect a difference due to <code>type</code>.</p>
<div class="sourceCode" id="cb495"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb495-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">1234</span>)</a>
<a class="sourceLine" id="cb495-2" data-line-number="2">z &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">10</span>)</a>
<a class="sourceLine" id="cb495-3" data-line-number="3"><span class="kw">quantile</span>(z, <span class="dt">type =</span> <span class="dv">1</span>)</a></code></pre></div>
<pre><code>    0%    25%    50%    75%   100% 
-2.346 -0.890 -0.564  0.429  1.084 </code></pre>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb497-1" data-line-number="1"><span class="kw">quantile</span>(z, <span class="dt">type =</span> <span class="dv">4</span>)</a></code></pre></div>
<pre><code>    0%    25%    50%    75%   100% 
-2.346 -1.049 -0.564  0.353  1.084 </code></pre>
<div class="sourceCode" id="cb499"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb499-1" data-line-number="1"><span class="kw">all.equal</span>(<span class="kw">quantile</span>(z, <span class="dt">type =</span> <span class="dv">1</span>), <span class="kw">quantile</span>(z, <span class="dt">type =</span> <span class="dv">4</span>))</a></code></pre></div>
<pre><code>[1] &quot;Mean relative difference: 0.178&quot;</code></pre>
<p>Now we can call our function, requesting that quantiles be computed in different ways.</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb501-1" data-line-number="1"><span class="kw">qdiff6</span>(z, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="fl">0.25</span>, <span class="fl">0.75</span>), <span class="dt">type =</span> <span class="dv">1</span>)</a></code></pre></div>
<pre><code>[1] 1.32</code></pre>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb503-1" data-line-number="1"><span class="kw">qdiff6</span>(z, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="fl">0.25</span>, <span class="fl">0.75</span>), <span class="dt">type =</span> <span class="dv">4</span>)</a></code></pre></div>
<pre><code>[1] 1.4</code></pre>
<p>While the difference may be subtle, <strong>it’s there</strong>. Marvel at the fact that we have passed <code>type = 1</code> through to <code>quantile()</code> <em>even though it was not a formal argument of our own function</em>.</p>
<p>The special argument <code>...</code> is very useful when you want the ability to pass arbitrary arguments down to another function, but without constantly expanding the formal arguments to your function. This leaves you with a less cluttered function definition and gives you future flexibility to specify these arguments only when you need to.</p>
<p>You will also encounter the <code>...</code> argument in many built-in functions – read up on [<code>c()</code>][rdocs-c] or [<code>list()</code>][rdocs-list] – and now you have a better sense of what it means. It is not a breezy “and so on and so forth.”</p>
<p>There are also downsides to <code>...</code>, so use it with intention. In a package, you will have to work harder to create truly informative documentation for your user. Also, the quiet, absorbent properties of <code>...</code> mean it can sometimes silently swallow other named arguments, when the user has a typo in the name. Depending on whether or how this fails, it can be a little tricky to find out what went wrong.</p>
<p>The <a href="https://ellipsis.r-lib.org">ellipsis package</a> provides tools that help package developers use <code>...</code> more safely. The in-progress tidyverse principles guide provides further guidance on the design of functions that take <code>...</code> in <a href="https://principles.tidyverse.org/dots-position.html">Data, dots, details</a>.</p>
</div>
<div id="use-testthat-for-formal-unit-tests" class="section level2">
<h2><span class="header-section-number">6.26</span> Use testthat for formal unit tests</h2>
<p>Until now, we’ve relied on informal tests of our evolving function. If you are going to use a function a lot, especially if it is part of a package, it is wise to use formal unit tests.</p>
<p>The [testthat][testthat-web] package ([CRAN][testthat-cran]; [GitHub][testthat-github]) provides excellent facilities for this, with a distinct emphasis on automated unit testing of entire packages. However, we can take it out for a test drive even with our one measly function.</p>
<p>We will construct a test with <code>test_that()</code> and, within it, we put one or more <em>expectations</em> that check actual against expected results. You simply harden your informal, interactive tests into formal unit tests. Here are some examples of tests and indicative expectations.</p>
<div class="sourceCode" id="cb505"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb505-1" data-line-number="1"><span class="kw">library</span>(testthat)</a>
<a class="sourceLine" id="cb505-2" data-line-number="2"></a>
<a class="sourceLine" id="cb505-3" data-line-number="3"><span class="kw">test_that</span>(<span class="st">&#39;invalid args are detected&#39;</span>, {</a>
<a class="sourceLine" id="cb505-4" data-line-number="4">  <span class="kw">expect_error</span>(<span class="kw">qdiff6</span>(<span class="st">&quot;eggplants are purple&quot;</span>))</a>
<a class="sourceLine" id="cb505-5" data-line-number="5">  <span class="kw">expect_error</span>(<span class="kw">qdiff6</span>(iris))</a>
<a class="sourceLine" id="cb505-6" data-line-number="6">})</a>
<a class="sourceLine" id="cb505-7" data-line-number="7"></a>
<a class="sourceLine" id="cb505-8" data-line-number="8"><span class="kw">test_that</span>(<span class="st">&#39;NA handling works&#39;</span>, {</a>
<a class="sourceLine" id="cb505-9" data-line-number="9">  <span class="kw">expect_error</span>(<span class="kw">qdiff6</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="ot">NA</span>), <span class="dt">na.rm =</span> <span class="ot">FALSE</span>))</a>
<a class="sourceLine" id="cb505-10" data-line-number="10">  <span class="kw">expect_equal</span>(<span class="kw">qdiff6</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="ot">NA</span>)), <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb505-11" data-line-number="11">})</a></code></pre></div>
<p>No news is good news! Let’s see what test failure would look like. Let’s revert to a version of our function that does no <code>NA</code> handling, then test for proper <code>NA</code> handling. We can watch it fail.</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb506-1" data-line-number="1">qdiff_no_NA &lt;-<span class="st"> </span><span class="cf">function</span>(x, <span class="dt">probs =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) {</a>
<a class="sourceLine" id="cb506-2" data-line-number="2">  the_quantiles &lt;-<span class="st"> </span><span class="kw">quantile</span>(<span class="dt">x =</span> x, <span class="dt">probs =</span> probs)</a>
<a class="sourceLine" id="cb506-3" data-line-number="3">  <span class="kw">max</span>(the_quantiles) <span class="op">-</span><span class="st"> </span><span class="kw">min</span>(the_quantiles)</a>
<a class="sourceLine" id="cb506-4" data-line-number="4">}</a>
<a class="sourceLine" id="cb506-5" data-line-number="5"></a>
<a class="sourceLine" id="cb506-6" data-line-number="6"><span class="kw">test_that</span>(<span class="st">&#39;NA handling works&#39;</span>, {</a>
<a class="sourceLine" id="cb506-7" data-line-number="7">  <span class="kw">expect_that</span>(<span class="kw">qdiff_no_NA</span>(<span class="kw">c</span>(<span class="dv">1</span><span class="op">:</span><span class="dv">5</span>, <span class="ot">NA</span>)), <span class="kw">equals</span>(<span class="dv">4</span>))</a>
<a class="sourceLine" id="cb506-8" data-line-number="8">})</a></code></pre></div>
<p>Similar to the advice to use assertions in data analytical scripts, I recommend you use unit tests to monitor the behavior of functions you (or others) will use often. If your tests cover the function’s important behavior, then you can edit the internals freely. You’ll rest easy in the knowledge that, if you broke anything important, the tests will fail and alert you to the problem. A function that is important enough for unit tests probably also belongs in a package, where there are obvious mechanisms for running the tests as part of overall package checks.</p>
<!--JB:

## other content

match.arg()

defaulting to NULL then checking is.null() and take it from there

-->
</div>
<div id="resources-3" class="section level2">
<h2><span class="header-section-number">6.27</span> Resources</h2>
<ul>
<li>Hadley Wickham’s book [Advanced R][adv-r] <span class="citation">(<span class="citeproc-not-found" data-reference-id="wickham2015a"><strong>???</strong></span>)</span>
<ul>
<li>Section on [function arguments][adv-r-fxn-args]</li>
</ul></li>
<li>Unit testing with testthat
<ul>
<li>On [CRAN][testthat-cran], development on [GitHub][testthat-github], main [webpage][testthat-web]</li>
</ul></li>
<li>Wickham and Bryan’s [R Packages][r-pkgs2] book <span class="citation">(<span class="citeproc-not-found" data-reference-id="wickham-unpub"><strong>???</strong></span>)</span>
<ul>
<li><a href="https://r-pkgs.org/tests.html">Testing chapter</a></li>
</ul></li>
<li>Wickham’s [testthat: Get Started with Testing][testthat-article] article in The R Journal <span class="citation">(<span class="citeproc-not-found" data-reference-id="wickham2011b"><strong>???</strong></span>)</span>. Maybe this is completely superseded by the newer chapter above? Be aware that parts could be out of date, but I recall it was a helpful read.</li>
</ul>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="5-tidy.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="7-probability.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
