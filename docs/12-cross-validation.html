<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 12 Cross validation | Preceptor’s Primer for Bayesian Data Science</title>
  <meta name="description" content="Chapter 12 Cross validation | Preceptor’s Primer for Bayesian Data Science" />
  <meta name="generator" content="bookdown 0.14 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 12 Cross validation | Preceptor’s Primer for Bayesian Data Science" />
  <meta property="og:type" content="book" />
  
  
  
  <meta name="github-repo" content="davidkane9/PPBDS" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 12 Cross validation | Preceptor’s Primer for Bayesian Data Science" />
  
  
  

<meta name="author" content="David Kane" />


<meta name="date" content="2019-12-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="11-introduction-to-machine-learning.html"/>
<link rel="next" href="13-examples-of-algorithms.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/dygraphs-1.1.1/dygraph.css" rel="stylesheet" />
<script src="libs/dygraphs-1.1.1/dygraph-combined.js"></script>
<script src="libs/dygraphs-1.1.1/shapes.js"></script>
<script src="libs/moment-2.8.4/moment.js"></script>
<script src="libs/moment-timezone-0.2.5/moment-timezone-with-data.js"></script>
<script src="libs/moment-fquarter-1.0.0/moment-fquarter.min.js"></script>
<script src="libs/dygraphs-binding-1.1.1.6/dygraphs.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Forward</a></li>
<li class="chapter" data-level="" data-path="acknowledgements.html"><a href="acknowledgements.html"><i class="fa fa-check"></i>Acknowledgements</a></li>
<li class="chapter" data-level="1" data-path="1-getting-started.html"><a href="1-getting-started.html"><i class="fa fa-check"></i><b>1</b> Getting Started with Data in R</a><ul>
<li class="chapter" data-level="1.1" data-path="1-getting-started.html"><a href="1-getting-started.html#r-rstudio"><i class="fa fa-check"></i><b>1.1</b> What are R and RStudio?</a><ul>
<li class="chapter" data-level="1.1.1" data-path="1-getting-started.html"><a href="1-getting-started.html#installing"><i class="fa fa-check"></i><b>1.1.1</b> Installing R and RStudio</a></li>
<li class="chapter" data-level="1.1.2" data-path="1-getting-started.html"><a href="1-getting-started.html#using-r-via-rstudio"><i class="fa fa-check"></i><b>1.1.2</b> Using R via RStudio</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="1-getting-started.html"><a href="1-getting-started.html#code"><i class="fa fa-check"></i><b>1.2</b> How do I code in R?</a><ul>
<li class="chapter" data-level="1.2.1" data-path="1-getting-started.html"><a href="1-getting-started.html#programming-concepts"><i class="fa fa-check"></i><b>1.2.1</b> Basic programming concepts and terminology</a></li>
<li class="chapter" data-level="1.2.2" data-path="1-getting-started.html"><a href="1-getting-started.html#messages"><i class="fa fa-check"></i><b>1.2.2</b> Errors, warnings, and messages</a></li>
<li class="chapter" data-level="1.2.3" data-path="1-getting-started.html"><a href="1-getting-started.html#tips-code"><i class="fa fa-check"></i><b>1.2.3</b> Tips on learning to code</a></li>
</ul></li>
<li class="chapter" data-level="1.3" data-path="1-getting-started.html"><a href="1-getting-started.html#packages"><i class="fa fa-check"></i><b>1.3</b> What are R packages?</a><ul>
<li class="chapter" data-level="1.3.1" data-path="1-getting-started.html"><a href="1-getting-started.html#package-installation"><i class="fa fa-check"></i><b>1.3.1</b> Package installation</a></li>
<li class="chapter" data-level="1.3.2" data-path="1-getting-started.html"><a href="1-getting-started.html#package-loading"><i class="fa fa-check"></i><b>1.3.2</b> Package loading</a></li>
<li class="chapter" data-level="1.3.3" data-path="1-getting-started.html"><a href="1-getting-started.html#package-use"><i class="fa fa-check"></i><b>1.3.3</b> Package use</a></li>
</ul></li>
<li class="chapter" data-level="1.4" data-path="1-getting-started.html"><a href="1-getting-started.html#nycflights13"><i class="fa fa-check"></i><b>1.4</b> Explore your first datasets</a><ul>
<li class="chapter" data-level="1.4.1" data-path="1-getting-started.html"><a href="1-getting-started.html#nycflights13-package"><i class="fa fa-check"></i><b>1.4.1</b> <code>nycflights13</code> package</a></li>
<li class="chapter" data-level="1.4.2" data-path="1-getting-started.html"><a href="1-getting-started.html#flights-data-frame"><i class="fa fa-check"></i><b>1.4.2</b> <code>flights</code> data frame</a></li>
<li class="chapter" data-level="1.4.3" data-path="1-getting-started.html"><a href="1-getting-started.html#exploredataframes"><i class="fa fa-check"></i><b>1.4.3</b> Exploring data frames</a></li>
<li class="chapter" data-level="1.4.4" data-path="1-getting-started.html"><a href="1-getting-started.html#identification-vs-measurement-variables"><i class="fa fa-check"></i><b>1.4.4</b> Identification and measurement variables</a></li>
<li class="chapter" data-level="1.4.5" data-path="1-getting-started.html"><a href="1-getting-started.html#help-files"><i class="fa fa-check"></i><b>1.4.5</b> Help files</a></li>
</ul></li>
<li class="chapter" data-level="1.5" data-path="1-getting-started.html"><a href="1-getting-started.html#conclusion"><i class="fa fa-check"></i><b>1.5</b> Conclusion</a><ul>
<li class="chapter" data-level="1.5.1" data-path="1-getting-started.html"><a href="1-getting-started.html#additional-resources"><i class="fa fa-check"></i><b>1.5.1</b> Additional resources</a></li>
<li class="chapter" data-level="1.5.2" data-path="1-getting-started.html"><a href="1-getting-started.html#whats-to-come"><i class="fa fa-check"></i><b>1.5.2</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="2-viz.html"><a href="2-viz.html"><i class="fa fa-check"></i><b>2</b> Data Visualization</a><ul>
<li class="chapter" data-level="" data-path="2-viz.html"><a href="2-viz.html#needed-packages"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="2.1" data-path="2-viz.html"><a href="2-viz.html#grammarofgraphics"><i class="fa fa-check"></i><b>2.1</b> The grammar of graphics</a><ul>
<li class="chapter" data-level="2.1.1" data-path="2-viz.html"><a href="2-viz.html#components-of-the-grammar"><i class="fa fa-check"></i><b>2.1.1</b> Components of the grammar</a></li>
<li class="chapter" data-level="2.1.2" data-path="2-viz.html"><a href="2-viz.html#gapminder"><i class="fa fa-check"></i><b>2.1.2</b> Gapminder data</a></li>
<li class="chapter" data-level="2.1.3" data-path="2-viz.html"><a href="2-viz.html#other-components"><i class="fa fa-check"></i><b>2.1.3</b> Other components</a></li>
<li class="chapter" data-level="2.1.4" data-path="2-viz.html"><a href="2-viz.html#ggplot2-package"><i class="fa fa-check"></i><b>2.1.4</b> ggplot2 package</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="2-viz.html"><a href="2-viz.html#FiveNG"><i class="fa fa-check"></i><b>2.2</b> Five named graphs - the 5NG</a></li>
<li class="chapter" data-level="2.3" data-path="2-viz.html"><a href="2-viz.html#scatterplots"><i class="fa fa-check"></i><b>2.3</b> 5NG#1: Scatterplots</a><ul>
<li class="chapter" data-level="2.3.1" data-path="2-viz.html"><a href="2-viz.html#geompoint"><i class="fa fa-check"></i><b>2.3.1</b> Scatterplots via <code>geom_point</code></a></li>
<li class="chapter" data-level="2.3.2" data-path="2-viz.html"><a href="2-viz.html#overplotting"><i class="fa fa-check"></i><b>2.3.2</b> Overplotting</a></li>
<li class="chapter" data-level="2.3.3" data-path="2-viz.html"><a href="2-viz.html#summary"><i class="fa fa-check"></i><b>2.3.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="2-viz.html"><a href="2-viz.html#linegraphs"><i class="fa fa-check"></i><b>2.4</b> 5NG#2: Linegraphs</a><ul>
<li class="chapter" data-level="2.4.1" data-path="2-viz.html"><a href="2-viz.html#geomline"><i class="fa fa-check"></i><b>2.4.1</b> Linegraphs via <code>geom_line</code></a></li>
<li class="chapter" data-level="2.4.2" data-path="2-viz.html"><a href="2-viz.html#summary-1"><i class="fa fa-check"></i><b>2.4.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="2-viz.html"><a href="2-viz.html#histograms"><i class="fa fa-check"></i><b>2.5</b> 5NG#3: Histograms</a><ul>
<li class="chapter" data-level="2.5.1" data-path="2-viz.html"><a href="2-viz.html#geomhistogram"><i class="fa fa-check"></i><b>2.5.1</b> Histograms via <code>geom_histogram</code></a></li>
<li class="chapter" data-level="2.5.2" data-path="2-viz.html"><a href="2-viz.html#adjustbins"><i class="fa fa-check"></i><b>2.5.2</b> Adjusting the bins</a></li>
<li class="chapter" data-level="2.5.3" data-path="2-viz.html"><a href="2-viz.html#summary-2"><i class="fa fa-check"></i><b>2.5.3</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="2-viz.html"><a href="2-viz.html#facets"><i class="fa fa-check"></i><b>2.6</b> Facets</a></li>
<li class="chapter" data-level="2.7" data-path="2-viz.html"><a href="2-viz.html#boxplots"><i class="fa fa-check"></i><b>2.7</b> 5NG#4: Boxplots</a><ul>
<li class="chapter" data-level="2.7.1" data-path="2-viz.html"><a href="2-viz.html#geomboxplot"><i class="fa fa-check"></i><b>2.7.1</b> Boxplots via <code>geom_boxplot</code></a></li>
<li class="chapter" data-level="2.7.2" data-path="2-viz.html"><a href="2-viz.html#summary-3"><i class="fa fa-check"></i><b>2.7.2</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="2-viz.html"><a href="2-viz.html#geombar"><i class="fa fa-check"></i><b>2.8</b> 5NG#5: Barplots</a><ul>
<li class="chapter" data-level="2.8.1" data-path="2-viz.html"><a href="2-viz.html#barplots-via-geom_bar-or-geom_col"><i class="fa fa-check"></i><b>2.8.1</b> Barplots via <code>geom_bar</code> or <code>geom_col</code></a></li>
<li class="chapter" data-level="2.8.2" data-path="2-viz.html"><a href="2-viz.html#must-avoid-pie-charts"><i class="fa fa-check"></i><b>2.8.2</b> Must avoid pie charts!</a></li>
<li class="chapter" data-level="2.8.3" data-path="2-viz.html"><a href="2-viz.html#two-categ-barplot"><i class="fa fa-check"></i><b>2.8.3</b> Two categorical variables</a></li>
<li class="chapter" data-level="2.8.4" data-path="2-viz.html"><a href="2-viz.html#summary-4"><i class="fa fa-check"></i><b>2.8.4</b> Summary</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="2-viz.html"><a href="2-viz.html#conclusion-1"><i class="fa fa-check"></i><b>2.9</b> Conclusion</a><ul>
<li class="chapter" data-level="2.9.1" data-path="2-viz.html"><a href="2-viz.html#summary-table"><i class="fa fa-check"></i><b>2.9.1</b> Summary table</a></li>
<li class="chapter" data-level="2.9.2" data-path="2-viz.html"><a href="2-viz.html#function-argument-specification"><i class="fa fa-check"></i><b>2.9.2</b> Function argument specification</a></li>
<li class="chapter" data-level="2.9.3" data-path="2-viz.html"><a href="2-viz.html#additional-resources-1"><i class="fa fa-check"></i><b>2.9.3</b> Additional resources</a></li>
<li class="chapter" data-level="2.9.4" data-path="2-viz.html"><a href="2-viz.html#whats-to-come-3"><i class="fa fa-check"></i><b>2.9.4</b> What’s to come</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html"><i class="fa fa-check"></i><b>3</b> Productivity Tools</a><ul>
<li class="chapter" data-level="3.1" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#accessing-the-terminal-and-installing-git"><i class="fa fa-check"></i><b>3.1</b> Accessing the terminal and installing Git</a></li>
<li class="chapter" data-level="3.2" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#terminal-on-mac"><i class="fa fa-check"></i><b>3.2</b> Accessing the terminal on a Mac</a></li>
<li class="chapter" data-level="3.3" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#installing-git-on-the-mac"><i class="fa fa-check"></i><b>3.3</b> Installing Git on the Mac</a></li>
<li class="chapter" data-level="3.4" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#installing-git-and-git-bash-on-windows"><i class="fa fa-check"></i><b>3.4</b> Installing Git and Git Bash on Windows</a></li>
<li class="chapter" data-level="3.5" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#terminal-on-windows"><i class="fa fa-check"></i><b>3.5</b> Accessing the terminal on Windows</a></li>
<li class="chapter" data-level="3.6" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#unix"><i class="fa fa-check"></i><b>3.6</b> Organizing with Unix</a></li>
<li class="chapter" data-level="3.7" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#naming-convention"><i class="fa fa-check"></i><b>3.7</b> Naming convention</a></li>
<li class="chapter" data-level="3.8" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#the-terminal"><i class="fa fa-check"></i><b>3.8</b> The terminal</a></li>
<li class="chapter" data-level="3.9" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#filesystem"><i class="fa fa-check"></i><b>3.9</b> The filesystem</a><ul>
<li class="chapter" data-level="3.9.1" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#directories-and-subdirectories"><i class="fa fa-check"></i><b>3.9.1</b> Directories and subdirectories</a></li>
<li class="chapter" data-level="3.9.2" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#the-home-directory"><i class="fa fa-check"></i><b>3.9.2</b> The home directory</a></li>
<li class="chapter" data-level="3.9.3" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#working-directory"><i class="fa fa-check"></i><b>3.9.3</b> Working directory</a></li>
<li class="chapter" data-level="3.9.4" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#paths"><i class="fa fa-check"></i><b>3.9.4</b> Paths</a></li>
</ul></li>
<li class="chapter" data-level="3.10" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#unix-commands"><i class="fa fa-check"></i><b>3.10</b> Unix commands</a><ul>
<li class="chapter" data-level="3.10.1" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#ls-listing-directory-content"><i class="fa fa-check"></i><b>3.10.1</b> <code>ls</code>: Listing directory content</a></li>
<li class="chapter" data-level="3.10.2" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#mkdir-and-rmdir-make-and-remove-a-directory"><i class="fa fa-check"></i><b>3.10.2</b> <code>mkdir</code> and <code>rmdir</code>: make and remove a directory</a></li>
<li class="chapter" data-level="3.10.3" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#cd-navigating-the-filesystem-by-changing-directories"><i class="fa fa-check"></i><b>3.10.3</b> <code>cd</code>: navigating the filesystem by changing directories</a></li>
</ul></li>
<li class="chapter" data-level="3.11" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#some-examples"><i class="fa fa-check"></i><b>3.11</b> Some examples</a></li>
<li class="chapter" data-level="3.12" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#more-unix-commands"><i class="fa fa-check"></i><b>3.12</b> More Unix commands</a><ul>
<li class="chapter" data-level="3.12.1" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#mv-moving-files"><i class="fa fa-check"></i><b>3.12.1</b> <code>mv</code>: moving files</a></li>
<li class="chapter" data-level="3.12.2" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#cp-copying-files"><i class="fa fa-check"></i><b>3.12.2</b> <code>cp</code>: copying files</a></li>
<li class="chapter" data-level="3.12.3" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#rm-removing-files"><i class="fa fa-check"></i><b>3.12.3</b> <code>rm</code>: removing files</a></li>
<li class="chapter" data-level="3.12.4" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#less-looking-at-a-file"><i class="fa fa-check"></i><b>3.12.4</b> <code>less</code>: looking at a file</a></li>
</ul></li>
<li class="chapter" data-level="3.13" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#prep-project"><i class="fa fa-check"></i><b>3.13</b> Preparing for a data science project</a></li>
<li class="chapter" data-level="3.14" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#advanced-unix"><i class="fa fa-check"></i><b>3.14</b> Advanced Unix</a><ul>
<li class="chapter" data-level="3.14.1" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#arguments"><i class="fa fa-check"></i><b>3.14.1</b> Arguments</a></li>
<li class="chapter" data-level="3.14.2" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#getting-help"><i class="fa fa-check"></i><b>3.14.2</b> Getting help</a></li>
<li class="chapter" data-level="3.14.3" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#pipes"><i class="fa fa-check"></i><b>3.14.3</b> Pipes</a></li>
<li class="chapter" data-level="3.14.4" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#wild-cards"><i class="fa fa-check"></i><b>3.14.4</b> Wild cards</a></li>
<li class="chapter" data-level="3.14.5" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#environment-variables"><i class="fa fa-check"></i><b>3.14.5</b> Environment variables</a></li>
<li class="chapter" data-level="3.14.6" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#shells"><i class="fa fa-check"></i><b>3.14.6</b> Shells</a></li>
<li class="chapter" data-level="3.14.7" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#executables"><i class="fa fa-check"></i><b>3.14.7</b> Executables</a></li>
<li class="chapter" data-level="3.14.8" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#permissions-and-file-types"><i class="fa fa-check"></i><b>3.14.8</b> Permissions and file types</a></li>
<li class="chapter" data-level="3.14.9" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#commands-you-should-learn"><i class="fa fa-check"></i><b>3.14.9</b> Commands you should learn</a></li>
<li class="chapter" data-level="3.14.10" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#file-manipulation-in-r"><i class="fa fa-check"></i><b>3.14.10</b> File manipulation in R</a></li>
</ul></li>
<li class="chapter" data-level="3.15" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#git"><i class="fa fa-check"></i><b>3.15</b> Git and GitHub</a></li>
<li class="chapter" data-level="3.16" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#why-use-git-and-github"><i class="fa fa-check"></i><b>3.16</b> Why use Git and GitHub?</a></li>
<li class="chapter" data-level="3.17" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#github-accounts"><i class="fa fa-check"></i><b>3.17</b> GitHub accounts</a></li>
<li class="chapter" data-level="3.18" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#github-repos"><i class="fa fa-check"></i><b>3.18</b> GitHub repositories</a></li>
<li class="chapter" data-level="3.19" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#git-overview"><i class="fa fa-check"></i><b>3.19</b> Overview of Git</a><ul>
<li class="chapter" data-level="3.19.1" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#clone"><i class="fa fa-check"></i><b>3.19.1</b> Clone</a></li>
</ul></li>
<li class="chapter" data-level="3.20" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#init"><i class="fa fa-check"></i><b>3.20</b> Initializing a Git directory</a></li>
<li class="chapter" data-level="3.21" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#rstudio-git"><i class="fa fa-check"></i><b>3.21</b> Using Git and GitHub in RStudio</a></li>
<li class="chapter" data-level="3.22" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#reproducible-projects-with-rstudio-and-r-markdown"><i class="fa fa-check"></i><b>3.22</b> Reproducible projects with RStudio and R markdown</a></li>
<li class="chapter" data-level="3.23" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#rstudio-projects"><i class="fa fa-check"></i><b>3.23</b> RStudio projects</a></li>
<li class="chapter" data-level="3.24" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#r-markdown"><i class="fa fa-check"></i><b>3.24</b> R markdown</a><ul>
<li class="chapter" data-level="3.24.1" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#the-header"><i class="fa fa-check"></i><b>3.24.1</b> The header</a></li>
<li class="chapter" data-level="3.24.2" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#r-code-chunks"><i class="fa fa-check"></i><b>3.24.2</b> R code chunks</a></li>
<li class="chapter" data-level="3.24.3" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#global-options"><i class="fa fa-check"></i><b>3.24.3</b> Global options</a></li>
<li class="chapter" data-level="3.24.4" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#knitr"><i class="fa fa-check"></i><b>3.24.4</b> knitR</a></li>
<li class="chapter" data-level="3.24.5" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#more-on-r-markdown"><i class="fa fa-check"></i><b>3.24.5</b> More on R markdown</a></li>
</ul></li>
<li class="chapter" data-level="3.25" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#organizing"><i class="fa fa-check"></i><b>3.25</b> Organizing a data science project</a><ul>
<li class="chapter" data-level="3.25.1" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#create-directories-in-unix"><i class="fa fa-check"></i><b>3.25.1</b> Create directories in Unix</a></li>
<li class="chapter" data-level="3.25.2" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#create-an-rstudio-project"><i class="fa fa-check"></i><b>3.25.2</b> Create an RStudio project</a></li>
<li class="chapter" data-level="3.25.3" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#edit-some-r-scripts"><i class="fa fa-check"></i><b>3.25.3</b> Edit some R scripts</a></li>
<li class="chapter" data-level="3.25.4" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#create-some-more-directories-using-unix"><i class="fa fa-check"></i><b>3.25.4</b> Create some more directories using Unix</a></li>
<li class="chapter" data-level="3.25.5" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#add-a-readme-file"><i class="fa fa-check"></i><b>3.25.5</b> Add a README file</a></li>
<li class="chapter" data-level="3.25.6" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#initializing-a-git-directory"><i class="fa fa-check"></i><b>3.25.6</b> Initializing a Git directory</a></li>
<li class="chapter" data-level="3.25.7" data-path="3-productivity-tools.html"><a href="3-productivity-tools.html#add-commit-and-push-files-using-rstudio"><i class="fa fa-check"></i><b>3.25.7</b> Add, commit, and push files using RStudio</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-wrangling.html"><a href="4-wrangling.html"><i class="fa fa-check"></i><b>4</b> Data Wrangling</a><ul>
<li class="chapter" data-level="" data-path="4-wrangling.html"><a href="4-wrangling.html#needed-packages-1"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="4.1" data-path="4-wrangling.html"><a href="4-wrangling.html#piping"><i class="fa fa-check"></i><b>4.1</b> The pipe operator: <code>%&gt;%</code></a></li>
<li class="chapter" data-level="4.2" data-path="4-wrangling.html"><a href="4-wrangling.html#filter"><i class="fa fa-check"></i><b>4.2</b> <code>filter</code> rows</a></li>
<li class="chapter" data-level="4.3" data-path="4-wrangling.html"><a href="4-wrangling.html#summarize"><i class="fa fa-check"></i><b>4.3</b> <code>summarize</code> variables</a></li>
<li class="chapter" data-level="4.4" data-path="4-wrangling.html"><a href="4-wrangling.html#groupby"><i class="fa fa-check"></i><b>4.4</b> <code>group_by</code> rows</a><ul>
<li class="chapter" data-level="4.4.1" data-path="4-wrangling.html"><a href="4-wrangling.html#grouping-by-more-than-one-variable"><i class="fa fa-check"></i><b>4.4.1</b> Grouping by more than one variable</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="4-wrangling.html"><a href="4-wrangling.html#mutate"><i class="fa fa-check"></i><b>4.5</b> <code>mutate</code> existing variables</a></li>
<li class="chapter" data-level="4.6" data-path="4-wrangling.html"><a href="4-wrangling.html#arrange"><i class="fa fa-check"></i><b>4.6</b> <code>arrange</code> and sort rows</a></li>
<li class="chapter" data-level="4.7" data-path="4-wrangling.html"><a href="4-wrangling.html#joins"><i class="fa fa-check"></i><b>4.7</b> <code>join</code> data frames</a><ul>
<li class="chapter" data-level="4.7.1" data-path="4-wrangling.html"><a href="4-wrangling.html#matching-key-variable-names"><i class="fa fa-check"></i><b>4.7.1</b> Matching “key” variable names</a></li>
<li class="chapter" data-level="4.7.2" data-path="4-wrangling.html"><a href="4-wrangling.html#diff-key"><i class="fa fa-check"></i><b>4.7.2</b> Different “key” variable names</a></li>
<li class="chapter" data-level="4.7.3" data-path="4-wrangling.html"><a href="4-wrangling.html#multiple-key-variables"><i class="fa fa-check"></i><b>4.7.3</b> Multiple “key” variables</a></li>
<li class="chapter" data-level="4.7.4" data-path="4-wrangling.html"><a href="4-wrangling.html#normal-forms"><i class="fa fa-check"></i><b>4.7.4</b> Normal forms</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="4-wrangling.html"><a href="4-wrangling.html#other-verbs"><i class="fa fa-check"></i><b>4.8</b> Other verbs</a><ul>
<li class="chapter" data-level="4.8.1" data-path="4-wrangling.html"><a href="4-wrangling.html#select"><i class="fa fa-check"></i><b>4.8.1</b> <code>select</code> variables</a></li>
<li class="chapter" data-level="4.8.2" data-path="4-wrangling.html"><a href="4-wrangling.html#rename"><i class="fa fa-check"></i><b>4.8.2</b> <code>rename</code> variables</a></li>
<li class="chapter" data-level="4.8.3" data-path="4-wrangling.html"><a href="4-wrangling.html#top_n-values-of-a-variable"><i class="fa fa-check"></i><b>4.8.3</b> <code>top_n</code> values of a variable</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="4-wrangling.html"><a href="4-wrangling.html#conclusion-2"><i class="fa fa-check"></i><b>4.9</b> Conclusion</a><ul>
<li class="chapter" data-level="4.9.1" data-path="4-wrangling.html"><a href="4-wrangling.html#summary-table-1"><i class="fa fa-check"></i><b>4.9.1</b> Summary table</a></li>
<li class="chapter" data-level="4.9.2" data-path="4-wrangling.html"><a href="4-wrangling.html#additional-resources-2"><i class="fa fa-check"></i><b>4.9.2</b> Additional resources</a></li>
<li class="chapter" data-level="4.9.3" data-path="4-wrangling.html"><a href="4-wrangling.html#whats-to-come-1"><i class="fa fa-check"></i><b>4.9.3</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-tidy.html"><a href="5-tidy.html"><i class="fa fa-check"></i><b>5</b> Data Importing and “Tidy” Data</a><ul>
<li class="chapter" data-level="" data-path="5-tidy.html"><a href="5-tidy.html#needed-packages-2"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="5.1" data-path="5-tidy.html"><a href="5-tidy.html#csv"><i class="fa fa-check"></i><b>5.1</b> Importing data</a><ul>
<li class="chapter" data-level="5.1.1" data-path="5-tidy.html"><a href="5-tidy.html#using-the-console"><i class="fa fa-check"></i><b>5.1.1</b> Using the console</a></li>
<li class="chapter" data-level="5.1.2" data-path="5-tidy.html"><a href="5-tidy.html#using-rstudios-interface"><i class="fa fa-check"></i><b>5.1.2</b> Using RStudio’s interface</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="5-tidy.html"><a href="5-tidy.html#tidy-data-ex"><i class="fa fa-check"></i><b>5.2</b> “Tidy” data</a><ul>
<li class="chapter" data-level="5.2.1" data-path="5-tidy.html"><a href="5-tidy.html#tidy-definition"><i class="fa fa-check"></i><b>5.2.1</b> Definition of “tidy” data</a></li>
<li class="chapter" data-level="5.2.2" data-path="5-tidy.html"><a href="5-tidy.html#converting-to-tidy-data"><i class="fa fa-check"></i><b>5.2.2</b> Converting to “tidy” data</a></li>
<li class="chapter" data-level="5.2.3" data-path="5-tidy.html"><a href="5-tidy.html#nycflights13-package-1"><i class="fa fa-check"></i><b>5.2.3</b> <code>nycflights13</code> package</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="5-tidy.html"><a href="5-tidy.html#case-study-tidy"><i class="fa fa-check"></i><b>5.3</b> Case study: Democracy in Guatemala</a></li>
<li class="chapter" data-level="5.4" data-path="5-tidy.html"><a href="5-tidy.html#tidyverse-package"><i class="fa fa-check"></i><b>5.4</b> <code>tidyverse</code> package</a></li>
<li class="chapter" data-level="5.5" data-path="5-tidy.html"><a href="5-tidy.html#conclusion-3"><i class="fa fa-check"></i><b>5.5</b> Conclusion</a><ul>
<li class="chapter" data-level="5.5.1" data-path="5-tidy.html"><a href="5-tidy.html#additional-resources-3"><i class="fa fa-check"></i><b>5.5.1</b> Additional resources</a></li>
<li class="chapter" data-level="5.5.2" data-path="5-tidy.html"><a href="5-tidy.html#whats-to-come-2"><i class="fa fa-check"></i><b>5.5.2</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-bayess-theorem.html"><a href="6-bayess-theorem.html"><i class="fa fa-check"></i><b>6</b> Bayes’s Theorem</a><ul>
<li class="chapter" data-level="6.1" data-path="6-bayess-theorem.html"><a href="6-bayess-theorem.html#conditional-probability"><i class="fa fa-check"></i><b>6.1</b> Conditional probability</a></li>
<li class="chapter" data-level="6.2" data-path="6-bayess-theorem.html"><a href="6-bayess-theorem.html#conjoint-probability"><i class="fa fa-check"></i><b>6.2</b> Conjoint probability</a></li>
<li class="chapter" data-level="6.3" data-path="6-bayess-theorem.html"><a href="6-bayess-theorem.html#the-cookie-problem"><i class="fa fa-check"></i><b>6.3</b> The cookie problem</a></li>
<li class="chapter" data-level="6.4" data-path="6-bayess-theorem.html"><a href="6-bayess-theorem.html#bayess-theorem-1"><i class="fa fa-check"></i><b>6.4</b> Bayes’s Theorem</a></li>
<li class="chapter" data-level="6.5" data-path="6-bayess-theorem.html"><a href="6-bayess-theorem.html#the-diachronic-interpretation"><i class="fa fa-check"></i><b>6.5</b> The diachronic interpretation</a></li>
<li class="chapter" data-level="6.6" data-path="6-bayess-theorem.html"><a href="6-bayess-theorem.html#the-mm-problem"><i class="fa fa-check"></i><b>6.6</b> The M&amp;M problem</a></li>
<li class="chapter" data-level="6.7" data-path="6-bayess-theorem.html"><a href="6-bayess-theorem.html#the-monty-hall-problem"><i class="fa fa-check"></i><b>6.7</b> The Monty Hall problem</a></li>
<li class="chapter" data-level="6.8" data-path="6-bayess-theorem.html"><a href="6-bayess-theorem.html#discussion"><i class="fa fa-check"></i><b>6.8</b> Discussion</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-sampling.html"><a href="7-sampling.html"><i class="fa fa-check"></i><b>7</b> Sampling</a><ul>
<li class="chapter" data-level="" data-path="7-sampling.html"><a href="7-sampling.html#needed-packages-3"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="7.1" data-path="7-sampling.html"><a href="7-sampling.html#sampling-activity"><i class="fa fa-check"></i><b>7.1</b> Sampling bowl activity</a><ul>
<li class="chapter" data-level="7.1.1" data-path="7-sampling.html"><a href="7-sampling.html#what-proportion-of-this-bowls-balls-are-red"><i class="fa fa-check"></i><b>7.1.1</b> What proportion of this bowl’s balls are red?</a></li>
<li class="chapter" data-level="7.1.2" data-path="7-sampling.html"><a href="7-sampling.html#using-the-shovel-once"><i class="fa fa-check"></i><b>7.1.2</b> Using the shovel once</a></li>
<li class="chapter" data-level="7.1.3" data-path="7-sampling.html"><a href="7-sampling.html#student-shovels"><i class="fa fa-check"></i><b>7.1.3</b> Using the shovel 33 times</a></li>
<li class="chapter" data-level="7.1.4" data-path="7-sampling.html"><a href="7-sampling.html#what-did-we-just-do"><i class="fa fa-check"></i><b>7.1.4</b> What did we just do?</a></li>
</ul></li>
<li class="chapter" data-level="7.2" data-path="7-sampling.html"><a href="7-sampling.html#sampling-simulation"><i class="fa fa-check"></i><b>7.2</b> Virtual sampling</a><ul>
<li class="chapter" data-level="7.2.1" data-path="7-sampling.html"><a href="7-sampling.html#using-the-virtual-shovel-once"><i class="fa fa-check"></i><b>7.2.1</b> Using the virtual shovel once</a></li>
<li class="chapter" data-level="7.2.2" data-path="7-sampling.html"><a href="7-sampling.html#using-the-virtual-shovel-33-times"><i class="fa fa-check"></i><b>7.2.2</b> Using the virtual shovel 33 times</a></li>
<li class="chapter" data-level="7.2.3" data-path="7-sampling.html"><a href="7-sampling.html#shovel-1000-times"><i class="fa fa-check"></i><b>7.2.3</b> Using the virtual shovel 1000 times</a></li>
<li class="chapter" data-level="7.2.4" data-path="7-sampling.html"><a href="7-sampling.html#different-shovels"><i class="fa fa-check"></i><b>7.2.4</b> Using different shovels</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="7-sampling.html"><a href="7-sampling.html#sampling-framework"><i class="fa fa-check"></i><b>7.3</b> Sampling framework</a><ul>
<li class="chapter" data-level="7.3.1" data-path="7-sampling.html"><a href="7-sampling.html#terminology-and-notation"><i class="fa fa-check"></i><b>7.3.1</b> Terminology and notation</a></li>
<li class="chapter" data-level="7.3.2" data-path="7-sampling.html"><a href="7-sampling.html#sampling-definitions"><i class="fa fa-check"></i><b>7.3.2</b> Statistical definitions</a></li>
<li class="chapter" data-level="7.3.3" data-path="7-sampling.html"><a href="7-sampling.html#moral-of-the-story"><i class="fa fa-check"></i><b>7.3.3</b> The moral of the story</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="7-sampling.html"><a href="7-sampling.html#sampling-case-study"><i class="fa fa-check"></i><b>7.4</b> Case study: Polls</a></li>
<li class="chapter" data-level="7.5" data-path="7-sampling.html"><a href="7-sampling.html#sampling-conclusion"><i class="fa fa-check"></i><b>7.5</b> Conclusion</a><ul>
<li class="chapter" data-level="7.5.1" data-path="7-sampling.html"><a href="7-sampling.html#sampling-conclusion-table"><i class="fa fa-check"></i><b>7.5.1</b> Sampling scenarios</a></li>
<li class="chapter" data-level="7.5.2" data-path="7-sampling.html"><a href="7-sampling.html#sampling-conclusion-central-limit-theorem"><i class="fa fa-check"></i><b>7.5.2</b> Central Limit Theorem</a></li>
<li class="chapter" data-level="7.5.3" data-path="7-sampling.html"><a href="7-sampling.html#additional-resources-4"><i class="fa fa-check"></i><b>7.5.3</b> Additional resources</a></li>
<li class="chapter" data-level="7.5.4" data-path="7-sampling.html"><a href="7-sampling.html#whats-to-come-4"><i class="fa fa-check"></i><b>7.5.4</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html"><i class="fa fa-check"></i><b>8</b> Bootstrapping and Confidence Intervals</a><ul>
<li class="chapter" data-level="" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#needed-packages-4"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="8.1" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#resampling-tactile"><i class="fa fa-check"></i><b>8.1</b> Pennies activity</a><ul>
<li class="chapter" data-level="8.1.1" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#what-is-the-average-year-on-us-pennies-in-2019"><i class="fa fa-check"></i><b>8.1.1</b> What is the average year on US pennies in 2019?</a></li>
<li class="chapter" data-level="8.1.2" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#resampling-once"><i class="fa fa-check"></i><b>8.1.2</b> Resampling once</a></li>
<li class="chapter" data-level="8.1.3" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#student-resamples"><i class="fa fa-check"></i><b>8.1.3</b> Resampling 35 times</a></li>
<li class="chapter" data-level="8.1.4" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#what-did-we-just-do-1"><i class="fa fa-check"></i><b>8.1.4</b> What did we just do?</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#resampling-simulation"><i class="fa fa-check"></i><b>8.2</b> Computer simulation of resampling</a><ul>
<li class="chapter" data-level="8.2.1" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#virtually-resampling-once"><i class="fa fa-check"></i><b>8.2.1</b> Virtually resampling once</a></li>
<li class="chapter" data-level="8.2.2" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#bootstrap-35-replicates"><i class="fa fa-check"></i><b>8.2.2</b> Virtually resampling 35 times</a></li>
<li class="chapter" data-level="8.2.3" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#bootstrap-1000-replicates"><i class="fa fa-check"></i><b>8.2.3</b> Virtually resampling 1000 times</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#ci-build-up"><i class="fa fa-check"></i><b>8.3</b> Understanding confidence intervals</a><ul>
<li class="chapter" data-level="8.3.1" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#percentile-method"><i class="fa fa-check"></i><b>8.3.1</b> Percentile method</a></li>
<li class="chapter" data-level="8.3.2" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#se-method"><i class="fa fa-check"></i><b>8.3.2</b> Standard error method</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#bootstrap-process"><i class="fa fa-check"></i><b>8.4</b> Constructing confidence intervals</a><ul>
<li class="chapter" data-level="8.4.1" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#original-workflow"><i class="fa fa-check"></i><b>8.4.1</b> Original workflow</a></li>
<li class="chapter" data-level="8.4.2" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#infer-workflow"><i class="fa fa-check"></i><b>8.4.2</b> <code>infer</code> package workflow</a></li>
<li class="chapter" data-level="8.4.3" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#percentile-method-infer"><i class="fa fa-check"></i><b>8.4.3</b> Percentile method with <code>infer</code></a></li>
<li class="chapter" data-level="8.4.4" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#infer-se"><i class="fa fa-check"></i><b>8.4.4</b> Standard error method with <code>infer</code></a></li>
</ul></li>
<li class="chapter" data-level="8.5" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#one-prop-ci"><i class="fa fa-check"></i><b>8.5</b> Interpreting confidence intervals</a><ul>
<li class="chapter" data-level="8.5.1" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#ilyas-yohan"><i class="fa fa-check"></i><b>8.5.1</b> Did the net capture the fish?</a></li>
<li class="chapter" data-level="8.5.2" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#shorthand"><i class="fa fa-check"></i><b>8.5.2</b> Precise and shorthand interpretation</a></li>
<li class="chapter" data-level="8.5.3" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#ci-width"><i class="fa fa-check"></i><b>8.5.3</b> Width of confidence intervals</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#case-study-two-prop-ci"><i class="fa fa-check"></i><b>8.6</b> Case study: Is yawning contagious?</a><ul>
<li class="chapter" data-level="8.6.1" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#mythbusters-study-data"><i class="fa fa-check"></i><b>8.6.1</b> <em>Mythbusters</em> study data</a></li>
<li class="chapter" data-level="8.6.2" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#sampling-scenario"><i class="fa fa-check"></i><b>8.6.2</b> Sampling scenario</a></li>
<li class="chapter" data-level="8.6.3" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#ci-build"><i class="fa fa-check"></i><b>8.6.3</b> Constructing the confidence interval</a></li>
<li class="chapter" data-level="8.6.4" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#interpreting-the-confidence-interval"><i class="fa fa-check"></i><b>8.6.4</b> Interpreting the confidence interval</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#ci-conclusion"><i class="fa fa-check"></i><b>8.7</b> Conclusion</a><ul>
<li class="chapter" data-level="8.7.1" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#bootstrap-vs-sampling"><i class="fa fa-check"></i><b>8.7.1</b> Comparing bootstrap and sampling distributions</a></li>
<li class="chapter" data-level="8.7.2" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#theory-ci"><i class="fa fa-check"></i><b>8.7.2</b> Theory-based confidence intervals</a></li>
<li class="chapter" data-level="8.7.3" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#additional-resources-5"><i class="fa fa-check"></i><b>8.7.3</b> Additional resources</a></li>
<li class="chapter" data-level="8.7.4" data-path="8-confidence-intervals.html"><a href="8-confidence-intervals.html#whats-to-come-5"><i class="fa fa-check"></i><b>8.7.4</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="9-regression.html"><a href="9-regression.html"><i class="fa fa-check"></i><b>9</b> Basic Regression</a><ul>
<li class="chapter" data-level="" data-path="9-regression.html"><a href="9-regression.html#needed-packages-5"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="9.1" data-path="9-regression.html"><a href="9-regression.html#model1"><i class="fa fa-check"></i><b>9.1</b> One numerical explanatory variable</a><ul>
<li class="chapter" data-level="9.1.1" data-path="9-regression.html"><a href="9-regression.html#model1EDA"><i class="fa fa-check"></i><b>9.1.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="9.1.2" data-path="9-regression.html"><a href="9-regression.html#model1table"><i class="fa fa-check"></i><b>9.1.2</b> Simple linear regression</a></li>
<li class="chapter" data-level="9.1.3" data-path="9-regression.html"><a href="9-regression.html#model1points"><i class="fa fa-check"></i><b>9.1.3</b> Observed/fitted values and residuals</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="9-regression.html"><a href="9-regression.html#model2"><i class="fa fa-check"></i><b>9.2</b> One categorical explanatory variable</a><ul>
<li class="chapter" data-level="9.2.1" data-path="9-regression.html"><a href="9-regression.html#model2EDA"><i class="fa fa-check"></i><b>9.2.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="9.2.2" data-path="9-regression.html"><a href="9-regression.html#model2table"><i class="fa fa-check"></i><b>9.2.2</b> Linear regression</a></li>
<li class="chapter" data-level="9.2.3" data-path="9-regression.html"><a href="9-regression.html#model2points"><i class="fa fa-check"></i><b>9.2.3</b> Observed/fitted values and residuals</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="9-regression.html"><a href="9-regression.html#related-topics"><i class="fa fa-check"></i><b>9.3</b> Related topics</a><ul>
<li class="chapter" data-level="9.3.1" data-path="9-regression.html"><a href="9-regression.html#correlation-is-not-causation"><i class="fa fa-check"></i><b>9.3.1</b> Correlation is not necessarily causation</a></li>
<li class="chapter" data-level="9.3.2" data-path="9-regression.html"><a href="9-regression.html#leastsquares"><i class="fa fa-check"></i><b>9.3.2</b> Best-fitting line</a></li>
<li class="chapter" data-level="9.3.3" data-path="9-regression.html"><a href="9-regression.html#underthehood"><i class="fa fa-check"></i><b>9.3.3</b> <code>get_regression_x()</code> functions</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="9-regression.html"><a href="9-regression.html#conclusion-4"><i class="fa fa-check"></i><b>9.4</b> Conclusion</a><ul>
<li class="chapter" data-level="9.4.1" data-path="9-regression.html"><a href="9-regression.html#additional-resources-basic-regression"><i class="fa fa-check"></i><b>9.4.1</b> Additional resources</a></li>
<li class="chapter" data-level="9.4.2" data-path="9-regression.html"><a href="9-regression.html#whats-to-come-6"><i class="fa fa-check"></i><b>9.4.2</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html"><i class="fa fa-check"></i><b>10</b> Multiple Regression</a><ul>
<li class="chapter" data-level="" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#needed-packages-6"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="10.1" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#model4"><i class="fa fa-check"></i><b>10.1</b> One numerical and one categorical explanatory variable</a><ul>
<li class="chapter" data-level="10.1.1" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#model4EDA"><i class="fa fa-check"></i><b>10.1.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="10.1.2" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#model4interactiontable"><i class="fa fa-check"></i><b>10.1.2</b> Interaction model</a></li>
<li class="chapter" data-level="10.1.3" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#model4table"><i class="fa fa-check"></i><b>10.1.3</b> Parallel slopes model</a></li>
<li class="chapter" data-level="10.1.4" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#model4points"><i class="fa fa-check"></i><b>10.1.4</b> Observed/fitted values and residuals</a></li>
</ul></li>
<li class="chapter" data-level="10.2" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#model3"><i class="fa fa-check"></i><b>10.2</b> Two numerical explanatory variables</a><ul>
<li class="chapter" data-level="10.2.1" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#model3EDA"><i class="fa fa-check"></i><b>10.2.1</b> Exploratory data analysis</a></li>
<li class="chapter" data-level="10.2.2" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#model3table"><i class="fa fa-check"></i><b>10.2.2</b> Regression plane</a></li>
<li class="chapter" data-level="10.2.3" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#model3points"><i class="fa fa-check"></i><b>10.2.3</b> Observed/fitted values and residuals</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#related-topics-1"><i class="fa fa-check"></i><b>10.3</b> Related topics</a><ul>
<li class="chapter" data-level="10.3.1" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#model-selection"><i class="fa fa-check"></i><b>10.3.1</b> Model selection</a></li>
<li class="chapter" data-level="10.3.2" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#correlationcoefficient2"><i class="fa fa-check"></i><b>10.3.2</b> Correlation coefficient</a></li>
<li class="chapter" data-level="10.3.3" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#simpsonsparadox"><i class="fa fa-check"></i><b>10.3.3</b> Simpson’s Paradox</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#conclusion-5"><i class="fa fa-check"></i><b>10.4</b> Conclusion</a><ul>
<li class="chapter" data-level="10.4.1" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#additional-resources-6"><i class="fa fa-check"></i><b>10.4.1</b> Additional resources</a></li>
<li class="chapter" data-level="10.4.2" data-path="10-multiple-regression.html"><a href="10-multiple-regression.html#whats-to-come-7"><i class="fa fa-check"></i><b>10.4.2</b> What’s to come?</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>I Machine Learning</b></span></li>
<li class="chapter" data-level="11" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html"><i class="fa fa-check"></i><b>11</b> Introduction to machine learning</a><ul>
<li class="chapter" data-level="11.1" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#notation"><i class="fa fa-check"></i><b>11.1</b> Notation</a></li>
<li class="chapter" data-level="11.2" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#an-example"><i class="fa fa-check"></i><b>11.2</b> An example</a></li>
<li class="chapter" data-level="11.3" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#exercises"><i class="fa fa-check"></i><b>11.3</b> Exercises</a></li>
<li class="chapter" data-level="11.4" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#evaluation-metrics"><i class="fa fa-check"></i><b>11.4</b> Evaluation metrics</a><ul>
<li class="chapter" data-level="11.4.1" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#training-and-test-sets"><i class="fa fa-check"></i><b>11.4.1</b> Training and test sets</a></li>
<li class="chapter" data-level="11.4.2" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#overall-accuracy"><i class="fa fa-check"></i><b>11.4.2</b> Overall accuracy</a></li>
<li class="chapter" data-level="11.4.3" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#the-confusion-matrix"><i class="fa fa-check"></i><b>11.4.3</b> The confusion matrix</a></li>
<li class="chapter" data-level="11.4.4" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#sensitivity-and-specificity"><i class="fa fa-check"></i><b>11.4.4</b> Sensitivity and specificity</a></li>
<li class="chapter" data-level="11.4.5" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#balanced-accuracy-and-f_1-score"><i class="fa fa-check"></i><b>11.4.5</b> Balanced accuracy and <span class="math inline">\(F_1\)</span> score</a></li>
<li class="chapter" data-level="11.4.6" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#prevalence-matters-in-practice"><i class="fa fa-check"></i><b>11.4.6</b> Prevalence matters in practice</a></li>
<li class="chapter" data-level="11.4.7" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#roc-and-precision-recall-curves"><i class="fa fa-check"></i><b>11.4.7</b> ROC and precision-recall curves</a></li>
<li class="chapter" data-level="11.4.8" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#loss-function"><i class="fa fa-check"></i><b>11.4.8</b> The loss function</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#exercises-1"><i class="fa fa-check"></i><b>11.5</b> Exercises</a></li>
<li class="chapter" data-level="11.6" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#conditional-probabilities-and-expectations"><i class="fa fa-check"></i><b>11.6</b> Conditional probabilities and expectations</a><ul>
<li class="chapter" data-level="11.6.1" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#conditional-probabilities"><i class="fa fa-check"></i><b>11.6.1</b> Conditional probabilities</a></li>
<li class="chapter" data-level="11.6.2" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#conditional-expectations"><i class="fa fa-check"></i><b>11.6.2</b> Conditional expectations</a></li>
<li class="chapter" data-level="11.6.3" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#conditional-expectation-minimizes-squared-loss-function"><i class="fa fa-check"></i><b>11.6.3</b> Conditional expectation minimizes squared loss function</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#exercises-2"><i class="fa fa-check"></i><b>11.7</b> Exercises</a></li>
<li class="chapter" data-level="11.8" data-path="11-introduction-to-machine-learning.html"><a href="11-introduction-to-machine-learning.html#two-or-seven"><i class="fa fa-check"></i><b>11.8</b> Case study: is it a 2 or a 7?</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-cross-validation.html"><a href="12-cross-validation.html"><i class="fa fa-check"></i><b>12</b> Cross validation</a><ul>
<li class="chapter" data-level="12.1" data-path="12-cross-validation.html"><a href="12-cross-validation.html#knn-cv-intro"><i class="fa fa-check"></i><b>12.1</b> Motivation with k-nearest neighbors</a><ul>
<li class="chapter" data-level="12.1.1" data-path="12-cross-validation.html"><a href="12-cross-validation.html#over-training"><i class="fa fa-check"></i><b>12.1.1</b> Over-training</a></li>
<li class="chapter" data-level="12.1.2" data-path="12-cross-validation.html"><a href="12-cross-validation.html#over-smoothing"><i class="fa fa-check"></i><b>12.1.2</b> Over-smoothing</a></li>
<li class="chapter" data-level="12.1.3" data-path="12-cross-validation.html"><a href="12-cross-validation.html#picking-the-k-in-knn"><i class="fa fa-check"></i><b>12.1.3</b> Picking the <span class="math inline">\(k\)</span> in kNN</a></li>
</ul></li>
<li class="chapter" data-level="12.2" data-path="12-cross-validation.html"><a href="12-cross-validation.html#mathematical-description-of-cross-validation"><i class="fa fa-check"></i><b>12.2</b> Mathematical description of cross validation</a></li>
<li class="chapter" data-level="12.3" data-path="12-cross-validation.html"><a href="12-cross-validation.html#k-fold-cross-validation"><i class="fa fa-check"></i><b>12.3</b> K-fold cross validation</a></li>
<li class="chapter" data-level="12.4" data-path="12-cross-validation.html"><a href="12-cross-validation.html#exercises-3"><i class="fa fa-check"></i><b>12.4</b> Exercises</a></li>
<li class="chapter" data-level="12.5" data-path="12-cross-validation.html"><a href="12-cross-validation.html#bootstrap"><i class="fa fa-check"></i><b>12.5</b> Bootstrap</a></li>
<li class="chapter" data-level="12.6" data-path="12-cross-validation.html"><a href="12-cross-validation.html#exercises-4"><i class="fa fa-check"></i><b>12.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html"><i class="fa fa-check"></i><b>13</b> Examples of algorithms</a><ul>
<li class="chapter" data-level="13.1" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#linear-regression"><i class="fa fa-check"></i><b>13.1</b> Linear regression</a><ul>
<li class="chapter" data-level="13.1.1" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#the-predict-function"><i class="fa fa-check"></i><b>13.1.1</b> The <code>predict</code> function</a></li>
</ul></li>
<li class="chapter" data-level="13.2" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#exercises-5"><i class="fa fa-check"></i><b>13.2</b> Exercises</a></li>
<li class="chapter" data-level="13.3" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#logistic-regression"><i class="fa fa-check"></i><b>13.3</b> Logistic regression</a><ul>
<li class="chapter" data-level="13.3.1" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#generalized-linear-models"><i class="fa fa-check"></i><b>13.3.1</b> Generalized linear models</a></li>
<li class="chapter" data-level="13.3.2" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#logistic-regression-with-more-than-one-predictor"><i class="fa fa-check"></i><b>13.3.2</b> Logistic regression with more than one predictor</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#exercises-6"><i class="fa fa-check"></i><b>13.4</b> Exercises</a></li>
<li class="chapter" data-level="13.5" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#k-nearest-neighbors"><i class="fa fa-check"></i><b>13.5</b> k-nearest neighbors</a></li>
<li class="chapter" data-level="13.6" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#exercises-7"><i class="fa fa-check"></i><b>13.6</b> Exercises</a></li>
<li class="chapter" data-level="13.7" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#generative-models"><i class="fa fa-check"></i><b>13.7</b> Generative models</a><ul>
<li class="chapter" data-level="13.7.1" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#naive-bayes"><i class="fa fa-check"></i><b>13.7.1</b> Naive Bayes</a></li>
<li class="chapter" data-level="13.7.2" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#controlling-prevalence"><i class="fa fa-check"></i><b>13.7.2</b> Controlling prevalence</a></li>
<li class="chapter" data-level="13.7.3" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#quadratic-discriminant-analysis"><i class="fa fa-check"></i><b>13.7.3</b> Quadratic discriminant analysis</a></li>
<li class="chapter" data-level="13.7.4" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#linear-discriminant-analysis"><i class="fa fa-check"></i><b>13.7.4</b> Linear discriminant analysis</a></li>
<li class="chapter" data-level="13.7.5" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#connection-to-distance"><i class="fa fa-check"></i><b>13.7.5</b> Connection to distance</a></li>
</ul></li>
<li class="chapter" data-level="13.8" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#case-study-more-than-three-classes"><i class="fa fa-check"></i><b>13.8</b> Case study: more than three classes</a></li>
<li class="chapter" data-level="13.9" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#exercises-8"><i class="fa fa-check"></i><b>13.9</b> Exercises</a></li>
<li class="chapter" data-level="13.10" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#classification-and-regression-trees-cart"><i class="fa fa-check"></i><b>13.10</b> Classification and regression trees (CART)</a><ul>
<li class="chapter" data-level="13.10.1" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#the-curse-of-dimensionality"><i class="fa fa-check"></i><b>13.10.1</b> The curse of dimensionality</a></li>
<li class="chapter" data-level="13.10.2" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#cart-motivation"><i class="fa fa-check"></i><b>13.10.2</b> CART motivation</a></li>
<li class="chapter" data-level="13.10.3" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#regression-trees"><i class="fa fa-check"></i><b>13.10.3</b> Regression trees</a></li>
<li class="chapter" data-level="13.10.4" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#classification-decision-trees"><i class="fa fa-check"></i><b>13.10.4</b> Classification (decision) trees</a></li>
</ul></li>
<li class="chapter" data-level="13.11" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#random-forests"><i class="fa fa-check"></i><b>13.11</b> Random forests</a></li>
<li class="chapter" data-level="13.12" data-path="13-examples-of-algorithms.html"><a href="13-examples-of-algorithms.html#exercises-9"><i class="fa fa-check"></i><b>13.12</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="14-thinking-with-data.html"><a href="14-thinking-with-data.html"><i class="fa fa-check"></i><b>14</b> Tell Your Story with Data</a><ul>
<li class="chapter" data-level="14.1" data-path="14-thinking-with-data.html"><a href="14-thinking-with-data.html#review"><i class="fa fa-check"></i><b>14.1</b> Review</a><ul>
<li class="chapter" data-level="" data-path="14-thinking-with-data.html"><a href="14-thinking-with-data.html#needed-packages-7"><i class="fa fa-check"></i>Needed packages</a></li>
</ul></li>
<li class="chapter" data-level="14.2" data-path="14-thinking-with-data.html"><a href="14-thinking-with-data.html#seattle-house-prices"><i class="fa fa-check"></i><b>14.2</b> Case study: Seattle house prices</a><ul>
<li class="chapter" data-level="14.2.1" data-path="14-thinking-with-data.html"><a href="14-thinking-with-data.html#house-prices-EDA-I"><i class="fa fa-check"></i><b>14.2.1</b> Exploratory data analysis: Part I</a></li>
<li class="chapter" data-level="14.2.2" data-path="14-thinking-with-data.html"><a href="14-thinking-with-data.html#house-prices-EDA-II"><i class="fa fa-check"></i><b>14.2.2</b> Exploratory data analysis: Part II</a></li>
<li class="chapter" data-level="14.2.3" data-path="14-thinking-with-data.html"><a href="14-thinking-with-data.html#house-prices-regression"><i class="fa fa-check"></i><b>14.2.3</b> Regression modeling</a></li>
<li class="chapter" data-level="14.2.4" data-path="14-thinking-with-data.html"><a href="14-thinking-with-data.html#house-prices-making-predictions"><i class="fa fa-check"></i><b>14.2.4</b> Making predictions</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="14-thinking-with-data.html"><a href="14-thinking-with-data.html#data-journalism"><i class="fa fa-check"></i><b>14.3</b> Case study: Effective data storytelling</a><ul>
<li class="chapter" data-level="14.3.1" data-path="14-thinking-with-data.html"><a href="14-thinking-with-data.html#bechdel-test-for-hollywood-gender-representation"><i class="fa fa-check"></i><b>14.3.1</b> Bechdel test for Hollywood gender representation</a></li>
<li class="chapter" data-level="14.3.2" data-path="14-thinking-with-data.html"><a href="14-thinking-with-data.html#us-births-in-1999"><i class="fa fa-check"></i><b>14.3.2</b> US Births in 1999</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="14-thinking-with-data.html"><a href="14-thinking-with-data.html#concluding-remarks"><i class="fa fa-check"></i>Concluding remarks</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="A-appendixA.html"><a href="A-appendixA.html"><i class="fa fa-check"></i><b>A</b> Statistical Background</a><ul>
<li class="chapter" data-level="A.1" data-path="A-appendixA.html"><a href="A-appendixA.html#appendix-stat-terms"><i class="fa fa-check"></i><b>A.1</b> Basic statistical terms</a><ul>
<li class="chapter" data-level="A.1.1" data-path="A-appendixA.html"><a href="A-appendixA.html#mean"><i class="fa fa-check"></i><b>A.1.1</b> Mean</a></li>
<li class="chapter" data-level="A.1.2" data-path="A-appendixA.html"><a href="A-appendixA.html#median"><i class="fa fa-check"></i><b>A.1.2</b> Median</a></li>
<li class="chapter" data-level="A.1.3" data-path="A-appendixA.html"><a href="A-appendixA.html#standard-deviation"><i class="fa fa-check"></i><b>A.1.3</b> Standard deviation</a></li>
<li class="chapter" data-level="A.1.4" data-path="A-appendixA.html"><a href="A-appendixA.html#five-number-summary"><i class="fa fa-check"></i><b>A.1.4</b> Five-number summary</a></li>
<li class="chapter" data-level="A.1.5" data-path="A-appendixA.html"><a href="A-appendixA.html#distribution"><i class="fa fa-check"></i><b>A.1.5</b> Distribution</a></li>
<li class="chapter" data-level="A.1.6" data-path="A-appendixA.html"><a href="A-appendixA.html#outliers"><i class="fa fa-check"></i><b>A.1.6</b> Outliers</a></li>
</ul></li>
<li class="chapter" data-level="A.2" data-path="A-appendixA.html"><a href="A-appendixA.html#appendix-normal-curve"><i class="fa fa-check"></i><b>A.2</b> Normal distribution</a></li>
<li class="chapter" data-level="A.3" data-path="A-appendixA.html"><a href="A-appendixA.html#appendix-log10-transformations"><i class="fa fa-check"></i><b>A.3</b> log10 transformations</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="B-appendixC.html"><a href="B-appendixC.html"><i class="fa fa-check"></i><b>B</b> Reach for the Stars</a><ul>
<li class="chapter" data-level="" data-path="B-appendixC.html"><a href="B-appendixC.html#needed-packages-8"><i class="fa fa-check"></i>Needed packages</a></li>
<li class="chapter" data-level="B.1" data-path="B-appendixC.html"><a href="B-appendixC.html#sorted-barplots"><i class="fa fa-check"></i><b>B.1</b> Sorted barplots</a></li>
<li class="chapter" data-level="B.2" data-path="B-appendixC.html"><a href="B-appendixC.html#interactive-graphics"><i class="fa fa-check"></i><b>B.2</b> Interactive graphics</a><ul>
<li class="chapter" data-level="B.2.1" data-path="B-appendixC.html"><a href="B-appendixC.html#interactive-linegraphs"><i class="fa fa-check"></i><b>B.2.1</b> Interactive linegraphs</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="C" data-path="C-appendixE.html"><a href="C-appendixE.html"><i class="fa fa-check"></i><b>C</b> Versions of R Packages Used</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Preceptor’s Primer for Bayesian Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="cross-validation" class="section level1">
<h1><span class="header-section-number">Chapter 12</span> Cross validation</h1>
<p>In this chapter we introduce cross validation, one of the most important ideas in machine learning. Here we focus on the conceptual and mathematical aspects. We will describe how to implement cross validation in practice with the <strong>caret</strong> package later, in Section <a href="#caret-cv"><strong>??</strong></a> in the next chapter. To motivate the concept, we will use the two predictor digits data presented in Section <a href="11-introduction-to-machine-learning.html#two-or-seven">11.8</a> and introduce, for the first time, an actual machine learning algorithm: k-nearest neighbors (kNN).</p>
<div id="knn-cv-intro" class="section level2">
<h2><span class="header-section-number">12.1</span> Motivation with k-nearest neighbors</h2>
<p>Let’s start by loading the data and showing a plot of the predictors with outcome represented with color.</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb508-1" data-line-number="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb508-2" data-line-number="2"><span class="kw">library</span>(dslabs)</a>
<a class="sourceLine" id="cb508-3" data-line-number="3"><span class="kw">data</span>(<span class="st">&quot;mnist_27&quot;</span>)</a>
<a class="sourceLine" id="cb508-4" data-line-number="4">mnist_<span class="dv">27</span><span class="op">$</span>test<span class="op">%&gt;%</span><span class="st"> </span><span class="kw">ggplot</span>(<span class="kw">aes</span>(x_<span class="dv">1</span>, x_<span class="dv">2</span>, <span class="dt">color =</span> y)) <span class="op">+</span><span class="st">  </span><span class="kw">geom_point</span>()</a></code></pre></div>
<p><img src="Bayesian-Data-Science_files/figure-html/mnist-27-data-1.png" width="\textwidth" style="display: block; margin: auto;" /></p>
<p>We will use these data to estimate the conditional probability function</p>
<p><span class="math display">\[
p(x_1, x_2) = \mbox{Pr}(Y=1 \mid X_1=x_1 , X_2 = x_2).
\]</span>
as defined in Section <a href="#smoothing-ml-connection"><strong>??</strong></a>. With k-nearest neighbors (kNN) we estimate <span class="math inline">\(p(x_1, x_2)\)</span> in a similar way to bin smoothing. However, as we will see, kNN is easier to adapt to multiple dimensions. First we define the distance between all observations based on the features. Then, for any point <span class="math inline">\((x_1,x_2)\)</span> for which we want an estimate of <span class="math inline">\(p(x_1, x_2)\)</span>, we look for the <span class="math inline">\(k\)</span> nearest points to <span class="math inline">\((x_1,x_2)\)</span> and then take an average of the 0s and 1s associated with these points. We refer to the set of points used to compute the average as the <em>neighborhood</em>. Due to the connection we described earlier between conditional expectations and conditional probabilities, this gives us a <span class="math inline">\(\hat{p}(x_1,x_2)\)</span>, just like the bin smoother gave us an estimate of a trend. As with bin smoothers, we can control the flexibility of our estimate, in this case through the <span class="math inline">\(k\)</span> parameter: larger <span class="math inline">\(k\)</span>s result in smoother estimates, while smaller <span class="math inline">\(k\)</span>s result in more flexible and more wiggly estimates.</p>
<p>To implement the algorithm, we can use the <code>knn3</code> function from the <strong>caret</strong> package. Looking at the help file for this package, we see that we can call it in one of two ways. We will use the first in which we specify a <em>formula</em> and a data frame. The data frame contains all the data to be used. The formula has the form <code>outcome ~ predictor_1 + predictor_2 + predictor_3</code> and so on. Therefore, we would type <code>y ~ x_1 + x_2</code>. If we are going to use all the predictors, we can use the <code>.</code> like this <code>y ~ .</code>. The final call looks like this:</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb509-1" data-line-number="1"><span class="kw">library</span>(caret)</a>
<a class="sourceLine" id="cb509-2" data-line-number="2">knn_fit &lt;-<span class="st"> </span><span class="kw">knn3</span>(y <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> mnist_<span class="dv">27</span><span class="op">$</span>train)</a></code></pre></div>
<p>For this function, we also need to pick a parameter: the number of neighbors to include. Let’s start with the default <span class="math inline">\(k=5\)</span>.</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb510-1" data-line-number="1">knn_fit &lt;-<span class="st"> </span><span class="kw">knn3</span>(y <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> mnist_<span class="dv">27</span><span class="op">$</span>train, <span class="dt">k =</span> <span class="dv">5</span>)</a></code></pre></div>
<p>In this case, since our dataset is balanced and we care just as much about sensitivity as we do about specificity, we will use accuracy to quantify performance.</p>
<p>The <code>predict</code> function for <code>knn</code> produces a probability for each class. We keep the probability of being a 7 as the estimate <span class="math inline">\(\hat{p}(x_1, x_2)\)</span></p>
<div class="sourceCode" id="cb511"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb511-1" data-line-number="1">y_hat_knn &lt;-<span class="st"> </span><span class="kw">predict</span>(knn_fit, mnist_<span class="dv">27</span><span class="op">$</span>test, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</a>
<a class="sourceLine" id="cb511-2" data-line-number="2"><span class="kw">confusionMatrix</span>(y_hat_knn, mnist_<span class="dv">27</span><span class="op">$</span>test<span class="op">$</span>y)<span class="op">$</span>overall[<span class="st">&quot;Accuracy&quot;</span>]</a></code></pre></div>
<pre><code>Accuracy 
   0.815 </code></pre>
<p>In Section <a href="11-introduction-to-machine-learning.html#two-or-seven">11.8</a> we used linear regression to generate an estimate.</p>
<div class="sourceCode" id="cb513"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb513-1" data-line-number="1">fit_lm &lt;-<span class="st"> </span>mnist_<span class="dv">27</span><span class="op">$</span>train <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb513-2" data-line-number="2"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">y =</span> <span class="kw">ifelse</span>(y <span class="op">==</span><span class="st"> </span><span class="dv">7</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb513-3" data-line-number="3"><span class="st">  </span><span class="kw">lm</span>(y <span class="op">~</span><span class="st"> </span>x_<span class="dv">1</span> <span class="op">+</span><span class="st"> </span>x_<span class="dv">2</span>, <span class="dt">data =</span> .)</a>
<a class="sourceLine" id="cb513-4" data-line-number="4">p_hat_lm &lt;-<span class="st"> </span><span class="kw">predict</span>(fit_lm, mnist_<span class="dv">27</span><span class="op">$</span>test)</a>
<a class="sourceLine" id="cb513-5" data-line-number="5">y_hat_lm &lt;-<span class="st"> </span><span class="kw">factor</span>(<span class="kw">ifelse</span>(p_hat_lm <span class="op">&gt;</span><span class="st"> </span><span class="fl">0.5</span>, <span class="dv">7</span>, <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb513-6" data-line-number="6"><span class="kw">confusionMatrix</span>(y_hat_lm, mnist_<span class="dv">27</span><span class="op">$</span>test<span class="op">$</span>y)<span class="op">$</span>overall[<span class="st">&quot;Accuracy&quot;</span>]</a></code></pre></div>
<pre><code>Accuracy 
    0.75 </code></pre>
<p>And we see that kNN, with the default parameter, already beats regression. To see why this is the case, we will plot <span class="math inline">\(\hat{p}(x_1, x_2)\)</span> and compare it to the true conditional probability <span class="math inline">\(p(x_1, x_2)\)</span>:</p>
<p><img src="Bayesian-Data-Science_files/figure-html/knn-fit-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>We see that kNN better adapts to the non-linear shape of <span class="math inline">\(p(x_1, x_2)\)</span>. However, our estimate has some islands of blue in the red area, which intuitively does not make much sense. This is due to what we call <em>over-training</em>. We describe over-training in detail below. Over-training is the reason that we have higher accuracy in the train set compared to the test set:</p>
<div class="sourceCode" id="cb515"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb515-1" data-line-number="1">y_hat_knn &lt;-<span class="st"> </span><span class="kw">predict</span>(knn_fit, mnist_<span class="dv">27</span><span class="op">$</span>train, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</a>
<a class="sourceLine" id="cb515-2" data-line-number="2"><span class="kw">confusionMatrix</span>(y_hat_knn, mnist_<span class="dv">27</span><span class="op">$</span>train<span class="op">$</span>y)<span class="op">$</span>overall[<span class="st">&quot;Accuracy&quot;</span>]</a></code></pre></div>
<pre><code>Accuracy 
   0.882 </code></pre>
<div class="sourceCode" id="cb517"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb517-1" data-line-number="1">y_hat_knn &lt;-<span class="st"> </span><span class="kw">predict</span>(knn_fit, mnist_<span class="dv">27</span><span class="op">$</span>test, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</a>
<a class="sourceLine" id="cb517-2" data-line-number="2"><span class="kw">confusionMatrix</span>(y_hat_knn, mnist_<span class="dv">27</span><span class="op">$</span>test<span class="op">$</span>y)<span class="op">$</span>overall[<span class="st">&quot;Accuracy&quot;</span>]</a></code></pre></div>
<pre><code>Accuracy 
   0.815 </code></pre>
<div id="over-training" class="section level3">
<h3><span class="header-section-number">12.1.1</span> Over-training</h3>
<p>Over-training is at its worst when we set <span class="math inline">\(k=1\)</span>. With <span class="math inline">\(k=1\)</span>, the estimate for each <span class="math inline">\((x_1, x_2)\)</span> in the training set is obtained with just the <span class="math inline">\(y\)</span> corresponding to that point. In this case, if the <span class="math inline">\((x_1, x_2)\)</span> are unique, we will obtain perfect accuracy in the training set because each point is used to predict itself. Remember that if the predictors are not unique and have different outcomes for at least one set of predictors, then it is impossible to predict perfectly.</p>
<p>Here we fit a kNN model with <span class="math inline">\(k=1\)</span>:</p>
<div class="sourceCode" id="cb519"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb519-1" data-line-number="1">knn_fit_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">knn3</span>(y <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> mnist_<span class="dv">27</span><span class="op">$</span>train, <span class="dt">k =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb519-2" data-line-number="2">y_hat_knn_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">predict</span>(knn_fit_<span class="dv">1</span>, mnist_<span class="dv">27</span><span class="op">$</span>train, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</a>
<a class="sourceLine" id="cb519-3" data-line-number="3"><span class="kw">confusionMatrix</span>(y_hat_knn_<span class="dv">1</span>, mnist_<span class="dv">27</span><span class="op">$</span>train<span class="op">$</span>y)<span class="op">$</span>overall[[<span class="st">&quot;Accuracy&quot;</span>]]</a></code></pre></div>
<pre><code>[1] 0.998</code></pre>
<p>However, the test set accuracy is actually worse than logistic regression:</p>
<div class="sourceCode" id="cb521"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb521-1" data-line-number="1">y_hat_knn_<span class="dv">1</span> &lt;-<span class="st"> </span><span class="kw">predict</span>(knn_fit_<span class="dv">1</span>, mnist_<span class="dv">27</span><span class="op">$</span>test, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</a>
<a class="sourceLine" id="cb521-2" data-line-number="2"><span class="kw">confusionMatrix</span>(y_hat_knn_<span class="dv">1</span>, mnist_<span class="dv">27</span><span class="op">$</span>test<span class="op">$</span>y)<span class="op">$</span>overall[<span class="st">&quot;Accuracy&quot;</span>]</a></code></pre></div>
<pre><code>Accuracy 
    0.74 </code></pre>
<p>We can see the over-fitting problem in this figure.
<img src="Bayesian-Data-Science_files/figure-html/knn-1-overfit-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>The black curves denote the decision rule boundaries.</p>
<p>The estimate <span class="math inline">\(\hat{p}(x_1, x_2)\)</span> follows the training data too closely (left). You can see that in the training set, boundaries have been drawn to perfectly surround a single red point in a sea of blue. Because most points <span class="math inline">\((x_1, x_2)\)</span> are unique, the prediction is either 1 or 0 and the prediction for that point is the associated label. However, once we introduce the training set (right), we see that many of these small islands now have the opposite color and we end up making several incorrect predictions.</p>
</div>
<div id="over-smoothing" class="section level3">
<h3><span class="header-section-number">12.1.2</span> Over-smoothing</h3>
<p>Although not as badly as with the previous examples, we saw that with <span class="math inline">\(k=5\)</span> we also over-trained. Hence, we should consider a larger <span class="math inline">\(k\)</span>. Let’s try, as an example, a much larger number: <span class="math inline">\(k=401\)</span>.</p>
<div class="sourceCode" id="cb523"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb523-1" data-line-number="1">knn_fit_<span class="dv">401</span> &lt;-<span class="st"> </span><span class="kw">knn3</span>(y <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> mnist_<span class="dv">27</span><span class="op">$</span>train, <span class="dt">k =</span> <span class="dv">401</span>)</a>
<a class="sourceLine" id="cb523-2" data-line-number="2">y_hat_knn_<span class="dv">401</span> &lt;-<span class="st"> </span><span class="kw">predict</span>(knn_fit_<span class="dv">401</span>, mnist_<span class="dv">27</span><span class="op">$</span>test, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</a>
<a class="sourceLine" id="cb523-3" data-line-number="3"><span class="kw">confusionMatrix</span>(y_hat_knn_<span class="dv">401</span>, mnist_<span class="dv">27</span><span class="op">$</span>test<span class="op">$</span>y)<span class="op">$</span>overall[<span class="st">&quot;Accuracy&quot;</span>]</a></code></pre></div>
<pre><code>Accuracy 
    0.79 </code></pre>
<p>This turns out to be similar to regression:
<img src="Bayesian-Data-Science_files/figure-html/mnist-27-glm-est-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>This size of <span class="math inline">\(k\)</span> is so large that it does not permit enough flexibility. We call this <em>over-smoothing</em>.</p>
</div>
<div id="picking-the-k-in-knn" class="section level3">
<h3><span class="header-section-number">12.1.3</span> Picking the <span class="math inline">\(k\)</span> in kNN</h3>
<p>So how do we pick <span class="math inline">\(k\)</span>? In principle we want to pick the <span class="math inline">\(k\)</span> that maximizes accuracy, or minimizes the expected MSE as defined in <a href="11-introduction-to-machine-learning.html#loss-function">11.4.8</a>. The goal of cross validation is to estimate these quantities for any given algorithm and set of tuning parameters such as <span class="math inline">\(k\)</span>. To understand why we need a special method to do this let’s repeat what we did above but for different values of <span class="math inline">\(k\)</span>:</p>
<div class="sourceCode" id="cb525"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb525-1" data-line-number="1">ks &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">3</span>, <span class="dv">251</span>, <span class="dv">2</span>)</a></code></pre></div>
<p>We do this using <code>map_df</code> function to repeat the above for each one.</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb526-1" data-line-number="1"><span class="kw">library</span>(purrr)</a>
<a class="sourceLine" id="cb526-2" data-line-number="2">accuracy &lt;-<span class="st"> </span><span class="kw">map_df</span>(ks, <span class="cf">function</span>(k){</a>
<a class="sourceLine" id="cb526-3" data-line-number="3">  fit &lt;-<span class="st"> </span><span class="kw">knn3</span>(y <span class="op">~</span><span class="st"> </span>., <span class="dt">data =</span> mnist_<span class="dv">27</span><span class="op">$</span>train, <span class="dt">k =</span> k)</a>
<a class="sourceLine" id="cb526-4" data-line-number="4">  </a>
<a class="sourceLine" id="cb526-5" data-line-number="5">  y_hat &lt;-<span class="st"> </span><span class="kw">predict</span>(fit, mnist_<span class="dv">27</span><span class="op">$</span>train, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</a>
<a class="sourceLine" id="cb526-6" data-line-number="6">  cm_train &lt;-<span class="st"> </span><span class="kw">confusionMatrix</span>(y_hat, mnist_<span class="dv">27</span><span class="op">$</span>train<span class="op">$</span>y)</a>
<a class="sourceLine" id="cb526-7" data-line-number="7">  train_error &lt;-<span class="st"> </span>cm_train<span class="op">$</span>overall[<span class="st">&quot;Accuracy&quot;</span>]</a>
<a class="sourceLine" id="cb526-8" data-line-number="8">  </a>
<a class="sourceLine" id="cb526-9" data-line-number="9">  y_hat &lt;-<span class="st"> </span><span class="kw">predict</span>(fit, mnist_<span class="dv">27</span><span class="op">$</span>test, <span class="dt">type =</span> <span class="st">&quot;class&quot;</span>)</a>
<a class="sourceLine" id="cb526-10" data-line-number="10">  cm_test &lt;-<span class="st"> </span><span class="kw">confusionMatrix</span>(y_hat, mnist_<span class="dv">27</span><span class="op">$</span>test<span class="op">$</span>y)</a>
<a class="sourceLine" id="cb526-11" data-line-number="11">  test_error &lt;-<span class="st"> </span>cm_test<span class="op">$</span>overall[<span class="st">&quot;Accuracy&quot;</span>]</a>
<a class="sourceLine" id="cb526-12" data-line-number="12">  </a>
<a class="sourceLine" id="cb526-13" data-line-number="13">  <span class="kw">tibble</span>(<span class="dt">train =</span> train_error, <span class="dt">test =</span> test_error)</a>
<a class="sourceLine" id="cb526-14" data-line-number="14">})</a></code></pre></div>
<p>Note that we estimate accuracy by using both the training set and the test set. We can now plot the accuracy estimates for each value of <span class="math inline">\(k\)</span>:</p>
<p><img src="Bayesian-Data-Science_files/figure-html/accuracy-vs-k-knn-1.png" width="\textwidth" style="display: block; margin: auto;" /></p>
<p>First, note that the estimate obtained on the training set is generally lower than the estimate obtained with the test set, with the difference larger for smaller values of <span class="math inline">\(k\)</span>. This is due to over-training. Also note that the accuracy versus <span class="math inline">\(k\)</span> plot is quite jagged. We do not expect this because small changes in <span class="math inline">\(k\)</span> should not affect the algorithm’s performance too much. The jaggedness is explained by the fact that the accuracy is computed on a sample and therefore is a random variable. This demonstrates why we prefer to minimize the expected loss rather than the loss we observe with one dataset.</p>
<p>If we were to use these estimates to pick the <span class="math inline">\(k\)</span> that maximizes accuracy, we would use the estimates built on the test data:</p>
<div class="sourceCode" id="cb527"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb527-1" data-line-number="1">ks[<span class="kw">which.max</span>(accuracy<span class="op">$</span>test)]</a></code></pre></div>
<pre><code>[1] 41</code></pre>
<div class="sourceCode" id="cb529"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb529-1" data-line-number="1"><span class="kw">max</span>(accuracy<span class="op">$</span>test)</a></code></pre></div>
<pre><code>[1] 0.86</code></pre>
<p>Another reason we need a better estimate of accuracy is that if we use the test set to pick this <span class="math inline">\(k\)</span>, we should not expect the accompanying accuracy estimate to extrapolate to the real world. This is because even here we broke a golden rule of machine learning: we selected the <span class="math inline">\(k\)</span> using the test set. Cross validation also provides an estimate that takes this into account.</p>
</div>
</div>
<div id="mathematical-description-of-cross-validation" class="section level2">
<h2><span class="header-section-number">12.2</span> Mathematical description of cross validation</h2>
<p>In Section <a href="11-introduction-to-machine-learning.html#loss-function">11.4.8</a>, we described that a common goal of machine learning is to find an algorithm that produces predictors <span class="math inline">\(\hat{Y}\)</span> for an outcome <span class="math inline">\(Y\)</span> that minimizes the MSE:</p>
<p><span class="math display">\[
\mbox{MSE} = \mbox{E}\left\{ \frac{1}{N}\sum_{i=1}^N (\hat{Y}_i - Y_i)^2 \right\}
\]</span>
When all we have at our disposal is one dataset, we can estimate the MSE with the observed MSE like this:</p>
<p><span class="math display">\[
\hat{\mbox{MSE}} = \frac{1}{N}\sum_{i=1}^N (\hat{y}_i - y_i)^2
\]</span>
These two are often referred to as the <em>true error</em> and <em>apparent error</em>, respectively.</p>
<p>There are two important characteristics of the apparent error we should always keep in mind:</p>
<ol style="list-style-type: decimal">
<li><p>Because our data is random, the apparent error is a random variable. For example, the dataset we have may be a random sample from a larger population. An algorithm may have a lower apparent error than another algorithm due to luck.</p></li>
<li><p>If we train an algorithm on the same dataset that we use to compute the apparent error, we might be overtraining. In general, when we do this, the apparent error will be an underestimate of the true error. We will see an extreme example of this with k-nearest neighbors.</p></li>
</ol>
<p>Cross validation is a technique that permits us to alleviate both these problems. To understand cross validation, it helps to think of the true error, a theoretical quantity, as the average of many apparent errors obtained by applying the algorithm to <span class="math inline">\(B\)</span> new random samples of the data, none of them used to train the algorithm. As shown in a previous chapter, we think of the true error as:</p>
<p><span class="math display">\[
\frac{1}{B} \sum_{b=1}^B \frac{1}{N}\sum_{i=1}^N \left(\hat{y}_i^b - y_i^b\right)^2 
\]</span>
with <span class="math inline">\(B\)</span> a large number that can be thought of as practically infinite.
As already mentioned, this is a theoretical quantity because we only have available one set of outcomes: <span class="math inline">\(y_1, \dots, y_n\)</span>. Cross validation is based on the idea of imitating the theoretical setup above as best we can with the data we have. To do this, we have to generate a series of different random samples. There are several approaches we can use, but the general idea for all of them is to randomly generate smaller datasets that are not used for training, and instead used to estimate the true error.</p>
</div>
<div id="k-fold-cross-validation" class="section level2">
<h2><span class="header-section-number">12.3</span> K-fold cross validation</h2>
<p>The first one we describe is <em>K-fold cross validation</em>.
Generally speaking, a machine learning challenge starts with a dataset (blue in the image below). We need to build an algorithm using this dataset that will eventually be used in completely independent datasets (yellow).</p>
<p><img src="ml/img/cv-1.png" width="500px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" style="display: block; margin: auto;" /></p>
<p>But we don’t get to see these independent datasets.</p>
<p><img src="ml/img/cv-2.png" width="500px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" style="display: block; margin: auto;" /></p>
<p>So to imitate this situation, we carve out a piece of our dataset and pretend it is an independent dataset: we divide the dataset into a <em>training set</em> (blue) and a <em>test set</em> (red). We will train our algorithm exclusively on the training set and use the test set only for evaluation purposes.</p>
<p>We usually try to select a small piece of the dataset so that we have as much data as possible to train. However, we also want the test set to be large so that we obtain a stable estimate of the loss without fitting an impractical number of models. Typical choices are to use 10%-20% of the data for testing.</p>
<p><img src="ml/img/cv-3.png" width="500px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" style="display: block; margin: auto;" /></p>
<p>Let’s reiterate that it is indispensable that we not use the test set at all: not for filtering out rows, not for selecting features, nothing!</p>
<p>Now this presents a new problem because for most machine learning algorithms we need to select parameters, for example the number of neighbors <span class="math inline">\(k\)</span> in k-nearest neighbors. Here, we will refer to the set of parameters as <span class="math inline">\(\lambda\)</span>. We need to optimize algorithm parameters without using our test set and we know that if we optimize and evaluate on the same dataset, we will overtrain. This is where cross validation is most useful.</p>
<p>For each set of algorithm parameters being considered, we want an estimate of the MSE and then we will choose the parameters with the smallest MSE. Cross validation provides this estimate.</p>
<p>First, before we start the cross validation procedure, it is important to fix all the algorithm parameters. Although we will train the algorithm on the set of training sets, the parameters <span class="math inline">\(\lambda\)</span> will be the same across all training sets. We will use <span class="math inline">\(\hat{y}_i(\lambda)\)</span> to denote the predictors obtained when we use parameters <span class="math inline">\(\lambda\)</span>.</p>
<p>So, if we are going to imitate this definition:</p>
<p><span class="math display">\[
\mbox{MSE}(\lambda) = \frac{1}{B} \sum_{b=1}^B \frac{1}{N}\sum_{i=1}^N \left(\hat{y}_i^b(\lambda) - y_i^b\right)^2 
\]</span></p>
<p>we want to consider datasets that can be thought of as an independent random sample and we want to do this several times. With K-fold cross validation, we do it <span class="math inline">\(K\)</span> times. In the cartoons, we are showing an example that uses <span class="math inline">\(K=5\)</span>.</p>
<p>We will eventually end up with <span class="math inline">\(K\)</span> samples, but let’s start by describing how to construct the first: we simply pick <span class="math inline">\(M=N/K\)</span> observations at random (we round if <span class="math inline">\(M\)</span> is not a round number) and think of these as a random sample <span class="math inline">\(y_1^b, \dots, y_M^b\)</span>, with <span class="math inline">\(b=1\)</span>. We call this the validation set:</p>
<p><img src="ml/img/cv-4.png" width="500px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" style="display: block; margin: auto;" /></p>
<p>Now we can fit the model in the training set, then compute the apparent error on the independent set:</p>
<p><span class="math display">\[
\hat{\mbox{MSE}}_b(\lambda) = \frac{1}{M}\sum_{i=1}^M \left(\hat{y}_i^b(\lambda) - y_i^b\right)^2 
\]</span></p>
<p>Note that this is just one sample and will therefore return a noisy estimate of the true error. This is why we take <span class="math inline">\(K\)</span> samples, not just one. In K-cross validation, we randomly split the observations into <span class="math inline">\(K\)</span> non-overlapping sets:</p>
<p><img src="ml/img/cv-5.png" width="500px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" style="display: block; margin: auto;" /></p>
<p>Now we repeat the calculation above for each of these sets <span class="math inline">\(b=1,\dots,K\)</span> and obtain <span class="math inline">\(\hat{\mbox{MSE}}_1(\lambda),\dots, \hat{\mbox{MSE}}_K(\lambda)\)</span>. Then, for our final estimate, we compute the average:</p>
<p><span class="math display">\[
\hat{\mbox{MSE}}(\lambda) = \frac{1}{B} \sum_{b=1}^K \hat{\mbox{MSE}}_b(\lambda)
\]</span></p>
<p>and obtain an estimate of our loss. A final step would be to select the <span class="math inline">\(\lambda\)</span> that minimizes the MSE.</p>
<p>We have described how to use cross validation to optimize parameters. However, we now have to take into account the fact that the optimization occurred on the training data and therefore we need an estimate of our final algorithm based on data that was not used to optimize the choice. Here is where we use the test set we separated early on:</p>
<p><img src="ml/img/cv-6.png" width="500px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" style="display: block; margin: auto;" /></p>
<p>We can do cross validation again:</p>
<p><img src="ml/img/cv-7.png" width="500px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" style="display: block; margin: auto;" /></p>
<p>and obtain a final estimate of our expected loss. However, note that this means that our entire compute time gets multiplied by <span class="math inline">\(K\)</span>. You will soon learn that performing this task takes time because we are performing many complex computations. As a result, we are always looking for ways to reduce this time. For the final evaluation, we often just use the one test set.</p>
<p>Once we are satisfied with this model and want to make it available to others, we could refit the model on the entire dataset, without changing the optimized parameters.</p>
<p><img src="ml/img/cv-8.png" width="500px" style="display: block; margin-left: auto; margin-right: auto; background-color: #000; padding:3px;" style="display: block; margin: auto;" /></p>
<p>Now how do we pick the cross validation <span class="math inline">\(K\)</span>? Large values of <span class="math inline">\(K\)</span> are preferable because the training data better imitates the original dataset. However, larger values of <span class="math inline">\(K\)</span> will have much slower computation time: for example, 100-fold cross validation will be 10 times slower than 10-fold cross validation. For this reason, the choices of <span class="math inline">\(K=5\)</span> and <span class="math inline">\(K=10\)</span> are popular.</p>
<p>One way we can improve the variance of our final estimate is to take more samples. To do this, we would no longer require the training set to be partitioned into non-overlapping sets. Instead, we would just pick <span class="math inline">\(K\)</span> sets of some size at random.</p>
<p>One popular version of this technique, at each fold, picks observations at random with replacement (which means the same observation can appear twice). This approach has some advantages (not discussed here) and is generally referred to as the <em>bootstrap</em>. In fact, this is the default approach in the <strong>caret</strong> package. We describe how to implement cross validation with the <strong>caret</strong> package in the next chapter. In the next section, we include an explanation of how the bootstrap works in general.</p>
</div>
<div id="exercises-3" class="section level2">
<h2><span class="header-section-number">12.4</span> Exercises</h2>
<p>Generate a set of random predictors and outcomes like this:</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb531-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">1996</span>)</a>
<a class="sourceLine" id="cb531-2" data-line-number="2">n &lt;-<span class="st"> </span><span class="dv">1000</span></a>
<a class="sourceLine" id="cb531-3" data-line-number="3">p &lt;-<span class="st"> </span><span class="dv">10000</span></a>
<a class="sourceLine" id="cb531-4" data-line-number="4">x &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(n <span class="op">*</span><span class="st"> </span>p), n, p)</a>
<a class="sourceLine" id="cb531-5" data-line-number="5"><span class="kw">colnames</span>(x) &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="st">&quot;x&quot;</span>, <span class="dv">1</span><span class="op">:</span><span class="kw">ncol</span>(x), <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>)</a>
<a class="sourceLine" id="cb531-6" data-line-number="6">y &lt;-<span class="st"> </span><span class="kw">rbinom</span>(n, <span class="dv">1</span>, <span class="fl">0.5</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">factor</span>()</a>
<a class="sourceLine" id="cb531-7" data-line-number="7"></a>
<a class="sourceLine" id="cb531-8" data-line-number="8">x_subset &lt;-<span class="st"> </span>x[ ,<span class="kw">sample</span>(p, <span class="dv">100</span>)]</a></code></pre></div>
<p>1. Because <code>x</code> and <code>y</code> are completely independent, you should not be able to predict <code>y</code> using <code>x</code> with accuracy larger than 0.5. Confirm this by running cross validation using logistic regression to fit the model. Because we have so many predictors, we selected a random sample <code>x_subset</code>. Use the subset when training the model. Hint: use the caret <code>train</code> function. The <code>results</code> component of the output of <code>train</code> shows you the accuracy. Ignore the warnings.</p>
<p>2. Now, instead of a random selection of predictors, we are going to search for those that are most predictive of the outcome. We can do this by comparing the values for the <span class="math inline">\(y=1\)</span> group to those in the <span class="math inline">\(y=0\)</span> group, for each predictor, using a t-test. You can perform this step like this:</p>
<div class="sourceCode" id="cb532"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb532-1" data-line-number="1">devtools<span class="op">::</span><span class="kw">install_bioc</span>(<span class="st">&quot;genefilter&quot;</span>)</a>
<a class="sourceLine" id="cb532-2" data-line-number="2"><span class="kw">install.packages</span>(<span class="st">&quot;genefilter&quot;</span>)</a>
<a class="sourceLine" id="cb532-3" data-line-number="3"><span class="kw">library</span>(genefilter)</a>
<a class="sourceLine" id="cb532-4" data-line-number="4">tt &lt;-<span class="st"> </span><span class="kw">colttests</span>(x, y)</a></code></pre></div>
<p>Create a vector of the p-values and call it <code>pvals</code>.</p>
<p>3. Create an index <code>ind</code> with the column numbers of the predictors that were “statistically significantly” associated with <code>y</code>. Use a p-value cutoff of 0.01 to define “statistically significant”. How many predictors survive this cutoff?</p>
<p>4. Re-run the cross validation but after redefining <code>x_subset</code> to be the subset of <code>x</code> defined by the columns showing “statistically significant” association with <code>y</code>. What is the accuracy now?</p>
<p>5. Re-run the cross validation again, but this time using kNN. Try out the following grid of tuning parameters: <code>k = seq(101, 301, 25)</code>. Make a plot of the resulting accuracy.</p>
<p>6. In exercises 3 and 4, we see that despite the fact that <code>x</code> and <code>y</code> are completely independent, we were able to predict <code>y</code> with accuracy higher than 70%. We must be doing something wrong then. What is it?</p>
<ol style="list-style-type: lower-alpha">
<li>The function <code>train</code> estimates accuracy on the same data it uses to train the algorithm.</li>
<li>We are over-fitting the model by including 100 predictors.</li>
<li>We used the entire dataset to select the columns used in the model. This step needs to be included as part of the algorithm. The cross validation was done <strong>after</strong> this selection.</li>
<li>The high accuracy is just due to random variability.</li>
</ol>
<p>7. Advanced. Re-do the cross validation but this time include the selection step in the cross validation. The accuracy should now be close to 50%.</p>
<p>8. Load the <code>tissue_gene_expression</code> dataset. Use the <code>train</code> function to predict tissue from gene expression. Use kNN. What <code>k</code> works best?</p>
</div>
<div id="bootstrap" class="section level2">
<h2><span class="header-section-number">12.5</span> Bootstrap</h2>
<p>Suppose the income distribution of your population is as follows:</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb533-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">1995</span>)</a>
<a class="sourceLine" id="cb533-2" data-line-number="2">n &lt;-<span class="st"> </span><span class="dv">10</span><span class="op">^</span><span class="dv">6</span></a>
<a class="sourceLine" id="cb533-3" data-line-number="3">income &lt;-<span class="st"> </span><span class="dv">10</span><span class="op">^</span>(<span class="kw">rnorm</span>(n, <span class="kw">log10</span>(<span class="dv">45000</span>), <span class="kw">log10</span>(<span class="dv">3</span>)))</a>
<a class="sourceLine" id="cb533-4" data-line-number="4"><span class="kw">qplot</span>(<span class="kw">log10</span>(income), <span class="dt">bins =</span> <span class="dv">30</span>, <span class="dt">color =</span> <span class="kw">I</span>(<span class="st">&quot;black&quot;</span>))</a></code></pre></div>
<p><img src="Bayesian-Data-Science_files/figure-html/income-distribution-1.png" width="70%" style="display: block; margin: auto;" /></p>
<p>The population median is:</p>
<div class="sourceCode" id="cb534"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb534-1" data-line-number="1">m &lt;-<span class="st"> </span><span class="kw">median</span>(income)</a>
<a class="sourceLine" id="cb534-2" data-line-number="2">m</a></code></pre></div>
<pre><code>[1] 44939</code></pre>
<p>Suppose we don’t have access to the entire population, but want to estimate the median <span class="math inline">\(m\)</span>. We take a sample of 100 and estimate the population median <span class="math inline">\(m\)</span> with the sample median <span class="math inline">\(M\)</span>:</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb536-1" data-line-number="1">N &lt;-<span class="st"> </span><span class="dv">100</span></a>
<a class="sourceLine" id="cb536-2" data-line-number="2">X &lt;-<span class="st"> </span><span class="kw">sample</span>(income, N)</a>
<a class="sourceLine" id="cb536-3" data-line-number="3"><span class="kw">median</span>(X)</a></code></pre></div>
<pre><code>[1] 38461</code></pre>
<p>Can we construct a confidence interval? What is the distribution of <span class="math inline">\(M\)</span> ?</p>
<p>Because we are simulating the data, we can use a Monte Carlo simulation to learn the distribution of <span class="math inline">\(M\)</span>.</p>
<div class="sourceCode" id="cb538"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb538-1" data-line-number="1"><span class="kw">library</span>(gridExtra)</a>
<a class="sourceLine" id="cb538-2" data-line-number="2">B &lt;-<span class="st"> </span><span class="dv">10</span><span class="op">^</span><span class="dv">4</span></a>
<a class="sourceLine" id="cb538-3" data-line-number="3">M &lt;-<span class="st"> </span><span class="kw">replicate</span>(B, {</a>
<a class="sourceLine" id="cb538-4" data-line-number="4">  X &lt;-<span class="st"> </span><span class="kw">sample</span>(income, N)</a>
<a class="sourceLine" id="cb538-5" data-line-number="5">  <span class="kw">median</span>(X)</a>
<a class="sourceLine" id="cb538-6" data-line-number="6">})</a>
<a class="sourceLine" id="cb538-7" data-line-number="7">p1 &lt;-<span class="st"> </span><span class="kw">qplot</span>(M, <span class="dt">bins =</span> <span class="dv">30</span>, <span class="dt">color =</span> <span class="kw">I</span>(<span class="st">&quot;black&quot;</span>))</a>
<a class="sourceLine" id="cb538-8" data-line-number="8">p2 &lt;-<span class="st"> </span><span class="kw">qplot</span>(<span class="dt">sample =</span> <span class="kw">scale</span>(M), <span class="dt">xlab =</span> <span class="st">&quot;theoretical&quot;</span>, <span class="dt">ylab =</span> <span class="st">&quot;sample&quot;</span>) <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb538-9" data-line-number="9"><span class="st">  </span><span class="kw">geom_abline</span>()</a>
<a class="sourceLine" id="cb538-10" data-line-number="10"><span class="kw">grid.arrange</span>(p1, p2, <span class="dt">ncol =</span> <span class="dv">2</span>)</a></code></pre></div>
<p><img src="Bayesian-Data-Science_files/figure-html/median-is-normal-1.png" width="100%" style="display: block; margin: auto;" /></p>
<p>If we know this distribution, we can construct a confidence interval. The problem here is that, as we have already described, in practice we do not have access to the distribution. In the past, we have used the Central Limit Theorem, but the CLT we studied applies to averages and here we are interested in the median. We can see that the 95% confidence interval based on CLT</p>
<div class="sourceCode" id="cb539"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb539-1" data-line-number="1"><span class="kw">median</span>(X) <span class="op">+</span><span class="st"> </span><span class="fl">1.96</span> <span class="op">*</span><span class="st"> </span><span class="kw">sd</span>(X) <span class="op">/</span><span class="st"> </span><span class="kw">sqrt</span>(N) <span class="op">*</span><span class="st"> </span><span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>, <span class="dv">1</span>)</a></code></pre></div>
<pre><code>[1] 21018 55905</code></pre>
<p>is quite different from the confidence interval we would generate if we know the actual distribution of <span class="math inline">\(M\)</span>:</p>
<div class="sourceCode" id="cb541"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb541-1" data-line-number="1"><span class="kw">quantile</span>(M, <span class="kw">c</span>(<span class="fl">0.025</span>, <span class="fl">0.975</span>))</a></code></pre></div>
<pre><code> 2.5% 97.5% 
34438 59050 </code></pre>
<p>The bootstrap permits us to approximate a Monte Carlo simulation without access to the entire distribution. The general idea is relatively simple. We act as if the observed sample is the population. We then sample (with replacement) datasets, of the same sample size as the original dataset. Then we compute the summary statistic, in this case the median, on these <em>bootstrap samples</em>.</p>
<p>Theory tells us that, in many situations, the distribution of the statistics obtained with bootstrap samples approximate the distribution of our actual statistic. This is how we construct bootstrap samples and an approximate distribution:</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb543-1" data-line-number="1">B &lt;-<span class="st"> </span><span class="dv">10</span><span class="op">^</span><span class="dv">4</span></a>
<a class="sourceLine" id="cb543-2" data-line-number="2">M_star &lt;-<span class="st"> </span><span class="kw">replicate</span>(B, {</a>
<a class="sourceLine" id="cb543-3" data-line-number="3">  X_star &lt;-<span class="st"> </span><span class="kw">sample</span>(X, N, <span class="dt">replace =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb543-4" data-line-number="4">  <span class="kw">median</span>(X_star)</a>
<a class="sourceLine" id="cb543-5" data-line-number="5">})</a></code></pre></div>
<p>Note a confidence interval constructed with the bootstrap is much closer to one constructed with the theoretical distribution:</p>
<div class="sourceCode" id="cb544"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb544-1" data-line-number="1"><span class="kw">quantile</span>(M_star, <span class="kw">c</span>(<span class="fl">0.025</span>, <span class="fl">0.975</span>))</a></code></pre></div>
<pre><code> 2.5% 97.5% 
30253 56909 </code></pre>
<p>For more on the Bootstrap, including corrections one can apply to improve these confidence intervals, please consult the book <em>An introduction to the bootstrap</em> by Efron, B., &amp; Tibshirani, R. J.</p>
<p><em>Note that we can use ideas similar to those used in the bootstrap in cross validation: instead of dividing the data into equal partitions, we simply bootstrap many times.</em></p>
</div>
<div id="exercises-4" class="section level2">
<h2><span class="header-section-number">12.6</span> Exercises</h2>
<p>1. The <code>createResample</code> function can be used to create bootstrap samples. For example, we can create 10 bootstrap samples for the <code>mnist_27</code> dataset like this:</p>
<div class="sourceCode" id="cb546"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb546-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">1995</span>)</a>
<a class="sourceLine" id="cb546-2" data-line-number="2">indexes &lt;-<span class="st"> </span><span class="kw">createResample</span>(mnist_<span class="dv">27</span><span class="op">$</span>train<span class="op">$</span>y, <span class="dv">10</span>)</a></code></pre></div>
<p>How many times do <code>3</code>, <code>4</code>, and <code>7</code> appear in the first re-sampled index?</p>
<p>2. We see that some numbers appear more than once and others appear no times. This has to be this way for each dataset to be independent. Repeat the exercise for all the re-sampled indexes.</p>
<p>3. Generate a random dataset like this:</p>
<div class="sourceCode" id="cb547"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb547-1" data-line-number="1">y &lt;-<span class="st"> </span><span class="kw">rnorm</span>(<span class="dv">100</span>, <span class="dv">0</span>, <span class="dv">1</span>)</a></code></pre></div>
<p>Estimate the 75th quantile, which we know is:</p>
<div class="sourceCode" id="cb548"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb548-1" data-line-number="1"><span class="kw">qnorm</span>(<span class="fl">0.75</span>)</a></code></pre></div>
<p>with the sample quantile:</p>
<div class="sourceCode" id="cb549"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb549-1" data-line-number="1"><span class="kw">quantile</span>(y, <span class="fl">0.75</span>)</a></code></pre></div>
<p>Run a Monte Carlo simulation to learn the expected value and standard error of this random variable.</p>
<p>4. In practice, we can’t run a Monte Carlo simulation because we don’t know if <code>rnorm</code> is being used to simulate the data. Use the bootstrap to estimate the standard error using just the initial sample <code>y</code>. Use 10 bootstrap samples.</p>
<p>5. Redo exercise 4, but with 10,000 bootstrap samples.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="11-introduction-to-machine-learning.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="13-examples-of-algorithms.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
